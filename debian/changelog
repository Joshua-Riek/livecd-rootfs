livecd-rootfs (24.04.64) UNRELEASED; urgency=medium

  * Update the Ubuntu classic model assertion for TPM FDE to the 24.04 model.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 18 Apr 2024 18:57:28 +0200

livecd-rootfs (24.04.63) noble; urgency=medium

  [ Simon Poirier ]
  * Re-enable armhf disk-image-uefi building. (LP: #2062024)
    This reverts commit 4f51ff45 (fix: Remove UEFI booting armhf, 2024-03-12).

 -- Philip Roche <phil.roche@canonical.com>  Wed, 17 Apr 2024 18:28:47 +0100

livecd-rootfs (24.04.62) noble; urgency=medium

  [ Steve Langasek ]
  * Invert check for whether to include casper since the "yes" list is now
    much shorter than the "no" list
  * Refactor task/package handling for new installer images

 -- Dan Bungert <daniel.bungert@canonical.com>  Mon, 15 Apr 2024 22:40:40 -0600

livecd-rootfs (24.04.61) noble; urgency=medium

  * Fix the UC24 builds: use --snap instead of --extra-snaps.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 11 Apr 2024 10:44:04 +0200

livecd-rootfs (24.04.60) noble; urgency=medium

  * Drop use of 'laptop' for x13s as this is now migrated to generic.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 08 Apr 2024 21:35:46 -0700

livecd-rootfs (24.04.59) noble; urgency=medium

  [ Catherine Redfield ]
  * Add policy:unconfined_restrictions feature to 6.8 kernel (LP: #2060558)

  [ Dan Bungert ]
  * budgie: remove add_snap of ubuntu-budgie-installer,
    ubuntu-desktop-bootstrap is used instead. (LP: #2060568)

 -- Dan Bungert <daniel.bungert@canonical.com>  Mon, 08 Apr 2024 14:09:15 -0600

livecd-rootfs (24.04.58) noble; urgency=medium

  * Add console-conf to UC24 extra snaps by default, as the models define
    it as optional so we need to explicitly request it to be added.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 08 Apr 2024 16:24:38 +0200

livecd-rootfs (24.04.57) noble; urgency=medium

  * Ensure the proper hooks are copied for Ubuntu MATE (LP: #2058161).

 -- Simon Quigley <tsimonq2@ubuntu.com>  Sun, 07 Apr 2024 17:37:21 -0500

livecd-rootfs (24.04.56) noble; urgency=medium

  * l/a/build: if debootstrap fails, cat deboostrap.log
  * flavors: cloud-init needs to be present in Subiquity-based installers.

 -- Dan Bungert <daniel.bungert@canonical.com>  Mon, 01 Apr 2024 19:39:25 -0600

livecd-rootfs (24.04.55) noble; urgency=medium

  * No-change rebuild for CVE-2024-3094

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sat, 30 Mar 2024 11:26:01 -0700

livecd-rootfs (24.04.54) noble; urgency=medium

  [ Steve Langasek ]
  * Drop dkms from the riscv64 lichee images.

  [ Erich Eickmeyer ]
  * Add chroot_early symlink for Ubuntu MATE

 -- Dan Bungert <daniel.bungert@canonical.com>  Thu, 28 Mar 2024 11:47:02 -0600

livecd-rootfs (24.04.53) noble; urgency=medium

  * Add support for building Ubuntu Core 24 images.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 28 Mar 2024 12:10:15 +0100

livecd-rootfs (24.04.52) noble; urgency=medium

  * Move from hwe-22.04 to hwe-24.04 throughout, hwe-22.04 is obsolete and
    to be dropped from the release pocket imminently.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 27 Mar 2024 12:03:04 -0700

livecd-rootfs (24.04.51) noble; urgency=medium

  * Rename the casper.gschema override to livecd-rootfs.override
    to try to avoid conflicts with the override generated in casper

 -- Sebastien Bacher <seb128@ubuntu.com>  Mon, 25 Mar 2024 11:46:35 +0100

livecd-rootfs (24.04.50) noble; urgency=medium

  [ Dan Bungert ]
  * Use the same includes.chroot* overrides from desktop for the
    subiquity-backed oem and flavor installer ISOs. (LP: #2055077)
  * copy include.* directories for subiquity desktop install ISOs (LP: #2055077)

  [ Utkarsh Gupta ]
  * Add NOW env variable in autopkgtest.

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Thu, 21 Mar 2024 01:23:00 +0530

livecd-rootfs (24.04.49) noble; urgency=medium

  [ Erich Eickmeyer]
  * Move Ubuntu MATE to the new Ubuntu desktop installer snap.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 18 Mar 2024 13:18:54 -0700

livecd-rootfs (24.04.48) noble; urgency=medium

  * Fix bash synxtax for index parameter expansion.

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Wed, 13 Mar 2024 18:43:53 +0530

livecd-rootfs (24.04.47) noble; urgency=medium

  [ Utkarsh Gupta ]
  * Add build_name metadata to build.info file for OCI and Base images.

  [ jchittum ]
  * Drop support for armhf uefi booting vm images. (LP: #2057776)

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Wed, 13 Mar 2024 18:27:01 +0530

livecd-rootfs (24.04.46) noble; urgency=medium

  [ Dan Bungert ]
  * mini-iso: move depends to mini-iso-tools package

  [ handsome_feng ]
  * Move Ubuntu Kylin to the new installer.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 06 Mar 2024 18:31:13 -0800

livecd-rootfs (24.04.45) noble; urgency=medium

  [ Jess Jang ]
  * fix: Missing apparmor feature for 6.8 kernel (LP: #2056078)

  [ Chad Smith ]
  * Fix cloud-init clean script, by declaring the interpreter.

 -- Jess Jang <jess.jang@canoical.com>  Mon, 04 Mar 2024 15:17:53 -0600

livecd-rootfs (24.04.44) noble; urgency=medium

  * Switch to using the candidate channel for the ubuntu-image snap. This way
    we can more easily make use of fixes in ubuntu-image without having to
    wait for the full validation process to finish.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 01 Mar 2024 12:08:13 +0100

livecd-rootfs (24.04.43) noble; urgency=medium

  * Set the required debconf settings to allow for noninteractive
    grub updates in cloud images (LP: #2054103)

 -- Philip Roche <phil.roche@canonical.com>  Fri, 23 Feb 2024 13:54:57 +0000
 
livecd-rootfs (24.04.42) noble; urgency=medium

  [ Sean Davis ]
  * xubuntu: Fix description 2-line indentation.

 -- Brian Murray <brian@ubuntu.com>  Thu, 22 Feb 2024 17:52:12 -0800

livecd-rootfs (24.04.41) noble; urgency=medium

  [ Simon Poirier ]
  * live-build/buildd/includes.chroot/etc/apt:
    unpin backports for buildd images (LP: #2009871)

 -- Philip Roche <phil.roche@canonical.com>  Thu, 22 Feb 2024 17:39:57 +0000

livecd-rootfs (24.04.40) noble; urgency=medium

  [ Sean Davis ]
  * Fix the KERNEL_FLAVOURS variable for Xubuntu.

 -- Brian Murray <brian@ubuntu.com>  Wed, 21 Feb 2024 17:04:37 -0800

livecd-rootfs (24.04.39) noble; urgency=medium

  [ Steve Langasek ]
  * Pare down 'BASE_SEED' handling to only those flavors which still use it.

  [ Łukasz 'sil2100' Zemczak ]
  * Attempt building netboot tarballs for largemem arm64 server images.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 20 Feb 2024 17:04:01 +0100

livecd-rootfs (24.04.38) noble; urgency=medium

  * Fix overlooked syntax error

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sun, 18 Feb 2024 09:14:21 -0800

livecd-rootfs (24.04.37) noble; urgency=medium

  [ Sean Davis ]
  * Move Xubuntu to the new installer.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sun, 18 Feb 2024 09:08:50 -0800

livecd-rootfs (24.04.36) noble; urgency=medium

  * live-build/buildd/hooks/00-mirror.binary: Patch all sources files

 -- Julian Andres Klode <juliank@ubuntu.com>  Fri, 16 Feb 2024 22:04:07 +0100

livecd-rootfs (24.04.35) noble; urgency=medium

  [ Steve Langasek ]
  * Drop references to ubuntu-gnome which is not a current flavor.

  [ Didier Roche ]
  * Ensure ubuntu-wsl image can be published in cloud-images again.

 -- Didier Roche <didrocks@ubuntu.com>  Fri, 16 Feb 2024 11:11:58 +0100

livecd-rootfs (24.04.34) noble; urgency=medium

  [ Michael Hudson-Doyle ]
  * Hooks and other things need to go in live-build/$PROJECT and $PROJECT for
    Ubuntu Studio is ubuntustudio-dvd, not ubuntustudio.

  [ Erich Eickmeyer ]
  * Change Ubuntu Cinnamon to layered image.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Fri, 16 Feb 2024 10:17:27 +1300

livecd-rootfs (24.04.33) noble; urgency=medium

  [ Michael Hudson-Doyle ]
  * Edubuntu, Ubuntu Studio and Ubuntu Budgie have hooks in
    live-build/${PROJECT}/hooks now but they need to be copied to config/ to
    do anything.  LP: #2052617.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 14 Feb 2024 09:42:07 -0800

livecd-rootfs (24.04.32) noble; urgency=medium

  * Switch from sources.list to ubuntu.sources (LP: #2048129)
  * Setup preinstalled pool in preinstalled-pool.sources

 -- Julian Andres Klode <juliank@ubuntu.com>  Mon, 12 Feb 2024 21:55:42 +0100

livecd-rootfs (24.04.31) noble; urgency=medium

  * Use the ubuntu-desktop-bootstrap snap as the Ubuntu Desktop installer

 -- Sebastien Bacher <seb128@ubuntu.com>  Mon, 12 Feb 2024 21:30:16 +0100

livecd-rootfs (24.04.30) noble; urgency=medium

  [ Heinrich Schuchardt ]
  * riscv: install u-boot-starfive on VisionFive 2 preinstalled image.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 12 Feb 2024 17:06:59 +0100

livecd-rootfs (24.04.29) noble; urgency=medium

  * Fix ubuntu-wsl images to be published in cloud-images.

 -- Didier Roche <didrocks@ubuntu.com>  Mon, 12 Feb 2024 11:01:18 +0100

livecd-rootfs (24.04.28) noble; urgency=medium

  * Add missing mkdir invocation from 24.04.26 (LP: #2052617).

 -- Simon Quigley <tsimonq2@ubuntu.com>  Fri, 09 Feb 2024 13:32:40 -0600

livecd-rootfs (24.04.27) noble; urgency=medium

  [ Jean-Baptiste Lallement ]
  [ Didier Roche-Tolomelli ]
  * Create different WSL tarballs depending on upgrade policy.
  * Enable systemd as part of image creation instead of launcher hack.

 -- Didier Roche <didrocks@ubuntu.com>  Wed, 07 Feb 2024 17:01:15 +0100

livecd-rootfs (24.04.26) noble; urgency=medium

  [ Steve Langasek ]
  * Share live-build/ubuntu/hooks/020-ubuntu-live.chroot_early across 
    all flavors using new-style layered squashfs, removing need for 
    kernel commandline options in debian-cd.

  [ dann frazier ]
  * Use flock to avoid races with systemd-udevd that cause loop device
    partitions to briefly disappear.

 -- dann frazier <dann.frazier@canonical.com>  Thu, 01 Feb 2024 09:09:17 -0700

livecd-rootfs (24.04.25) noble; urgency=medium

  * live-build/auto/config: for ubuntu-server, consider the actual kernel
    flavor when dealing with netboot layers - even if we don't really care.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 30 Jan 2024 11:27:46 +0100

livecd-rootfs (24.04.24) noble; urgency=medium

  [ Tomáš Virtus ]
  * live-build/functions: mount_disk_image: add rootpart parameter

  [ Utkarsh Gupta ]
  * live-build/auto/config: drop python3-systemd from CPC's minimized builds.

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Mon, 22 Jan 2024 18:01:53 +0530

livecd-rootfs (24.04.23) noble; urgency=medium

  * Remove magic-proxy and all references to it as it is not used by any
    builds of any release newer than 18.04.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Mon, 29 Jan 2024 14:53:26 +1300

livecd-rootfs (24.04.22) noble; urgency=medium

  * Add a largemem subarch for ubuntu-server that ships a 64k kernel variant
    by default (LP: #2050209).

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 25 Jan 2024 11:01:28 +0100

livecd-rootfs (24.04.21) noble; urgency=medium

  * live-build/functions: avoid losetup -P as it appears to race with udev and
    do it a bit more by-hand instead. (LP: #2045586)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 25 Jan 2024 10:28:38 +1300

livecd-rootfs (24.04.20) noble; urgency=medium

  * fix: Fix for calling unminimize if lxd-installer package
    not installed. (LP: #2049723)
  * Do not exit live image build if PASSES_TO_LAYERS is true and layer
    is already registered.

 -- Philip Roche <phil.roche@canonical.com>  Thu, 25 Jan 2024 07:57:29 +1300

livecd-rootfs (24.04.19) noble; urgency=medium

  * live-build/auto/config: don't repeatedly add the same pass name to the
    list of layers.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 18 Jan 2024 11:03:55 -0800

livecd-rootfs (24.04.18) noble; urgency=medium

  * update apparmor feature overlay match for target 6.6 kernel.

 -- Thomas Bechtold <thomas.bechtold@canonical.com>  Tue, 16 Jan 2024 13:06:37 +0100

livecd-rootfs (24.04.17) noble; urgency=medium

  * unminimize: Use lxd-installer to install LXD itself. (LP: #2036725)

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Thu, 11 Jan 2024 15:12:53 +0530

livecd-rootfs (24.04.16) noble; urgency=medium

  * Fix overlooked syntax error in live-build/auto/config.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 03 Jan 2024 23:38:53 -0800

livecd-rootfs (24.04.15) noble; urgency=medium

  * live-build/ubuntu/hooks/020-ubuntu-live.chroot_early: apply to any
    layer ending in .live so this can be reused across flavors
  * live-build/ubuntu/hooks/020-ubuntu-live.chroot_early: check for
    glib-compile-schemas presence before calling
  * live-build/auto/config: include a sanity check that no layered image has
    more than one "live" layer that would cause undefined behavior with the
    above hook.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 03 Jan 2024 23:26:05 -0800

livecd-rootfs (24.04.14) noble; urgency=medium

  * When the files we're creating in the live layer have static content,
    ship them in live-build/ubuntu/includes.chroot.minimal.standard.live
    instead of generating them from
    live-build/ubuntu/hooks/020-ubuntu-live.chroot_early.  Also fixes the
    fact that live-build/ubuntu/hooks/020-ubuntu-live.chroot_early was
    incorrectly writing to /root in the previous upload instead of /usr.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 20 Dec 2023 11:40:02 -0800

livecd-rootfs (24.04.13) noble; urgency=medium

  * Drop support for building armhf+raspi images; as of noble these are
    arm64-only.
  * live-build/ubuntu/hooks/020-ubuntu-live.chroot_early: move code here
    from scripts/casper-bottom/61desktop_canary_tweaks that should be done
    statically at image build time, not at boot.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 20 Dec 2023 08:15:34 -0800

livecd-rootfs (24.04.12) noble; urgency=medium

  * Switch Edubuntu to the new installer.
  * Add casper to minimal.standard.live seed.

 -- Erich Eickmeyer <eeickmeyer@ubuntu.com>  Tue, 12 Dec 2023 12:56:37 -0800

livecd-rootfs (24.04.11) noble; urgency=medium

  * Explicitly add_package linux-$KERNEL_FLAVOURS in Ubuntu Studio.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 08 Dec 2023 18:34:07 -0800

livecd-rootfs (24.04.10) noble; urgency=medium

  * Set C.UTF-8 locale in /etc/default/locale for all images; originally
    intended to be landed in the cosmic cycle..
  * Project name for Ubuntu Studio needs to be 'ubuntustudio-dvd'
    throughout, not 'ubuntustudio'.  

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 08 Dec 2023 15:07:41 -0800

livecd-rootfs (24.04.9) noble; urgency=medium

  * When building locally using the auto/build script unmounting fails.
    Instead of mounting /dev/pts per bind mount the devpts file system
    directly.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Fri, 08 Dec 2023 15:43:04 +1300

livecd-rootfs (24.04.8) noble; urgency=medium

  [ Erich Eickmeyer ]
  * Switch Ubuntu Studio to the new installer.

  [ Steve Langasek ]
  * Remove *-dvd glob handling for live layers; Ubuntu Studio is the only
    remaining "DVD" flavor, and with the move to the new installer this bit
    is also now incorrect.
  * live-build/auto/config: fail immediately on unknown arch/subarch.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 07 Dec 2023 15:36:30 -0800

livecd-rootfs (24.04.7) noble; urgency=medium

  [ Dave Jones ]
  * Remove more bits related to pre-installed desktop images (LP: #2038098)

  [ Jean-Baptiste Lallement ]
  * Include -updates when calling germinate.  LP: #1921862.

  [ Dan Bungert ]
  * cpc/vagrant: fix possible autopkgtest hang on ssh-keygen

  [ Simon Poirier ]
  * add systemd-resolved back to buildd images.  LP: #2007419.

  [ Steve Langasek ]
  * live-build/functions: add additional debugging to mount_image() on
    failure since we again have loop partitions failing to be block devices.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sun, 03 Dec 2023 21:38:27 -0800

livecd-rootfs (24.04.6) noble; urgency=medium

  * Re-enable universe for pre-installed images (LP: #2044154)

 -- Ankush Pathak <ankush.pathak@canonical.com>  Tue, 21 Nov 2023 11:26:46 -0500

livecd-rootfs (24.04.5) noble; urgency=medium

  [ Yao Wei (魏銘廷) ]
  * ubuntu-oem: add dummy files in order not to fail make-hooks

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Fri, 17 Nov 2023 17:20:44 +1300

livecd-rootfs (24.04.4) noble; urgency=medium

  * Drop a few remaining 'legacy' references.
  * Drop cargo-culted code for "preinstalled" images.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sun, 05 Nov 2023 16:42:19 +0200

livecd-rootfs (24.04.3) noble; urgency=medium

  * Drop the legacy images for both Ubuntu and Ubuntu Budgie.
  * We no longer need to remove ubiquity from the Ubuntu live layer and
    install ubuntu-desktop-installer, this is now handled via the seeds.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sat, 04 Nov 2023 22:06:57 +0200

livecd-rootfs (24.04.2) noble; urgency=medium

  * Enable snap preseeding with ppc64el images where /boot/vmlinux is used
    instead of /boot/vmlinuz. (LP: #2038957)

 -- Philip Roche <phil.roche@canonical.com>  Thu, 26 Oct 2023 17:56:00 +0100
 
livecd-rootfs (24.04.1) noble; urgency=medium

  [ Steve Langasek ]
  * call ubuntu-image classic with --debug, because --verbose doesn't give
    us anything useful in the livefs build logs.

  [ Heinrich Schuchardt ]
  * arm: fix console parameter for ARM cloud-images (LP: #2036730)

 -- Paride Legovini <paride@ubuntu.com>  Wed, 25 Oct 2023 17:58:13 +0200

livecd-rootfs (23.10.55) mantic; urgency=medium

  * fix: add 6.5 kernel appamor features to livecd-rootfs based on
    features pulled from 6.5.0.1006 kernel in proposed (LP: #2037567)

 -- jchittum <john.chittum@canonical.com>  Thu, 05 Oct 2023 11:10:43 -0500

livecd-rootfs (23.10.54) mantic; urgency=medium

  * Update the desktop fde model to include firmware-updater

 -- Sebastien Bacher <seb128@ubuntu.com>  Tue, 03 Oct 2023 22:32:37 +0200

livecd-rootfs (23.10.53) mantic; urgency=medium

  * oem, budgie: kernel in the live layer

 -- Dan Bungert <daniel.bungert@canonical.com>  Tue, 03 Oct 2023 10:42:32 -0600

livecd-rootfs (23.10.52) mantic; urgency=medium

  [ Philip Roche ]
  * fix: Sort filelists creating when building ubuntu-cpc images (LP: #2033677)
  * fix: Create .filelist in ubuntu-cpc project binary hooks that do not use
    create_manifest shared function (LP: #2033751)
    * fix: Ensure any created .filelist is symlinked with expected prefix
      and correct permissions
    * fix: disk-image-non-cloud ubuntu-cpc build target now provides
      manifest and filelist

  [ Steve Langasek ]
  * remove ssl-cert "snakeoil" private keys from images, since this makes
    them not very private.  LP: #2037869.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 02 Oct 2023 18:13:03 -0700

livecd-rootfs (23.10.51) mantic; urgency=medium

  [ Dimitri John Ledkov ]
  * Add support to live-build/lb_chroot_layered to allow adding the kernel to
    the currently required layer location, which fixes arm64+x13s and also
    allows for removing live-build/ubuntu/hooks/020-ubuntu-live.binary.

 -- Dan Bungert <daniel.bungert@canonical.com>  Mon, 02 Oct 2023 14:55:29 -0600

livecd-rootfs (23.10.50) mantic; urgency=medium

  * live-build/ubuntu/hooks: ensure kernel artifacts named with subarch

 -- Dimitri John Ledkov <dimitri.ledkov@canonical.com>  Fri, 29 Sep 2023 21:36:07 +0100

livecd-rootfs (23.10.49) mantic; urgency=medium

  [ Phil Roche ]
  * fix: arm64 flash-kernel removal from ubuntu-cpc project cloud images
    (LP: #2037074)

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 27 Sep 2023 22:37:45 -0700

livecd-rootfs (23.10.48) mantic; urgency=medium

  [ Dimitri John Ledkov ]
  * Add support for x13s subarch.  LP: #2037099.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 27 Sep 2023 12:49:04 -0700

livecd-rootfs (23.10.47) mantic; urgency=medium

  [ Phil Roche ]
  * fix: Ensure that grub/shim package installs do not install recommends for
    minimized ubuntu-cpc image builds (LP: #2037075)

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 26 Sep 2023 15:04:09 -0700

livecd-rootfs (23.10.46) UNRELEASED; urgency=medium

  [ Simon Poirier ]
  * Fix use of variable declared in conditional branch and used in parent
    scope in snap_validate_seed. This would affect binary for images without
    kernel and using "set -u". (LP: #2037338)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Tue, 26 Sep 2023 15:11:07 +1300

livecd-rootfs (23.10.45) mantic; urgency=medium

  * budgie: Configure universe & multiverse sources (LP: #2036966)

 -- Dan Bungert <daniel.bungert@canonical.com>  Mon, 25 Sep 2023 13:57:21 -0600

livecd-rootfs (23.10.44) mantic; urgency=medium

  * Fix the subarch used in the hook to identify images for sifive
    unmatched.  LP: #2037060.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 22 Sep 2023 10:58:57 -0700

livecd-rootfs (23.10.43) mantic; urgency=medium

  * The unminimize script should install the lxd snap from the per-release
    channel, the same as in the full image. (LP: #2036725)

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Fri, 22 Sep 2023 15:01:43 +0530

livecd-rootfs (23.10.42) mantic; urgency=medium

  * fix: Fix the missing `fi` with the recent changes in the
    `unminimize` script for `ubuntu-cpc` project (LP: #2036591)

 -- Phil Roche <phil.roche@canonical.com>  Tue, 19 Sep 2023 11:30:19 +0100

livecd-rootfs (23.10.41) mantic; urgency=medium

  * ubuntu-cpc: create a new boot partition on all UEFI cloud-images
  * ubuntu-cpc: refactor the logic to define the disk image size for UEFI
    images

 -- Gauthier Jolly <gauthier.jolly@canonical.com>  Tue, 19 Sep 2023 08:20:00 -0700

livecd-rootfs (23.10.40) mantic; urgency=medium

  * Enhance unminimize to transform into a base image
    for ubuntu-cpc.
  * Install linux-virtual to restore the stripped headers
    for ubuntu-cpc.

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Tue, 19 Sep 2023 14:05:19 +0530

livecd-rootfs (23.10.39) mantic; urgency=medium

  * The chroot tmpfs mount should only be /var/lib/apt/lists, not
    /var/lib/apt; the latter breaks changes to /var/lib/apt/extended_states.
    LP: #2036195.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 18 Sep 2023 15:06:23 -0700

livecd-rootfs (23.10.38) mantic; urgency=medium

  * desktop: construct a minimal+tpmfde catalog variation, with matching
    layers (LP: #2036461)

 -- Dan Bungert <daniel.bungert@canonical.com>  Mon, 18 Sep 2023 15:48:33 -0600

livecd-rootfs (23.10.37) mantic; urgency=medium

  * fix: ensure minimize-manual script uses passed in argument for all commands (LP: #2036198)
  * fix: armhf flavour for 6.5+ kernel is now generic (LP: #2036192)

 -- Philip Roche <phil.roche@ubuntu.com>  Fri, 15 Sep 2023 11:58:23 +0100

livecd-rootfs (23.10.36) mantic; urgency=medium

  * Since we restored the minimal layer, we also need to adjust all hook
    conditionals to use the minimal.standard layer name instead of standard.
  * 020-ubuntu-live.binary hook: make sure the kernel and initrd artifacts are
    named correctly.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 13 Sep 2023 11:43:22 +0200

livecd-rootfs (23.10.35) mantic; urgency=medium

  * Restore a desktop minimal layer and use if by default (ffe lp: #2034261)

 -- Sebastien Bacher <seb128@ubuntu.com>  Tue, 12 Sep 2023 13:12:16 +0200

livecd-rootfs (23.10.34) mantic; urgency=medium

  [ Steve Langasek ]
  * Drop (outdated, inconsistent) /etc/hosts from ubuntu-server chroot
    includes.

  [ Michael Hudson-Doyle ]
  * auto/config: use the new server-live task to reduce the use of explicit
    calls to add_package and add_snap a bit.

  [ Dave Jones ]
  * clean up references to obsolete pi subarchs no longer built, and remove
    code that writes out /boot/firmware settings that are later clobbered

  [ Dan Bungert ]
  * desktop: adjust kernel to be in the live layer, to support changing which
    kernel is installed rather than always using hwe. (LP: #2026225)

 -- Dan Bungert <daniel.bungert@canonical.com>  Fri, 08 Sep 2023 08:54:13 -0600

livecd-rootfs (23.10.33) mantic; urgency=medium

  * Drop references to kubuntu-plasma5, obsolete since wily
  * ubuntucinnamon-live task has existed for a while now, use it instead of
    hard-coded list of packages.
  * Don't hard-code addition of xterm package on xubuntu, it's in the task
    already.
  * Drop references to ubuntu-netbook, obsolete since Ubuntu 11.04.
  * ubuntu-unity-live task exists, use it also instead of hard-coded list of
    packages.
  * live-build/auto/config: various refactors to eliminate code duplication
  * Drop references to ubuntu-dvd, obsolete after precise.
  * Drop references to mythbuntu, obsolete after xenial.
  * Parameterize and consolidate live image definitions for flavors using
    a common pattern
  * generic is the default kernel flavor in live-build on Ubuntu; remove
    hard-coded cargo-culting of this setting.
  * Drop references to kubuntu-dvd, obsoleted in 2012.
  * ubuntukylin-default-settings is part of the task, don't hard-code the
    package.
  * Remove unnecessary arch guarding of the UbuntuStudio kernel selection:
    we only build this image on amd64 (the arch checking is from i386 days),
    and the lowlatency kernel also exists on arm64.
  * Drop code only used for d-i based ubuntu-server images, no longer
    supported.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 06 Sep 2023 15:51:11 -0700

livecd-rootfs (23.10.32) mantic; urgency=medium

  * Make the hybrid canary images the default for Ubuntu.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 06 Sep 2023 18:21:34 +0200

livecd-rootfs (23.10.31) mantic; urgency=medium

  * blkid is unreliable in mount_image(), but this blkid call is only here
    for debugging, so ignore any failures (even if we don't understand
    them).  LP: #2034299.
  * mark the minimized autopkgtest as also allowing stderr, in the event of
    any error messages from blkid.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 05 Sep 2023 14:42:03 -0700

livecd-rootfs (23.10.30) mantic; urgency=medium

  * Fix unminimize to correctly list packages. (LP: #1996489)

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Sat, 02 Sep 2023 02:16:03 +0530

livecd-rootfs (23.10.29) mantic; urgency=medium

  * canary: switch to use the live task, try to use KERNEL_FLAVOURS instead
    of a manual kernel add_package.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 31 Aug 2023 11:57:11 +0200

livecd-rootfs (23.10.28) mantic; urgency=medium

  * Allow stderr in the autopkgtest.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 30 Aug 2023 08:28:57 -0700

livecd-rootfs (23.10.27) mantic; urgency=medium

  * Add ubuntu to the list of targets we autopkgtest for on amd64, to ensure
    coverage of the lb_chroot_layered behavior.
  * lb_chroot_layered: if the unmount of the chroot mountpoint fails, dump
    mount information for debugging.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 29 Aug 2023 10:39:23 -0700

livecd-rootfs (23.10.26) mantic; urgency=medium

  [ Łukasz 'sil2100' Zemczak ]
  * Update the enhanced-sb layer model to not preinstall the printing snaps,
    per changes to seeds. Live layer model not changed as it will go away
    soon per our staged changes.

  [ Michael Hudson-Doyle ]
  * Use a traditional seed.yaml style seed for the canary installer's live

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 28 Aug 2023 12:13:38 +0200

livecd-rootfs (23.10.25) mantic; urgency=medium

  * snap-seed-parse.py: fix builds with no snaps.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Mon, 28 Aug 2023 14:02:56 +1200

livecd-rootfs (23.10.24) mantic; urgency=medium

  * update-source-catalog: Fix case where a variaton does not point at the
    base layer (i.e. most builds) (LP: #2033168)
  * Configure universe sources in canary ISO. (LP: #2033109)
  * snap-seed-parse.py: Update to allow parsing uc20-style seeds.
    (LP: #2028984)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Mon, 28 Aug 2023 12:48:53 +1200

livecd-rootfs (23.10.23) mantic; urgency=medium

  * i386 foreign-arch support was added for the canary image before 23.04
    released, but by mistake it was only added to the squashfs for the live
    session, and not the squashfs layer used as the source for installation.
    split the chroot hooks to add this to the standard.squashfs.
    LP: #2033170.
  * Drop mke2fs.conf override, no longer needed.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sat, 26 Aug 2023 16:34:27 -0700

livecd-rootfs (23.10.22) mantic; urgency=medium

  * Undo preseeding in reset_snapd_state.
  * update-source-catalog: work better when we want a variation to point
    at the base layer.
  * Stop launching a gnome-terminal at startup of the canary live session.
    (LP: #2032647)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Fri, 25 Aug 2023 18:45:03 +1200

livecd-rootfs (23.10.21) mantic; urgency=medium

  * Deduplicate the layers just before creating the squashfs, to enable
    deduplication of the result of binary hooks as well.

  [ Steve Langasek ]
  * Deduplicate snaps between squashfs layers on classic:
    - Consolidate canary layers to merge 'classic' back into 'standard'
    - Reset /var/lib/snapd in the upper layers before calling snap
      prepare-image
    - No need to use rsync in hooks now to avoid file duplication since layer
      handling as a whole now uses rsync.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 23 Aug 2023 10:31:42 -0700

livecd-rootfs (23.10.20) mantic; urgency=medium

  * Update canary model assertions to include all the regular seeded snaps,
    using the right channels for all of them.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 22 Aug 2023 17:14:38 +0200

livecd-rootfs (23.10.19) mantic; urgency=medium

  * Add python3-systemd to CPC's minimized builds.

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Tue, 22 Aug 2023 14:54:57 +0530

livecd-rootfs (23.10.18) mantic; urgency=medium

  * Refresh the canary model assertions. The live model now includes all the
    snaps of the standard installation (including firefox), as we want to offer
    the same experience in the livefs as in the target installation. We also
    track other, proper channels for the seeded snaps.
  * Fix the 020-canary-* hooks referencing the wrong layer names after changes
    introduced in 23.10.17.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 18 Aug 2023 17:58:54 +0200

livecd-rootfs (23.10.17) mantic; urgency=medium

  * Merge the minimal and standard layers on the Ubuntu Desktop images
    (both daily-live and canary), now that there is no separate minimal
    install target.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 17 Aug 2023 09:39:39 -0700

livecd-rootfs (23.10.16) mantic; urgency=medium

  * fix: Do not install recommends for ubuntu-cpc minimized project (LP: #2031640)
    * fix: Remove dangling symlink /boot/initrd.img.old if exists
    * fix: Ensure required dependencies are installed before trying `grub-install`
    * fix: Install required package fuse3 when preseeding snaps

 -- Philip Roche <phil.roche@ubuntu.com>  Thu, 17 Aug 2023 11:44:23 +0100

livecd-rootfs (23.10.15) mantic; urgency=medium

  [ Stefan Hammer ]
  * fix(armhf): Fix armhf kernel file detection

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Thu, 17 Aug 2023 07:06:53 +0530

livecd-rootfs (23.10.14) mantic; urgency=medium

  * canary
    * fix the install of the classic variation by including dctrl-tools in the
      live layer
    * fix the layer for the classic variation
    * fix language layer generation (LP: #2031027)
    * drop minimal install source to match the other desktop image

 -- Dan Bungert <daniel.bungert@canonical.com>  Tue, 15 Aug 2023 18:05:39 -0600

livecd-rootfs (23.10.13) mantic; urgency=medium

  [ Jess Jang ]
  * fix: bind correct apparmor feature for validating snap seed.

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Thu, 10 Aug 2023 01:44:29 +0530

livecd-rootfs (23.10.12) mantic; urgency=medium

  * live-build/auto/build: Avoid purging packages for ubuntu-cpc.
    With the switch to the ubuntu-cloud-minimal seed, we
    don't really need to purge anything now. On the contrary,
    the purging of packages if not installed, fails with the
    exit code of 100.

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Tue, 08 Aug 2023 15:44:42 +0530

livecd-rootfs (23.10.11) mantic; urgency=medium

  [ Łukasz 'sil2100' Zemczak ]
  * canary: enable locale support for canary layers.

  [ Michael Hudson-Doyle ]
  * Remove additional dependencies from subiquity units as they are now
    interfering with the boot process. (LP: #2028862)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Tue, 08 Aug 2023 13:57:47 +1200

livecd-rootfs (23.10.10) mantic; urgency=medium

  * Revert "desktop, budgie: no need to include the kernel directly, it is
    installed at runtime" due to build breakage

 -- Dan Bungert <daniel.bungert@canonical.com>  Thu, 03 Aug 2023 21:37:46 -0600

livecd-rootfs (23.10.9) mantic; urgency=medium

  * desktop, budgie: no need to include the kernel directly, it is installed
    at runtime (LP: #2026225)

 -- Dan Bungert <daniel.bungert@canonical.com>  Wed, 02 Aug 2023 13:16:00 -0600

livecd-rootfs (23.10.8) mantic; urgency=medium

  [ Heinrich Schuchardt ]
  * risc-v: increase loader2 partition for VisionFive 2. EDK II is available
    for the StarFive VisionFive 2 board. As it is larger than U-Boot we need
    to increase the size of the loader 2 partition to accommodate it.

  [ Michael Hudson-Doyle ]
  * lb_chroot_layered: use rsync to make more minimal overlay layers.
    (LP: #2028213)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 02 Aug 2023 13:19:29 +1200

livecd-rootfs (23.10.7) mantic; urgency=medium

  * Actually fix live-build/ubuntu-cpc/hooks.d/base/disk-image.binary to not
    call force_boot_without_initramfs on s390x rather than
    disk-image-uefi.binary which obviously would never run on s390x.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Sun, 30 Jul 2023 09:17:52 +1200

livecd-rootfs (23.10.6) mantic; urgency=medium

  * live-build/ubuntu-cpc/hooks.d/base/disk-image-*.binary: Fix invocations of
    force_boot_without_initramfs to pass "mountpoint" and not "${mountpoint}"
    (which actually worked on most arches for VERY BAD reasons but fails on
    s390x).
  * live-build/ubuntu-cpc/hooks.d/base/disk-image.binary: Do not call
    force_boot_without_initramfs on s390x.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Sat, 29 Jul 2023 07:56:28 +1200

livecd-rootfs (23.10.5) mantic; urgency=medium

  [ Utkarsh Gupta ]
  * Use ubuntu-cloud-minimal metapackage in minimized CPC images rather than
    cloud-image task which brings in snaps that are unwanted in minimized
    builds.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Fri, 28 Jul 2023 11:05:44 +1200

livecd-rootfs (23.10.4) mantic; urgency=medium

  * canary: use new 23.10 models for both the live and enhanced-sb layers.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 19 Jul 2023 11:04:51 +0200

livecd-rootfs (23.10.3) mantic; urgency=medium

  * Depend on devscripts: classic ubuntu-image builds will build the gadget
    from a repository using make, and the reference pc-gadget snap uses
    chdist to pull the latest GRUB/shim from the proper series x pocket;
    NB: chdist was used instead of the more convenient pull-lp-debs as
    devscripts is in main while ubuntu-dev-tools is in universe. It's
    inelegant for livecd-rootfs to pick up dependencies needed to build
    gadgets, even if it's for the official ones as other gadgets might want
    other dependencies, rather this should be expressed as part of the build
    contract of the gadget, or livecd-rootfs should only consume pre-built
    gadgets built in a standard way (e.g. snap build, deb build etc.).

 -- Loïc Minier <loic.minier@ubuntu.com>  Sun, 16 Jul 2023 10:41:31 +0000

livecd-rootfs (23.10.2) mantic; urgency=medium

  * Fixup up two more places with kvm removal.
  * Set `gbp dch` vendor to debian for correct new changelog version.

 -- Dimitri John Ledkov <dimitri.ledkov@canonical.com>  Fri, 14 Jul 2023 13:42:00 +0100

livecd-rootfs (23.10.1) mantic; urgency=medium

  [ Yao Wei (魏銘廷) ]
  * Add ubuntu-oem build project:
    - auto/config: Make ubuntu-oem project available, and runs make-hooks like
      ubuntu-cpc.
    - live-build/ubuntu-oem: Create the directory for ubuntu-oem project, and
      link make-hooks from ubuntu-cpc into it.

  [ Dimitri John Ledkov ]
  * Switch armhf from generic-lpae to virtual
  * Deprecate linux-kvm usage

 -- Dimitri John Ledkov <dimitri.ledkov@canonical.com>  Fri, 14 Jul 2023 00:25:33 +0100

livecd-rootfs (2.899) mantic; urgency=medium

  * ubuntu-cpc: Revert mount ESP on /boot and bind mount /boot on /boot/efi

 -- Gauthier Jolly <contact@gauthierjolly.com>  Mon, 10 Jul 2023 12:01:18 +0200

livecd-rootfs (2.898) mantic; urgency=medium

  * Remove the catalog entry for the Ubuntu desktop minimal installation,
    we are removing the option from the desktop installer and making the
    content of the default installation closer from minimal instead.

 -- Sebastien Bacher <seb128@ubuntu.com>  Fri, 07 Jul 2023 07:39:38 +0200

livecd-rootfs (2.897) mantic; urgency=medium

  [ Heinrich Schuchardt ]
  * RISC-V: handle kernel flavour allwinner. Package linux-allwinner has a
    kernel with the generic flavour as dependency.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 05 Jul 2023 17:57:11 +0200

livecd-rootfs (2.896) mantic; urgency=medium

  * live-build/ubuntu/hooks/033-disk-image-uefi.binary: update to point at
    ubuntu-cpc/hooks.d/base/disk-image-uefi-non-cloud.binary, fixing canary
    build.
  * Disable the orphan_file ext4 feature in the canary live environment so
    that the installed system can be handled by the e2fsck in the extant
    kernel snap (cf. bug 2025339).

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 05 Jul 2023 13:23:45 +1200

livecd-rootfs (2.895) mantic; urgency=medium

  * live-build/ubuntu-cpc/hooks.d/base/disk-image-uefi.binary: should now
    only be used for cloud images, so clean up other code.  Thanks,
    Gauthier Jolly.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 03 Jul 2023 12:35:35 -0700

livecd-rootfs (2.894) mantic; urgency=medium

  [ Heinrich Schuchardt ]
  * RISC-V: sunset allwinner kernel flavour. The Nezha D1 and LicheRV Dock now
    use the generic kernel.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 03 Jul 2023 16:32:25 +0200

livecd-rootfs (2.893) mantic; urgency=medium

  * Add various overrides to make it to develop image definitions:
    - LB_UBUNTU_IMAGES_REPO and LB_UBUNTU_IMAGES_BRANCH can be used
      to override the default repository and branch used for official
      images.
    - LB_UBUNTU_IMAGE_CHANNEL can be used to install the ubuntu-image
      snap from another channel than stable (e.g. edge, or a track, or a
      hotfix branch).
  * config/build: don't make a copy of the image definition, but rather
    pass the path to the .yaml file; no functional impact, but could be
    used to implement support for locating overrides once ubuntu-image
    knows how to use relative pathnames.
  * Extend Tegra support to support pre-installed Server images using the
    usual cpc project and ubuntu-image.
  * Add support for tegra-igx subarch, much like tegra but with a different
    kernel flavor.

 -- Loïc Minier <loic.minier@ubuntu.com>  Wed, 28 Jun 2023 10:09:04 +0000

livecd-rootfs (2.892) mantic; urgency=medium

  [ Gauthier Jolly ]
  * ubuntu-cpc: fix images for hardware devices
  * ubuntu-cpc: install grub-efi on riscv images

  [ Heinrich Schuchardt ]
  * RISC-V: use GRUB on Unmatched board. Simplify the code.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 28 Jun 2023 10:42:31 +0200

livecd-rootfs (2.891) mantic; urgency=medium

  * Follow up fix to the CHANNEL handling for subiquity images: make sure that
    we include config/binary, as that's where CHANNEL is passed over.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 19 Jun 2023 10:03:52 +0200

livecd-rootfs (2.890) mantic; urgency=medium

  * Allow choosing installer channels with the CHANNEL variable for
    subiquity-based installer ISOs.

 -- Dan Bungert <daniel.bungert@canonical.com>  Fri, 16 Jun 2023 09:12:08 -0600

livecd-rootfs (2.849) mantic; urgency=medium

  [ Gauthier Jolly ]
  * ubuntu-cpc: mount ESP on /boot and bind mount /boot on /boot/efi

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 15 Jun 2023 12:18:47 -0700

livecd-rootfs (2.848) mantic; urgency=medium

  * Migrate default Ubuntu Budgie image builds to their new
    ubuntu-budgie-installer, mirroring what has been done for Ubuntu. At the
    same time, we add support for building legacy ubiquity-based images as
    well.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 07 Jun 2023 13:33:26 +0200

livecd-rootfs (2.847) mantic; urgency=medium

  * canary images: add boot-managed-by-snapd preinstalled by default on the
    enhanced-secureboot layer. This will make sure that all canary installs
    will not allow installing non-snap kernels and bootloader packages (as
    this could break their systems).

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 05 Jun 2023 16:57:58 +0200

livecd-rootfs (2.846) mantic; urgency=medium

  * Make the newly added mtools dependency arch-specific as it's not
    installable on i386, causing migration issues.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 01 Jun 2023 11:40:52 +0200

livecd-rootfs (2.845) mantic; urgency=medium

  * Add the mtools dependency for ubuntu-image.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 31 May 2023 17:08:44 +0200

livecd-rootfs (2.844) mantic; urgency=medium

  * Switch to use ubuntu-image 3.0 for our raspberry pi mantic images.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 31 May 2023 15:15:09 +0200

livecd-rootfs (2.843) mantic; urgency=medium

  * Unconditionally enable i386 in the chroot for Ubuntu Desktop; the new
    installer doesn't handle enabling this at install time, and late
    enablement also misses us some recommends.
  * Restore losetup code, the necessary launchpad-buildd changes were being
    deployed just as this revert landed.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 26 May 2023 13:51:18 -0700

livecd-rootfs (2.842) mantic; urgency=medium

  * Revert once again the kpartx->losetup changes as those are causing
    constant build failures for RISC-V images. This clearly needs some more
    investigation before proceeding. This means that we're back to using
    kpartx for loop device setup.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 24 May 2023 11:07:21 +0200

livecd-rootfs (2.841) mantic; urgency=medium

  * The base seed for edubuntu is desktop-gnome, not desktop.  LP: #2019060.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 17 May 2023 23:50:57 -0700

livecd-rootfs (2.840) mantic; urgency=medium

  * auto/config: switch ubuntucinnamon and ubuntu-unity builds to use add_task
    to get their desktop packages. Previously most (all?) flavour builds got
    the snaps from that flavour's "desktop" seed implicitly added, but now an
    explicit add_task is needed.
  * auto/config: alter check for unexpectedly seeded snaps in
    ubuntu-cpc:minimized build. As the build no longer implicitly seeds the
    snaps from the server seed, we can just assert no snaps are seeded. This
    fixes an autopkgtest regression but also cleaner.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 18 May 2023 11:33:59 +1200

livecd-rootfs (2.839) mantic; urgency=medium

  * Drop use of --removable flag to grub-install from
    live-build/buildd/hooks/02-disk-image-uefi.binary, to match the cloud
    images (7c760864fdcb278ca37396f06f5e3f297428d63d).  This fixes
    bootloader updates in the buildd images, but also fixes compatibility
    with using devtmpfs for losetup.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 17 May 2023 09:27:56 -0700

livecd-rootfs (2.838) mantic; urgency=medium

  * auto/config: Set FLAVOUR appropriately for flavours added since the
    expand-task branch was created.
  * live-build/expand-task: Fix expansion of tasks with non-flavour specific
    name (e.g. "minimal") when building a non-Ubuntu flavour.
  * auto/config: Do not include the ubuntu-desktop-minimal task in edubuntu.
    Cross flavour task references do not work with the approach expand-task
    takes, and the ubuntu-desktop-minimal package is part of the
    edubuntu-desktop-gnome task already.
  * live-build/expand-task: handle seeding of classic snaps correctly.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 17 May 2023 15:53:50 +1200

livecd-rootfs (2.837) mantic; urgency=medium

  * auto/config: Rewrite add_task to use a Python script that cribs the logic
    from lp:ubuntu-archive-publishing's generate_extra_overrides.py. This
    means we can avoid some dubious hacks around seeding snaps and no longer
    depend on the Task headers in the archive. (LP: #2019265)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Mon, 15 May 2023 09:36:29 +1200

livecd-rootfs (2.836) mantic; urgency=medium

  * canary: include cryptsetup in the live layer

 -- Dan Bungert <daniel.bungert@canonical.com>  Thu, 11 May 2023 19:16:18 -0600

livecd-rootfs (2.835) mantic; urgency=medium

  * canary: fix the lookup location for 'enhanced-secureboot-desktop'

 -- Dan Bungert <daniel.bungert@canonical.com>  Wed, 10 May 2023 16:01:02 -0600

livecd-rootfs (2.834) mantic; urgency=medium

  * Use the correct seed base for edubuntu.  LP: #2019060.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 09 May 2023 19:06:50 -0700

livecd-rootfs (2.833) mantic; urgency=medium

  [ Łukasz 'sil2100' Zemczak ]
  * Add ubuntucinnamon, ubuntu-unity and edubuntu to the workaround for the
    invalid apt cache issue we encountered during all of our previous
    releases.
  * Switch to use the desktop model for the installer for the canary images.

  [ Steve Langasek ]
  * Try to use udevadm settle after losetup to resolve race in riscv64 image
    builds.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 08 May 2023 15:47:08 -0700

livecd-rootfs (2.832) lunar; urgency=medium

  * Clean up some remaining references to /dev/mapper.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 17 Apr 2023 18:50:18 -0700

livecd-rootfs (2.831) lunar; urgency=medium

  * Use the correct path for the loop device.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 17 Apr 2023 16:11:52 -0700

livecd-rootfs (2.830) lunar; urgency=medium

  * Call losetup -d properly.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 17 Apr 2023 12:22:19 -0700

livecd-rootfs (2.829) lunar; urgency=medium

  [ Loïc Minier ]
  * Initial support for NVIDIA Tegra.  LP: #2015644.

  [ Steve Langasek ]
  * Use losetup instead of kpartx to try to resolve race conditions in
    riscv64 image builds.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 17 Apr 2023 08:22:21 -0700

livecd-rootfs (2.828) lunar; urgency=medium

  * 099-ubuntu-image-customization.chroot: Remove redundant creation of oem
    user and oem-config-prepare (LP: #2016285)

 -- Dave Jones <dave.jones@canonical.com>  Fri, 14 Apr 2023 09:48:31 +0100

livecd-rootfs (2.827) lunar; urgency=medium

  * Fix netboot tarball generation code to properly handle the recent change
    of shim to use alternatives (and the path becoming a symlink).

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 13 Apr 2023 19:28:46 +0200

livecd-rootfs (2.826) lunar; urgency=medium

  * Now that we moved the seeding for canary into further layers, a resed of
    the preseeding is not required.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 13 Apr 2023 14:46:43 +0200

livecd-rootfs (2.825) lunar; urgency=medium

  * For canary images, actually consider moving the seed listed snaps from
    both minimal and standard layers to the classic layer.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 13 Apr 2023 11:46:37 +0200

livecd-rootfs (2.824) lunar; urgency=medium

  * Fix build failures of desktop raspi images due to canary hooks
    interfering.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 13 Apr 2023 09:43:58 +0200

livecd-rootfs (2.823) lunar; urgency=medium

  * Update infinite_scream URL to mastodon
  * Make PROPOSED=1 builds work with NotAutomatic (lunar and later).
    LP: #2016022.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 12 Apr 2023 10:40:56 -0700

livecd-rootfs (2.822) lunar; urgency=medium

  [ jchittum ]
  * riscv64: fix conditional check in install-grub to correctly check if
    platform supports grub-efi-64, or exit func. (LP: #2015750)

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 10 Apr 2023 08:37:30 -0700

livecd-rootfs (2.821) lunar; urgency=medium

  [ Chad Smith ]
  * desktop livecd: allow cloud-init to write netplan config instead of
    directly to /etc/NetworkManager because ubuntu-desktop-installer
    will write netplan config in ephemeral boot stage when
    autoinstall.network is provided. This allows ubuntu-desktop-installer
    to control all netplan config written and apply to the ephemeral boot
    as generated from /etc/netplan/*. (LP: #2015605)

  [ Dan Bungert ]
  * d/control: fix uninstallability of livecd-rootfs due to rsync not being on
    i386.

 -- Dan Bungert <daniel.bungert@canonical.com>  Fri, 07 Apr 2023 17:24:28 -0600

livecd-rootfs (2.820) lunar; urgency=medium

  * Initial implementation of canary image builds for 23.04.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 05 Apr 2023 20:50:35 +0200

livecd-rootfs (2.819) lunar; urgency=medium

  [ Heinrich Schuchardt ]
  * Add image for StarFive VisionFive 2.

  [ Steve Langasek ]
  * Update URL to point to ubuntu-archive-team.ubuntu.com.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 05 Apr 2023 18:01:07 +0200

livecd-rootfs (2.818) lunar; urgency=medium

  [ Dave Jones ]
  * raspi: drop mkswap.service and swapfile.swap units in
    099-ubuntu-image-customization.chroot in favour of units provided by
    ubuntu-raspi-settings-desktop
  * raspi: drop 01-network-manager-all.yaml in favour of configuration
    provided by ubuntu-raspi-settings-desktop
  * raspi: drop growfs option from fstab in favour of growroot-almost
    service provided by ubuntu-raspi-settings-desktop

  [ William 'jawn-smith' Wilson ]
  * Skip oem-config setup in hooks if the oem user already exists.

 -- Dave Jones <dave.jones@canonical.com>  Tue, 28 Mar 2023 14:38:55 +0100

livecd-rootfs (2.817) lunar; urgency=medium

  [ John Chittum ]
  * revert ipc change. kernel 6.2 will have the correct setting

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 27 Mar 2023 12:11:06 -0700

livecd-rootfs (2.816) lunar; urgency=medium

  [ Chad Smith ]
  * Replace cloud-init.service on NetworkManager images to address an ordering
    cycle interfering with autoinstall with ubuntu-desktop-installer.
    (LP: #2008952)

 -- Dan Bungert <daniel.bungert@canonical.com>  Fri, 24 Mar 2023 18:35:46 -0600

livecd-rootfs (2.815) lunar; urgency=medium

  [ Dan Bungert ]
  * debian/control: depend on zstd to fix unmkinitramfs failure.

  [ Łukasz 'sil2100' Zemczak ]
  * Change the mini-iso livefs artifact name from .mini-iso.iso to .iso to be
    more compatible with existing cdimage machinery.
  * Rename variables accessed in the mini-iso to the equivalents exported to
    binary hooks.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 23 Mar 2023 10:43:29 +0100

livecd-rootfs (2.814) lunar; urgency=medium

  * Adjust journald settings for live-server for compatibility with Subiquity.
    With a move to core22 we can turn zstd back on, but the new compact flag
    needs to be off. (LP: #2006985)

 -- Dan Bungert <daniel.bungert@canonical.com>  Mon, 20 Mar 2023 15:00:52 -0600

livecd-rootfs (2.813) lunar; urgency=medium

  [ Łukasz 'sil2100' Zemczak ]
  * Make sure that for devel we also use the right intel-iot kernel flavor
    for the images. We don't build any for this series, but it's good to have
    parity in the devel branch.
  * Add support for building intel-iot server images. Not used in lunar, but
    adding to keep devel up-to-date with changes.

  [ Steve Langasek ]
  * No new dependencies on i386 (xorriso).

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sat, 18 Mar 2023 08:25:03 -0700

livecd-rootfs (2.812) lunar; urgency=medium

  * Inform cloud-init when network manager is in use.  (LP: #1982855)

 -- Dan Bungert <daniel.bungert@canonical.com>  Thu, 09 Mar 2023 14:59:17 -0600

livecd-rootfs (2.811) lunar; urgency=medium

  [ John Chittum ]
  * fix: remove ipc from apparmor features in 6.1
  * open 2.810 release

 -- Dimitri John Ledkov <dimitri.ledkov@canonical.com>  Thu, 09 Mar 2023 18:10:05 +0000

livecd-rootfs (2.810) lunar; urgency=medium

  * Add ubuntu-mini-iso build project.

 -- Dan Bungert <daniel.bungert@canonical.com>  Mon, 06 Mar 2023 08:17:11 -0700

livecd-rootfs (2.809) lunar; urgency=medium

  * Do not use the ubuntucinnamon-desktop task for cinnamon builds, it doesn't
    seem to be present in the archive yet. Use the metapackage instead, which
    seems like a better way forward anyway. For the live task, temporarily use
    a hard-coded list of packages.
  * Explicitly define the kernel flavor for ubuntucinnamon.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 06 Mar 2023 11:27:02 +0100

livecd-rootfs (2.808) lunar; urgency=medium

  * Add ubuntucinnamon to the seed-determination switch-case.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 03 Mar 2023 15:07:06 +0100

livecd-rootfs (2.807) lunar; urgency=medium

  * auto/config: Add support for ubuntu core arm64 generic images (LP: #2009067)

 -- Dimitri John Ledkov <dimitri.ledkov@canonical.com>  Thu, 02 Mar 2023 18:18:18 +0000

livecd-rootfs (2.806) lunar; urgency=medium

  [ Sean Davis ]
  * Remove snap base seed for xubuntu:minimal

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 28 Feb 2023 08:00:08 -0800

livecd-rootfs (2.805) lunar; urgency=medium

  * riscv64: set attribute required partition for firmware.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Mon, 27 Feb 2023 21:49:27 +1300

livecd-rootfs (2.804) lunar; urgency=medium

  * Clarified with Erich that edubuntu should install ubuntu-desktop-minimal
    task.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 24 Feb 2023 21:11:56 -0800

livecd-rootfs (2.803) lunar; urgency=medium

  * Fix wrong task name for xubuntu-minimal.
  * Fix edubuntu build: ubuntu-minimal is not a task and minimal is already
    declared.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 24 Feb 2023 21:05:48 -0800

livecd-rootfs (2.802) lunar; urgency=medium

  * Address the fact that debootstrap doesn't follow Recommends and as a
    result we're missing several Recommends that should be installed by
    default and are on upgrades but not on new installs.  This is not
    applied to minimized images, which don't follow Recommends; but does get
    separately applied to the ubuntu-server full squashfs.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 24 Feb 2023 17:47:54 -0800

livecd-rootfs (2.801) lunar; urgency=medium

  [ Heinrich Schuchardt ]
  * RISC-V: avoid soft lockup Radeon GPUs. With Radeon GPUs and kernel 5.19 a
    soft lockup was observed. Increase the watchdog threshold.

  [ Łukasz 'sil2100' Zemczak ]
  * Add ubuntucinnamon to the supported flavours.
  * Terrible hack workaround for clearing out the non-offline apt cache
    for desktop related images.

  [ Dimitri John Ledkov ]
  * ubuntu-cpc: set default ext4 mount option commit=30 (LP: #2006511).
  * Cherry-pick jammy point release fixes.

 -- Dimitri John Ledkov <dimitri.ledkov@canonical.com>  Fri, 24 Feb 2023 12:20:04 +0000

livecd-rootfs (2.800) lunar; urgency=medium

  * WSL: do not depend on standard anymore.
    Evolve the seed to only ship the specific part useful to WSL users. This
    allows to trim down the image size.

 -- Didier Roche <didrocks@ubuntu.com>  Mon, 20 Feb 2023 11:59:25 +0100

livecd-rootfs (2.799) lunar; urgency=medium

  * Reintroduce edubuntu.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 14 Feb 2023 15:55:41 -0800

livecd-rootfs (2.798) lunar; urgency=medium

  * Add xubuntu minimal subproject.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 13 Feb 2023 21:07:27 -0800

livecd-rootfs (2.797) lunar; urgency=medium

  * Drop dependency on rsync, not used in a very long time and lets us drop
    rsync on i386.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 01 Feb 2023 07:44:33 -0800

livecd-rootfs (2.796) lunar; urgency=medium

  [ Heinrich Schuchardt ]
  * riscv64: adjust U-Boot installation for Nezha D1 and LicheeRV. Since
    version 2022.10 U-Boot SPL and U-Boot are installed onto the same
    partition. Package nezha-boot0 is not needed anymore.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 09 Jan 2023 14:10:22 +0100

livecd-rootfs (2.795) lunar; urgency=medium

  * Don't depend on python3-launchpadlib on i386.  This breaks ppa-enabled
    builds on i386, but avoids pulling in a large dependency tree that's
    not otherwise needed on i386.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 05 Jan 2023 22:07:17 -0800

livecd-rootfs (2.794) lunar; urgency=medium

  [ Sebastien Bacher ]
  * Change the desktop build to let canary be the default.
    Make canary images the default Ubuntu desktop images, while switching
    the old desktop to a 'legacy' flavor instead.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 08 Dec 2022 15:33:05 +0100

livecd-rootfs (2.793) lunar; urgency=medium

  [ Heinrich Schuchardt ]
  * riscv64: use efi=debug earlycon. RISC-V boards tend to boot slowly. We
    should provide progress information when booting.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 16 Nov 2022 13:25:46 +0100

livecd-rootfs (2.792) lunar; urgency=medium

  [ Samir Akarioh ]
  * feat: Add metadata on ubuntu-oci image.
  * feat: Add Ubuntu user.

  [ Utkarsh Gupta ]
  * Remove whitespaces.

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Mon, 14 Nov 2022 15:26:30 +0530

livecd-rootfs (2.791) kinetic; urgency=medium

  [ Brian Murray ]
  * Finish the rename of FK_FORCE_CONTAINER into FK_FORCE. (LP: #1989194)

  [ Simon Poirier ]
  * update apparmor feature overlay match the target kernel (LP: #1993204)

 -- Brian Murray <brian@ubuntu.com>  Mon, 17 Oct 2022 13:08:52 -0700

livecd-rootfs (2.790) kinetic; urgency=medium

  * riscv: reduce the size of the intird for Nezha and LicheeRV
  * fix invalid redirects

 -- Heinrich Schuchardt <heinrich.schuchardt@canonical.com>  Thu, 13 Oct 2022 15:38:01 +0200

livecd-rootfs (2.789) kinetic; urgency=medium

  * re-enable snap preseed (LP: #1991011)

 -- jchittum <john.chittum@canononical.com>  Thu, 13 Oct 2022 12:41:23 -0500

livecd-rootfs (2.788) kinetic; urgency=medium

  * riscv: Remove the default installation of the Wifi driver for the LicheeRV
    board as the package is in universe, and only install its dependencies
    instead.

 -- Alexandre Ghiti <alexandre.ghiti@canonical.com>  Wed, 12 Oct 2022 14:15:58 +0200

livecd-rootfs (2.787) kinetic; urgency=medium

  [ Samir Akarioh ]
  * fix: build OCI image failed to build.

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Thu, 29 Sep 2022 13:55:17 +0530

livecd-rootfs (2.786) kinetic; urgency=medium

  * linux-firmware-raspi2 is now the package known as linux-firmware-raspi.

 -- Brian Murray <brian@ubuntu.com>  Tue, 27 Sep 2022 13:51:05 -0700

livecd-rootfs (2.785) kinetic; urgency=medium

  * Disable the snap-preseed calls in the interest of getting images built for
    the 22.10 beta. (LP: #1990884)

 -- Brian Murray <brian@ubuntu.com>  Mon, 26 Sep 2022 15:55:26 -0700

livecd-rootfs (2.784) kinetic; urgency=medium

  * Don't set a desktop base seed for ubuntu-base or ubuntu-core.
  * autopkgtest now references ubuntu-server:live, the only ubuntu-server we
    still build.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sun, 25 Sep 2022 01:52:55 -0700

livecd-rootfs (2.783) kinetic; urgency=medium

  [ Alexandre Ghiti ]
  * Support for the LicheeRV Dock and Microchip icicle.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 23 Sep 2022 12:02:03 +0200

livecd-rootfs (2.782) kinetic; urgency=medium

  * Default to using 'desktop' for the base seed so we don't have another
    place we have to extend the list for each new flavor (ubuntu-unity)

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 22 Sep 2022 15:36:51 -0700

livecd-rootfs (2.781) kinetic; urgency=medium

  * Drop override of components for raspi images.  The reference to
    multiverse is historic, all firmware is now in restricted where it
    should be; and raspi images should not categorically include universe,
    they should follow the per-flavor rules.
  * Drop use of deprecated apt-key.
  * Drop edubuntu and kubuntu-active, both obsolete in *all* supported
    releases.
  * Fix passing of components to germinate commandline (how did this ever
    work?)

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 21 Sep 2022 16:47:49 -0700

livecd-rootfs (2.780) kinetic; urgency=medium

  * live-build/auto/config: set COMPONENTS for all flavors *before* we
    invoke germinate.  Fixes a regression introduced in commit 07873ec.
    In the process, stop declarations of COMPONENTS that shadow the default
    in germinate (main restricted).

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 21 Sep 2022 12:56:26 -0700

livecd-rootfs (2.779) kinetic; urgency=medium

  * ubuntu-cpc/hooks.d/base/disk-image-uefi.binary: Bump UEFI disk image
    size for amd64 to 3.5 GB.
    Current builds are failing because the disk size is not big enough.

 -- Ivan Kapelyukhin <ivan.kapelyukhin@canonical.com>  Wed, 14 Sep 2022 18:55:20 +0200

livecd-rootfs (2.778) kinetic; urgency=medium

  [ Rudra Saraswat ]
  * Add live packages to Ubuntu Unity config.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 14 Sep 2022 16:11:10 +0200

livecd-rootfs (2.777) kinetic; urgency=medium

  * Rename FK_FORCE_CONTAINER into FK_FORCE as its role was extended to also
    support chroot (LP: #1989194).

 -- Alexandre Ghiti <alexandre.ghiti@canonical.com>  Thu, 08 Sep 2022 16:25:36 +0200

livecd-rootfs (2.776) kinetic; urgency=medium

  * Do not modify /etc/ssh/sshd_config for ubuntu-cpc project
    builds. (LP: #1968873). The cloud-init bug (LP #1968873) got
    fixed so using a config snippet now.

 -- Thomas Bechtold <thomas.bechtold@canonical.com>  Tue, 23 Aug 2022 10:45:06 +0200

livecd-rootfs (2.775) kinetic; urgency=medium

  [ Rudra Saraswat ]
  * Add ubuntu-unity flavor support.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 31 Aug 2022 13:34:53 -0700

livecd-rootfs (2.774) kinetic; urgency=medium

  * Remove modemmanager and udisks2 from cloud images in addition to fwupd.
    The use of tasks at install means all packages are marked manually
    installed in the apt database, so removing fwupd does not remove its
    dependencies.  LP: #1981109.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 04 Aug 2022 11:24:55 -0700

livecd-rootfs (2.773) kinetic; urgency=medium

  * When adding the new RISC-V platforms, some of the generic non-SUBARCH code
    went missing and some invalid assumptions have been made, causing cloud
    images to fail building. This upload fixes these.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 29 Jul 2022 18:05:09 +0200

livecd-rootfs (2.772) kinetic; urgency=medium

  * When converting images to qcow2 stop using the traditional image format
    and switch to using the default image format which will include zero
    clusters and allow efficient copy-on-read for sparse images.

 -- Brian Murray <brian@ubuntu.com>  Thu, 28 Jul 2022 14:04:45 -0700

livecd-rootfs (2.771) kinetic; urgency=medium

  [ Steve Langasek ]
  * Drop support for building i386 images aside from the launchpad builder
    images.
  * Remove fwupd from the cloud images.  LP: #1981109.

  [ Michael Hudson-Doyle ]
  * Fix some issues with the netboot tarballs:
    - Include the signed shim (oops).
    - Make the kernel path on disk and in the bootloader config match (more
      oops).
    - Make paths more architecture dependent as the code in grubnetXXX.efi to
      probe a platform dependent path first doesn't work.

  [ Alexandre Ghiti ]
  * Install wpasupplicant by default as for now, most of the RISC-V boards
    embed a Wifi chipset (LP: #1983008)

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 25 Jul 2022 12:49:28 -0700

livecd-rootfs (2.770) kinetic; urgency=medium

  [ Alexandre Ghiti ]
  * Fix SiFive Unmatched build. While merging the VisionFive support, we
    removed the installation of u-boot-menu for the Unmatched by mistake
    (LP: #1982735).

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 25 Jul 2022 10:18:50 +0200

livecd-rootfs (2.769) kinetic; urgency=medium

  [ Alexandre Ghiti ]
  * Add support for the VisionFive and the Nezha boards (LP: #1980935)
  * Set FK_FORCE_CONTAINER for RISC-V images build to force flash-kernel
    to run in a container (LP: #1980929).

  [ Thomas Bechtold ]
  * Revert "don't modify ssh_config for ubuntu-cpc projects (LP:1968873)"
    This change triggered a bug in cloud-init (see LP: #1968873).

 -- Thomas Bechtold <thomas.bechtold@canonical.com>  Mon, 11 Jul 2022 14:10:52 +0200

livecd-rootfs (2.768) kinetic; urgency=medium

  * Use the new iso-url= parameter in the bootloader configs in the netboot
    tarballs.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 30 Jun 2022 14:37:53 +1200

livecd-rootfs (2.767) kinetic; urgency=medium

  * Do not modify /etc/ssh/sshd_config for ubuntu-cpc project
    builds. (LP: #1968873)

 -- Thomas Bechtold <thomas.bechtold@canonical.com>  Tue, 28 Jun 2022 13:29:05 +0200

livecd-rootfs (2.766) kinetic; urgency=medium

  * live-build/ubuntu-cpc/hooks.d/base/ovf/ubuntu-ova-v1-vmdk.tmpl:
    Revert OVF cd-rom controller to be IDE for VMWare (LP: #1970795)

 -- Simon Poirier <simon.poirier@canonical.com>  Sat, 11 Jun 2022 13:11:30 -0400

livecd-rootfs (2.765) kinetic; urgency=medium

  [ Michael Hudson-Doyle ]
  * auto/config: preserve germinate-output directory when removing config to
    speed up local iteration.
  * auto/config: Emit error message to stderr in _sanitize_passes.
  * Produce a tarball of artifacts for netbooting during live-server build.

  [ John Chittum ]
  * vagrant: use ed25519 insecure key (LP: #1969664)

 -- John Chittum <john.chittum@canonical.com>  Thu, 26 May 2022 09:28:26 -0500

livecd-rootfs (2.764) jammy; urgency=medium

  [ Michał Sawicz ]
  * Add arm64 buildd bootable image. (LP: #1966636)

 -- Utkarsh Gupta <utkarsh@ubuntu.com>  Mon, 11 Apr 2022 23:02:30 +0530

livecd-rootfs (2.763) jammy; urgency=medium

  * auto/config: upgrade from hwe-20.04 to hwe-22.04 variant.

 -- Dimitri John Ledkov <dimitri.ledkov@canonical.com>  Wed, 06 Apr 2022 15:09:47 +0100

livecd-rootfs (2.762) jammy; urgency=medium

  [ Dimitri John Ledkov ]
  * auto/config: drop support for 0c3.net domain, now obsolete.


  [ Jean-Baptiste Lallement ]
  * wsl: Create missing groups in chroot

 -- Jean-Baptiste Lallement <jean-baptiste.lallement@ubuntu.com>  Thu, 31 Mar 2022 08:56:33 +0200

livecd-rootfs (2.761) jammy; urgency=medium

  [ Jean-Baptiste Lallement ]
  [ Didier Roche ]
  * Remove attributes not supported by WSL's tar

 -- Jean-Baptiste Lallement <jean-baptiste.lallement@ubuntu.com>  Thu, 24 Mar 2022 13:59:50 +0100

livecd-rootfs (2.760) jammy; urgency=medium

  [ Jean-Baptiste Lallement ]
  [ Didier Roche ]
  * Create a separate WSL image than CPC so it can be managed independently.

 -- Jean-Baptiste Lallement <jean-baptiste.lallement@ubuntu.com>  Mon, 14 Mar 2022 11:30:41 +0100

livecd-rootfs (2.759) jammy; urgency=medium

  * Optionally (when ALLOW_CORE_SNAP env var is set) allow to install core
    snap. Still needed by some CPC projects. (LP: #1964303)

 -- Thomas Bechtold <thomas.bechtold@canonical.com>  Fri, 04 Mar 2022 14:00:16 +0100

livecd-rootfs (2.758) jammy; urgency=medium

  * Split UEFI image out of `disk-image` series file into
    `disk-image-uefi`. (LP: #1961760)

 -- Ivan Kapelyukhin <ivan.kapelyukhin@canonical.com>  Thu, 03 Mar 2022 15:44:52 +0100

livecd-rootfs (2.757) jammy; urgency=medium

  [ Dave Jones ]
  * Fix holes in swapfiles on pre-installed desktop images. Instead of
    pre-allocating the swapfile in the image, allocate it on first boot and
    use a systemd .swap unit to activate it (LP: #1961047)

  [ Łukasz 'sil2100' Zemczak ]
  * Use the 'classic' branch of the pi gadget for both classic and desktop
    pi images by specifying the gadget make target during the gadget priming
    phase.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 22 Feb 2022 11:33:28 +0100

livecd-rootfs (2.756) jammy; urgency=medium

  * Unset `initrdless_boot_fallback_triggered` in /boot/grub/grubenv instead
    of setting it to 0 when the fallback is not triggered to prevent integrity
    monitoring errors on GCE. (LP: #1960564)

 -- Ivan Kapelyukhin <ivan.kapelyukhin@canonical.com>  Thu, 10 Feb 2022 23:45:57 +0100

livecd-rootfs (2.755) jammy; urgency=medium

  [ Brian Murray ]
  * Add the casper package instead of the lupin-casper package as the
    installer for Windows is a project that is no longer supported and lupin
    is being removed the archive in LP: 1960457.

  [ John Chittum ]
  *  Add sleep due to e2fsck error in umount_partition. LP: #1960537

 -- Brian Murray <brian@ubuntu.com>  Thu, 10 Feb 2022 13:54:42 -0800

livecd-rootfs (2.754) jammy; urgency=medium

  * Disable APT periodic update for OCI/docker images when cron-like
    services are installed. (LP: #1810451)

 -- Thomas Bechtold <thomas.bechtold@canonical.com>  Fri, 04 Feb 2022 11:41:12 +0100

livecd-rootfs (2.753) jammy; urgency=medium

  * Disable compression and "hash table hardening" for journald in the
    live installer environment as these features make the journal unreadable
    using the systemd libraries from 20.04 that are included in the subiquity
    snap. (LP: #1953744)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 02 Feb 2022 22:43:20 +1300

livecd-rootfs (2.752) jammy; urgency=medium

  * Remove references to archive.canonical.com, which is no longer used and
    should not be included in the default sources.list.  LP: #1959343.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 27 Jan 2022 14:26:52 -0800

livecd-rootfs (2.751) jammy; urgency=medium

  * Revert patch for unmounting in local builds as it is causing autopkgtest
    regressions

 -- William 'jawn-smith' Wilson <jawn-smith@ubuntu.com>  Wed, 12 Jan 2022 13:43:24 -0600

livecd-rootfs (2.750) jammy; urgency=medium

  * Do not look for a base snap on snaps of type base, because recursive
    dependencies are not allowed for snaps.  LP: #1957123.
  * Treat it as a fatal error if we are asked to install a snap that would
    pull in the core snap.  Ubuntu 20.04 and Ubuntu 22.04 official images
    should never require snaps that depend on an Ubuntu 16.04 runtime, this
    indicates a misconfiguration that will bloat the install.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 11 Jan 2022 17:34:37 -0800

livecd-rootfs (2.749) jammy; urgency=medium

  [ Heinrich Schuchardt ]
  * riscv64: ensure reasonable partition alignment (LP: #1952916).
  * functions: fix unmounting for local builds (LP: #1952921).

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 16 Dec 2021 12:40:16 +0100

livecd-rootfs (2.748) jammy; urgency=medium

  * live-build/ubuntu-cpc/hooks.d/base/ovf/ubuntu-ova-v1-vmdk.tmpl: do not
    automatically allocate serial0 as it causes a hang when upgrading.
    (LP: #1895104)

 -- Brian Murray <brian@ubuntu.com>  Wed, 15 Dec 2021 10:09:44 -0800

livecd-rootfs (2.747) jammy; urgency=medium

  * ubuntu-cpc/hooks.d/base/disk-image-uefi.binary: Bump UEFI disk image
    size for armhf to 3.5 GB.
    Current builds are failing because the disk size is not big enough.

 -- Thomas Bechtold <thomas.bechtold@canonical.com>  Tue, 23 Nov 2021 10:15:18 +0100

livecd-rootfs (2.746) jammy; urgency=medium

  * Add the capability to build an ISO image for the Intel IoT project.
    Additionally, stop using universe with the project given that the kernel
    is now in main.

 -- Brian Murray <brian@ubuntu.com>  Tue, 16 Nov 2021 17:00:57 -0800

livecd-rootfs (2.745) jammy; urgency=medium

  [ Erich Eickmeyer ]
  * Remove fonts and publishing tasks from ubuntustudio DVD

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 08 Nov 2021 13:43:53 -0800

livecd-rootfs (2.744) jammy; urgency=medium

  * Install desired already seeded snap in wsl.
    As wsl is an image target of ubuntu-cpc, the base seed is hardcoded to
    ubuntu-server instead of wsl one. For now, add it, as for the other
    cpc images, in hooks.

 -- Didier Roche <didrocks@ubuntu.com>  Fri, 05 Nov 2021 10:23:24 +0100

livecd-rootfs (2.743) jammy; urgency=medium

  * magic-proxy: fix exception handling for URLError. LP: #1946520

 -- Thomas Bechtold <thomas.bechtold@canonical.com>  Mon, 25 Oct 2021 12:22:16 +0200

livecd-rootfs (2.742) impish; urgency=medium

  [ Brian Murray ]
  * Properly check ARCH when setting the intel-iot model.

  [ Sebastien Bacher ]
  * Enable universe sources on the desktop canary image.  LP: #1945831

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 05 Oct 2021 13:11:33 -0700

livecd-rootfs (2.741) impish; urgency=medium

  [ John Chittum ]
  * mount cgroup2 type for snapd LP:#1944004

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 29 Sep 2021 11:25:24 -0700

livecd-rootfs (2.740) impish; urgency=medium

  [ Thomas Bechtold ]
  * magic-proxy: fix TypeError when trying to call get_uri() LP:#1944906

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 27 Sep 2021 08:38:00 -0700

livecd-rootfs (2.739) impish; urgency=medium

  [ Daniel Bungert ]
  * Correct the 'type' in the source catalog entries for the desktop ISOs.

  [ Michael Hudson-Doyle ]
  * Record information about locale support (in particular, whether to install
    langpacks and which languages have pre-baked squashfses).

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Mon, 27 Sep 2021 11:10:46 +1300

livecd-rootfs (2.738) impish; urgency=medium

  [ Thomas Bechtold ]
  * Keep changelogs for native deb pkgs in minimized builds.  LP: #1943114.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 20 Sep 2021 09:40:28 -0700

livecd-rootfs (2.737) impish; urgency=medium

  * Generate source catalogs for the desktop canary build.
  * Check for duplicate ids in update-source-catalog.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Tue, 14 Sep 2021 21:39:23 +1200

livecd-rootfs (2.736) impish; urgency=medium

  * Change the per language layers in the desktop canary build to have more
    regular names (and make their implementation better documented and
    hopefully more comprehensible).

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Mon, 30 Aug 2021 15:30:37 +1200

livecd-rootfs (2.735) impish; urgency=medium

  * Get source catalog translations from subiquity git, as brz is in universe.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Mon, 23 Aug 2021 15:42:33 +1200

livecd-rootfs (2.734) impish; urgency=medium

  [ Ethan Hsieh ]
  * Download snap packages with correct architecture.

  [ Michael Hudson-Doyle ]
  * Create source catalogs for the installable live server layers.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 19 Aug 2021 16:49:26 +1200

livecd-rootfs (2.733) impish; urgency=medium

  [ Michael Hudson-Doyle ]
  * Add a minimal server layer underneath the full server layer. Continue to
    mount the full server layer at /media/filesystem for now to keep
    compatibility with current subiquity.

  [ Brian Murray ]
  * Check for SUBARCH and ARCH when setting the intel-iot model. (LP: #1938338)

 -- Brian Murray <brian@ubuntu.com>  Mon, 16 Aug 2021 12:22:25 -0700

livecd-rootfs (2.732) impish; urgency=medium

  [ Michael Hudson-Doyle ]
  * lb_chroot_layered: fix quoting when searching for
    trusted.overlay.opaque

  [ Łukasz 'sil2100' Zemczak ]
  * Revert previous change of fixing /dev sharing - this causes weird
    autopkgtest issues.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 02 Aug 2021 22:10:11 +0200

livecd-rootfs (2.731) impish; urgency=medium

  [ Jason C. McDonald ]
  * Generate manifest for HyperV desktop image

  [ Łukasz 'sil2100' Zemczak ]
  * Fix sharing of the /dev tree to make sure we can safely umount the chroot
    when needed. This fixes local non-livefs-builder image builds.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 28 Jul 2021 22:01:56 +0200

livecd-rootfs (2.730) impish; urgency=medium

  * Rename subarch of intel-iotg to intel-iot, add support for intel-iot
    models.

 -- Brian Murray <brian@ubuntu.com>  Mon, 26 Jul 2021 11:55:42 -0700

livecd-rootfs (2.729) impish; urgency=medium

  [ Michael Hudson-Doyle ]
  * Fix a few things found while porting the live server ISO builds to
    layers.
  * Port live server ISO builds to layers.

  [ Chloé 'kajiya' Smith ]
  * Image hangs during boot after deploying groovy-server-cloudimg-amd64.ova,
    and the upgrading the ESXi hardware version. Adding a serial port
    rectifies this - so this code change simply adds a serial port to the OVF
    template (so there is a serial port as default). (LP: #1895104)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Mon, 12 Jul 2021 10:27:35 +1200

livecd-rootfs (2.728) impish; urgency=medium

  [ Dan Bungert ]
  * Remove the customized final message from the live server cloud-init config
    as it is no longer displayed.

  [ Michael Hudson-Doyle ]
  * Make sure the process that prints SSH connection info on s390x has
    its output connected to the console. (LP: #1933523)

  [ Brian Murray ]
  * Add a subarch of intel-iotg which is used for creating images with a
    kernel optimized for Intel IOT devices.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 01 Jul 2021 11:00:08 +1200

livecd-rootfs (2.727) impish; urgency=medium

  * Remove assumption in 032-installer-squashfs.binary that all core snaps
    needed for subiquity are already in the filesystem layer. (LP: #1933352)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 24 Jun 2021 11:51:43 +1200

livecd-rootfs (2.726) impish; urgency=medium

  * Fix overriding of ExecStart in
    serial-getty@sclp_line0.service.d/subiquity-serial.conf.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Sat, 19 Jun 2021 11:44:33 +1200

livecd-rootfs (2.725) impish; urgency=medium

  * Revert previous change. I was too impatient and didn't wait long enough
    after performing some seed changes. The tasks are now correct and we can
    go back to using ubuntu-server-raspi once again.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 15 Jun 2021 09:44:21 +0200

livecd-rootfs (2.724) impish; urgency=medium

  * Use the server-raspi task name instead of ubuntu-server-raspi. It's still
    a mystery to me why ubuntu-desktop-raspi works as expected but the server
    variant needs to use 'server-raspi', even though both tasks seem
    implemented in the same way.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 09 Jun 2021 11:14:13 +0200

livecd-rootfs (2.723) impish; urgency=medium

  [ Steve Langasek ]
  * Drop code for the 'ubuntu-core' project when not using
    image_format: ubuntu-image, as this is obsolete and not used to build
    core* snaps in recent series.

  [ Michael Hudson-Doyle ]
  * Remove all references to the "base" project, which has not been
    built since 16.04 release day.

  [ Sebastien Bacher ]
  * The u-boot-tools package was typoed. Should fix the ubuntu-preinstalled
    impish build.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 20 May 2021 10:26:53 +0200

livecd-rootfs (2.722) impish; urgency=medium

  * Simplify how getty services are customized / overriden in the live server
    installer environment. (LP: #1888497)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Tue, 11 May 2021 11:44:06 +1200

livecd-rootfs (2.721) impish; urgency=medium

  [ Dimitri John Ledkov ]
  * 999-cpc-fixes: enable more code on grub2 armhf & arm64 (LP: #1925780)
  * Add support for generic preinstalled images. LP: #1923832
  * Change iptables calls, to query rules and quickly check that
    connectivity works after transparent proxy has been installed. LP:
    #1917920
  * magic-proxy: replace http.client with urllib calls
  * buildd: Re-enable merged /usr by default, as it is now required

  [ Michael Hudson-Doyle ]
  * remove the workaround for bug #1893818

  [ Łukasz 'sil2100' Zemczak ]
  * Start using the ubuntu-server-raspi seeds for preinstalled raspi server
    images, similarly to how it's done for desktop-preinstalled images.
  * Drop the unused imx6 support.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Wed, 05 May 2021 19:08:21 +0100

livecd-rootfs (2.720) impish; urgency=medium

  [ Thomas Bechtold ]
  * Add a new ubuntu-oci project that contains the customizations currently
    performed downstream for the official Ubuntu images on dockerhub.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Fri, 30 Apr 2021 11:48:32 +1200

livecd-rootfs (2.719) hirsute; urgency=medium

  * Our raspi server images should have used the raspi-server seed in hirsute,
    but we forgot to enable it. As it's release week and doing such invasive
    changes to our Pi images is risky, let's add the dependency on
    ubuntu-raspi-settings (which is seeded) to fix USB ethernet devices and
    GPIO permissions (LP: #1922266).

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 19 Apr 2021 22:54:03 +0200

livecd-rootfs (2.718) hirsute; urgency=medium

  * Do not have cloud-init set the installer user's password to something
    random during boot, as cloud-init now hides the value it was set to much
    better. Instead, subiquity will reset the password itself.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Tue, 30 Mar 2021 10:57:21 +1300

livecd-rootfs (2.717) hirsute; urgency=medium

  * riscv64: generalise slightly how preinstalled server images are built,
    to allow using subarch to pick u-boot binaries to install.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 11 Mar 2021 17:08:56 +0000

livecd-rootfs (2.716) hirsute; urgency=medium

  * Use the correct config keys in suppressing cloud-init output during boot
    of live server ISO.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 11 Mar 2021 10:49:47 +1300

livecd-rootfs (2.715) hirsute; urgency=medium

  [ Gauthier Jolly ]
  * ubuntu-cpc: change mount options in fstab to be align with defaults
    (LP: #1902103, LP: #1881006)

 -- Robert C Jennings <robert.jennings@canonical.com>  Tue, 02 Mar 2021 11:40:56 -0600

livecd-rootfs (2.714) hirsute; urgency=medium

  * Suppress cloud-init output during boot of live server ISO.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Fri, 26 Feb 2021 09:57:21 +1300

livecd-rootfs (2.713) hirsute; urgency=medium

  * Use the full name of the 'boot' flag in parted calls as it's not good
    practice to rely on the shortened, ambiguous version.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 24 Feb 2021 12:55:37 +0100

livecd-rootfs (2.712) hirsute; urgency=medium

  [ Cody Shepherd ]
  * Add grub config to produce console output and install lxd-agent loader
    to allow buildd vm images to work in lxd without requirement for manual
    installation (LP: #1915571)

 -- Robert C Jennings <robert.jennings@canonical.com>  Tue, 23 Feb 2021 14:32:19 -0600

livecd-rootfs (2.711) hirsute; urgency=medium

  * Perform fsck on all rootfs. (LP: #1912835)
  * functions: stop removing systemd-detect-virt unconditionally in undivert_grub
    (LP: #1902260)

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 05 Feb 2021 12:48:44 +0000

livecd-rootfs (2.710) hirsute; urgency=medium

  * esp: install grub in ubuntu bootloader id path, instead of removable.
    (LP: #1912830)
  * esp: perform fsck. (LP: #1912835)

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 28 Jan 2021 10:43:20 +0000

livecd-rootfs (2.709) hirsute; urgency=medium

  [ Sebastien Bacher ]
  * Desktop is using the hwe kernel, do the same on canary

  [ Iain Lane ]
  * auto/config: Install pi-bluetooth for raspi images.
    These are in restricted, and so cannot be depended on by the
    metapackages which are in main.

 -- Iain Lane <iain.lane@canonical.com>  Mon, 04 Jan 2021 10:38:15 +0000

livecd-rootfs (2.708) hirsute; urgency=medium

  * disk-image-uefi: fix riscv64 subarch user-data.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Tue, 08 Dec 2020 09:15:36 +0000

livecd-rootfs (2.707) hirsute; urgency=medium

  * qcow2-image: unbreak builds without subarch.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Sat, 05 Dec 2020 15:17:46 +0000

livecd-rootfs (2.706) hirsute; urgency=medium

  [ Łukasz 'sil2100' Zemczak ]
  * As per discussion, we might want to keep the UC20 images a bit bigger than
    what's defined via the gadget/rootfs contents, to make sure writable is
    comfortably big enough. Use the same hard-coded value as for UC16 and UC18.
    (LP: #1905990)

  [ Dimitri John Ledkov ]
  * riscv64: fixup subarch build, unbound variable

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 03 Dec 2020 16:18:21 +0000

livecd-rootfs (2.705) hirsute; urgency=medium

  * config: on hirsute build UC22 images

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Wed, 02 Dec 2020 11:05:55 +0000

livecd-rootfs (2.704) hirsute; urgency=medium

  * riscv64: build preinstalled riscv64 image with uboot SPL and CIDATA.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Tue, 01 Dec 2020 17:16:03 +0000

livecd-rootfs (2.703) hirsute; urgency=medium

  * Do not hard-code the UC20 amd64 image size as now ubuntu-image should be
    able to properly calculate the needed size itself (LP: #1905990).

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 27 Nov 2020 17:39:29 +0100

livecd-rootfs (2.702) hirsute; urgency=medium

  [ Sebastien Bacher ]
  * Use the target realpath to do the unmounting
  * Correctly set the environment needed by snapd in layered

  [ Dimitri John Ledkov ]
  * get-ppa-fingerprint: use production instance with latest api.
  * disk-image-uefi: riscv64 add u-boot spl (LP: #1905274)
  * disk-image-uefi: riscv64 add ubuntu:ubuntu login, without expiry.
  * rebuild with the correct version of 2.701 changes.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Tue, 24 Nov 2020 18:41:34 +0000

livecd-rootfs (2.701) hirsute; urgency=medium

  [ Cody Shepherd ]
  * buildd: Create manifests for buildd tarballs

 -- Robert C Jennings <robert.jennings@canonical.com>  Fri, 20 Nov 2020 14:55:21 -0600

livecd-rootfs (2.700) hirsute; urgency=medium

  [ David Krauser ]
  * buildd: produce kernel and initrd as separate artifacts
  * buildd: call update-initramfs for all installed kernels
    We only have one kernel installed, so we don't need to
    specify an explicit version.
  * Include -security and -updates packages in bootable buildd images
  * Produce buildd kernel and initrd as separate artifacts

  [ Patrick Viafore ]
  * Replace archive.ubuntu.com and security.ubuntu.com with launchpad
    mirrors. This is only done inside a build context, and the original
    sources.list file is restored at the end of the build

  [ Robert C Jennings ]
  * Use build env archive mirror in binary hooks
  * Ensure a binary hook has not changed the temporary sources.list

  [ Dimitri John Ledkov ]
  * disk-image.binary: actually skip building MBR image on EFI platforms.
  * disk-image.binary: skip building MBR image on riscv64.
  * disk-image.binary: however still build MBR image on amd64.
  * disk-image-uefi.binary: enable secureboot on the arm64 image.
  * disk-image-uefi.binary: build riscv64 image without a bootloader.

  [ Sebastien Bacher ]
  * During the layered build generate the right content for no languages

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 19 Nov 2020 17:43:47 +0000

livecd-rootfs (2.699) hirsute; urgency=medium

  * hyper-v hook: Fix writing of pkla file out to correct scratch directory
    for image build.

 -- "Jinming Wu, Patrick" <me@patrickwu.space>  Tue, 03 Nov 2020 10:13:53 +0000

livecd-rootfs (2.698) hirsute; urgency=medium

  * amd64: always install grub-pc with shim-signed (LP: #1901906)
  * control: install qemu-utils & snapd on riscv64.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 29 Oct 2020 22:22:30 +0000

livecd-rootfs (2.697) hirsute; urgency=medium

  [ John Chittum ]
  * Ensure vmtools version entered into vmdk header (LP: #1893898)

 -- Robert C Jennings <robert.jennings@canonical.com>  Wed, 28 Oct 2020 12:02:04 -0500

livecd-rootfs (2.696) hirsute; urgency=medium

  * auto/config: seed ubuntu-desktop when building hyperv image LP: #1901846
  * auto/config: scope ubuntu:desktop-preinstalled:raspi image options LP: #1901846

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Wed, 28 Oct 2020 10:36:29 +0000

livecd-rootfs (2.695) hirsute; urgency=medium

  * Install only shim-signed to prevent shipping conflicting, autoremovable
    packages
  * Ensure autoremove is run after any package install

 -- Joshua Powers <josh.powers@canonical.com>  Mon, 26 Oct 2020 11:58:57 -0700

livecd-rootfs (2.694) groovy; urgency=medium

  * Add the pi desktop oem user to the adm and sudo groups, as that is needed
    for wifi configuration.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 20 Oct 2020 17:25:35 +0200

livecd-rootfs (2.693) groovy; urgency=medium

  * Build classic raspi server images by default from the 'classic' branch now.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 19 Oct 2020 12:58:15 +0200

livecd-rootfs (2.692) groovy; urgency=medium

  * Create a 1GB swapfile for the raspi desktop images.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 15 Oct 2020 11:23:47 +0200

livecd-rootfs (2.691) groovy; urgency=medium

  * Remove 68-del-part-nodes.rules from installer squashfs to work around it
    breaking curtin. (LP: #1893818)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 15 Oct 2020 08:56:11 +1300

livecd-rootfs (2.690) groovy; urgency=medium

  * Add initial support for the Ubuntu Desktop Raspberry Pi image.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 07 Oct 2020 10:49:38 +0200

livecd-rootfs (2.689) groovy; urgency=medium

  * ubuntu-cpc: remove explicit install of virtualbox-guest-utils.
    LP: #1895862

 -- John Chittum <john.chittum@canonical.com>  Tue, 29 Sep 2020 12:59:23 -0500

livecd-rootfs (2.688) groovy; urgency=medium

  * ubuntu-cpc: Fix spelling in vagrant file

 -- Robert C Jennings <robert.jennings@canonical.com>  Wed, 16 Sep 2020 08:45:04 -0500

livecd-rootfs (2.687) groovy; urgency=medium

  [ Stanislav German-Evtushenko <giner> / John Chittum ]
  * Send Vagrant serial connection to NULL. (LP: #1874453)

 -- Robert C Jennings <robert.jennings@canonical.com>  Tue, 15 Sep 2020 15:25:19 -0500

livecd-rootfs (2.686) groovy; urgency=medium

  [ Dan Streetman ]
  * use python3-launchpadlib directly instead of python3-software-properties

  [ Steve Langasek ]
  * Restore the removal of fstab from squashfs images, now that cloud-init
    has been fixed (LP: #1877078; ref bug #1890803)

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 27 Aug 2020 08:53:31 -0700

livecd-rootfs (2.685) groovy; urgency=medium

  * Revert 'ubuntu-cpc: Disable boot splash in all cloud images
            (LP: #1725358)'

 -- Robert C Jennings <robert.jennings@canonical.com>  Wed, 12 Aug 2020 16:52:05 -0500

livecd-rootfs (2.684) groovy; urgency=medium

  * ubuntu-cpc: Fix ppc64el grub console update

 -- Robert C Jennings <robert.jennings@canonical.com>  Wed, 12 Aug 2020 13:40:42 -0500

livecd-rootfs (2.683) groovy; urgency=medium

  * Revert the removal of fstab from squashfs images, which has had knock-on
    effects and breaks MAAS (ref bug #1890803)

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 12 Aug 2020 11:31:12 -0700

livecd-rootfs (2.682) groovy; urgency=medium

  * ubuntu-cpc: Disable boot splash in all cloud images (LP: #1725358)

 -- Robert C Jennings <robert.jennings@canonical.com>  Wed, 12 Aug 2020 04:52:22 -0500

livecd-rootfs (2.681) groovy; urgency=medium

  [ Patrick Wu ]
  * Use the Azure kernel for the HyperV gallery images.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 10 Aug 2020 14:54:25 -0700

livecd-rootfs (2.680) groovy; urgency=medium

  [ Cody Shepherd ]
  * Add dist-upgrade to bootable-buildd hook to ensure the built image
    doesn't contain vulnerable kernels or other packages.
  * Don't explicitly install grub-efi-amd64-signed, it's a dependency of
    shim-signed.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 04 Aug 2020 12:30:34 -0700

livecd-rootfs (2.679) groovy; urgency=medium

  *  Handle seeded lxd snap with channel name for ubuntu-cpc:minimized
     (LP: #1889470)

 -- Robert C Jennings <robert.jennings@canonical.com>  Wed, 29 Jul 2020 14:55:57 -0500

livecd-rootfs (2.678) groovy; urgency=medium

  [ David Krauser ]
  * Add mechanism to detect initrdless boot fallback

  [ Dimitri John Ledkov ]
  * auto/build: use setup|teardown_mountpoint to reduce duplication
  * functions: provide nss_systemd-less nsswitch.conf in chroots.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 24 Jul 2020 21:08:07 +0100

livecd-rootfs (2.677) groovy; urgency=medium

  * Avoid rbind /sys for chroot snap pre-seeding (cgroups fail to unmount)

 -- Robert C Jennings <robert.jennings@canonical.com>  Sat, 18 Jul 2020 16:51:05 -0500

livecd-rootfs (2.676) groovy; urgency=medium

  * apparmor: Add generic v5.4 kernel apparmor features
  * apparmor: mount more up-to-date apparmor features in the chroot.
  * seccomp: add more up-to-date seccomp actions
  * seccomp: mount more up-to-date seccomp features
  * apparmor: compile all profiles

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Sat, 18 Jul 2020 01:17:54 +0100

livecd-rootfs (2.675) groovy; urgency=medium

  [ Robert C Jennings ]
  * Apply snap-preseed optimizations after seeding snaps

  [ Dimitri John Ledkov ]
  * live-server: remove duplicate snaps, due to overlayfs vs snap-preseed.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 17 Jul 2020 21:19:35 +0100

livecd-rootfs (2.674) groovy; urgency=medium

  [ David Krauser ]
  * Fix broken minimal cloud image boot on amd64

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 16 Jul 2020 15:40:15 -0700

livecd-rootfs (2.673) groovy; urgency=medium

  * Fix an unbound variable in scripts/functions.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Tue, 14 Jul 2020 14:57:19 +1200

livecd-rootfs (2.672) groovy; urgency=medium

  [ David Krauser ]
  * Boot with an initramfs by default in cloud images, except when
    using a non-generic kernel.

 -- Robert C Jennings <robert.jennings@canonical.com>  Fri, 10 Jul 2020 07:47:47 -0500

livecd-rootfs (2.671) groovy; urgency=medium

  * Fix-up seeding snaps with tracks.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 10 Jul 2020 01:55:47 +0100

livecd-rootfs (2.670) groovy; urgency=medium

  * snap_preseed: support channel specification with snap name (LP: #1882374)

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 09 Jul 2020 18:34:43 +0100

livecd-rootfs (2.669) groovy; urgency=medium

  * chroot: disable amd64 codepath on riscv64

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 25 Jun 2020 18:02:51 +0100

livecd-rootfs (2.668) groovy; urgency=medium

  [ Łukasz 'sil2100' Zemczak ]
  * Enable overrides of UC20 grade dangerous channels - as this is possible.
    (LP: #1879350)

  [ Patrick Wu ]
  * live-build/ubuntu/hooks/040-hyperv-desktop-images.binary: fix issues
    with Hyper-V xrdp support.

  [ Balint Reczey ]
  * Remove fstab from squashfs images (LP: #1877078)

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Tue, 23 Jun 2020 15:05:11 +0100

livecd-rootfs (2.667) groovy; urgency=medium

  * Revert of initramfs package removal in KVM image
    (LP: #1875400)

 -- Phil Roche <phil.roche@canonical.com>  Mon, 18 May 2020 17:03:20 +0100

livecd-rootfs (2.666) groovy; urgency=medium

  [ Balint Reczey ]
  * debian/gbp.conf: Add minimal configuration for branch and tag naming

  [ Michael Hudson-Doyle ]
  * Call udevadm settle before kpartx -d

  [ Dimitri John Ledkov ]
  * Fixup indentation
  * make-lxd-metadata: add riscv64 lxd architecture tag

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Tue, 12 May 2020 12:29:16 +0100

livecd-rootfs (2.665) groovy; urgency=medium

  * Bump only the UC20 pc image to 8GB, and keep Pi images as small as possible.
    (LP: #1875430)
  * ubuntu-image: fix focal+ pi images for armhf to use pi-armhf model name.
    (LP: #1876358)
  * ubuntu-image: drop ubuntu-image dep on riscv64, as not installable yet.
    (LP: #1876359)

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 01 May 2020 20:00:00 +0100

livecd-rootfs (2.664) focal; urgency=medium

  [ Patrick Viafore ]
  * Increase Vagrant disk size from 10G to 40G (LP: #1580596)

 -- Robert C Jennings <robert.jennings@canonical.com>  Fri, 17 Apr 2020 11:03:18 -0500

livecd-rootfs (2.663) focal; urgency=medium

  * Run snap info on the downloaded snap, rather than against the
    store. First of all snap info doesn't have --channel argument, thus
    queries the wrong channel, and depening on the cohort, a different
    snap might be visible too. Thus seed the base of the snap revision we
    dowanloaded, rather than some random one from the store.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 17 Apr 2020 00:10:41 +0100

livecd-rootfs (2.662) focal; urgency=medium

  * Print subiquity ssh login details on s390x line based consoles.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 16 Apr 2020 23:54:33 +0100

livecd-rootfs (2.661) focal; urgency=medium

  * Switch Ubuntu desktop to only hwe-20.04 kernel flavour.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 16 Apr 2020 01:30:36 +0100

livecd-rootfs (2.660) focal; urgency=medium

  * Remove dependencies on qemu-utils and snapd on riscv64, we don't have
    those yet, but at least we can be on parity with i386 livecd-rootfs
    already.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Sun, 12 Apr 2020 15:42:06 +0100

livecd-rootfs (2.659) focal; urgency=medium

  * Fix logic to ensure snapd is seeded in core18-only images (LP: #1871919)

 -- Robert C Jennings <robert.jennings@canonical.com>  Thu, 09 Apr 2020 14:16:40 -0500

livecd-rootfs (2.658) focal; urgency=medium

  * Remove some deprecated raspi2 special-casing, switch the main universal
    raspi SUBARCH to use the raspi KERNEL_FLAVOUR now that the kernel packages
    have been renamed.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 08 Apr 2020 10:03:21 +0200

livecd-rootfs (2.657) focal; urgency=medium

  * server: networkd applies the first sorted matching network file, thus
    prefix 'all' fallback networks with 'zz-'.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 03 Apr 2020 13:02:56 +0100

livecd-rootfs (2.656) focal; urgency=medium

  [ David Krauser ]
  * Safely set /etc/resolv.conf to an empty file in buildd images

 -- Robert C Jennings <robert.jennings@canonical.com>  Tue, 31 Mar 2020 09:56:13 -0500

livecd-rootfs (2.655) focal; urgency=medium

  * minimized: reinstall packages one by one, instead of all of them
    together, as otherwise apt fails to immediately configure libc6:amd64
    & libgcc-s1. LP: #1867607

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Mon, 16 Mar 2020 10:42:35 +0000

livecd-rootfs (2.654) focal; urgency=medium

  * Only install oem-20.04 kernel flavour on amd64, as it doesn't exist on
    other arches.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 13 Mar 2020 20:20:13 +0000

livecd-rootfs (2.653) focal; urgency=medium

  * Stop trying to extract autoinstall config during boot, subiquity will do
    it instead.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 11 Mar 2020 09:56:22 +1300

livecd-rootfs (2.652) focal; urgency=medium

  * Switch to using the generic pi gadget repo for classic builds. Use the
    generic branches instead of the 'classic' one as well, as this should now
    work for both core and classic.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 09 Mar 2020 09:52:30 +0100

livecd-rootfs (2.651) focal; urgency=medium

  * Do not start subiquity until cloud-final and snapd.seeded have
    completed.  (LP: #1863887)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Fri, 06 Mar 2020 17:07:37 +0100

livecd-rootfs (2.650) focal; urgency=medium

  * Support generating a .disk/info file via ubuntu-image from the passed-in
    datestamp parameter (using the $NOW environment variable).

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 06 Mar 2020 11:12:12 +0100

livecd-rootfs (2.649) focal; urgency=medium

  * Fix autoinstall-extracting runcmd in the case no user-data is passed.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 05 Mar 2020 15:36:25 +0100

livecd-rootfs (2.648) focal; urgency=medium

  * Enable cloud-init in live server installer live session on all
    architectures.
  * Remove code for old design for getting autoinstall.yaml.
  * Add runcmd to extract autoinstall.yaml from user-data.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 04 Mar 2020 16:10:35 +0100

livecd-rootfs (2.647) focal; urgency=medium

  * Address snap base regression after snap-tool removal

 -- Robert C Jennings <robert.jennings@canonical.com>  Tue, 25 Feb 2020 16:15:48 -0600

livecd-rootfs (2.646) focal; urgency=medium

  * Pass --verbose to `snap info` so that it includes the base.

 -- Iain Lane <iain.lane@canonical.com>  Mon, 24 Feb 2020 11:22:21 +0000

livecd-rootfs (2.645) focal; urgency=medium

  [ Robert C Jennings ]
  * Use snap cli rather than custom snap-tool

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 21 Feb 2020 13:02:43 -0800

livecd-rootfs (2.644) focal; urgency=medium

  * Rename the raspi3 SUBARCH to raspi, as we generate universal generic pi
    images since long.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 21 Feb 2020 12:37:02 +0100

livecd-rootfs (2.643) focal; urgency=medium

  * subiquity:
    - drop ds-identify policy, not needed with improved cloud config
    - drop disabling network, doesn't work with ip=
    - fixup setting up the INSTALLER_ROOT mountpoint

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Mon, 10 Feb 2020 23:50:16 +0000

livecd-rootfs (2.642) focal; urgency=medium

  * Set uc20 image size to 10G.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Mon, 10 Feb 2020 12:43:44 +0000

livecd-rootfs (2.641) focal; urgency=medium

  * Configure a better nocloud datasource for subiquity cloud-init.
  * Encode CHANNEL specification in the UC20 model names.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 07 Feb 2020 22:18:11 +0000

livecd-rootfs (2.640) focal; urgency=medium

  * Although the request flavour to install is oem-20.04, it really is
    called just oem on disk. Override the flavour name from oem-20.04 to
    oem when renaming built artefacts. This also means that ubuntu-cdimage
    needs to simply download 'oem' vmlinuz+initrd pairs, not 'oem-20.04'.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 30 Jan 2020 11:52:32 +0000

livecd-rootfs (2.639) focal; urgency=medium

  * On s390x subiquity:
    - enable cloud-init
    - make cloud-init handle the default/baked in networking configuration
    - install and enable openssh-server for the installation only
    - provide cloud.cfg that generates random installer user password
    - disable subiquity on sclp_line0 line based console

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Wed, 29 Jan 2020 14:16:09 +0000

livecd-rootfs (2.638) focal; urgency=medium

  * Install oem-20.04 kernel flavour on Ubuntu Desktop builds.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Tue, 28 Jan 2020 15:06:02 +0000

livecd-rootfs (2.637) focal; urgency=medium

  * Ensure seed partition is mounted on no-cloud images which use system-boot
    as their seed (LP: #1860046)
  * Have getty wait for cloud-init to complete to ensure that the default
    user exists before presenting a login prompt

 -- Dave Jones <dave.jones@canonical.com>  Fri, 24 Jan 2020 15:17:56 +0000

livecd-rootfs (2.636) focal; urgency=medium

  * Stop trying to install linux-oem. It's dropped, but us trying to install
    it is causing Ubuntu images to fail to build. It is due to be replaced by
    linux-oem-20.04 (currently built from linux-...-5.4). But that is stuck in
    focal-proposed at the minute, so there is nothing to transition to until
    it migrates.
  * Drop linux-signed-generic for flavours too - follow up from 2.630 which
    handled this for Ubuntu. (LP: #1859146)
  * Ditto for ubuntu-core:system-image - move from linux-signed-image-generic
    to linux-image-generic.

 -- Iain Lane <iain@orangesquash.org.uk>  Fri, 10 Jan 2020 12:11:02 +0000

livecd-rootfs (2.635) focal; urgency=medium

  * Preserve apt preferences created by any package we install (i.e.
    ubuntu-advantage-tools) against live-build's attempt to delete them.
    (LP: #1855354)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Sat, 14 Dec 2019 21:00:45 +1300

livecd-rootfs (2.634) focal; urgency=medium

  * Only build bootable buildd images for amd64.
  * Properly setup the chroot before using the network.

 -- David Krauser <david.krauser@canonical.com>  Thu, 12 Dec 2019 13:50:58 -0400

livecd-rootfs (2.633) focal; urgency=medium

  * Snapd for uc20 model assertions does not support global channel overrides.
    So make sure --channel is not passed to u-i for any uc20 builds for now.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 12 Dec 2019 14:10:37 +0100

livecd-rootfs (2.632) focal; urgency=medium

  [ David Krauser ]
  * Fix broken DNS in buildd image builds.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 12 Dec 2019 10:34:55 +1300

livecd-rootfs (2.631) focal; urgency=medium

  * Add support for uc20 model assertions.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 10 Dec 2019 15:27:39 +0100

livecd-rootfs (2.630) focal; urgency=medium

  * Drop installing dummy transitional linux-signed-generic, these days
    linux-generic is always signed, on arches that need/support it.
  * Ship two kernel flavours on desktop image.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Mon, 09 Dec 2019 14:47:27 +0000

livecd-rootfs (2.629) focal; urgency=medium

  * Also make qemu-utils a non-i386 dependency, since it is only used for
    cloud images we're not making and pulls in a lot of other dependencies.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sat, 30 Nov 2019 20:56:28 -0800

livecd-rootfs (2.628) focal; urgency=medium

  * Also make the ubuntu-image dependency arch-conditional, since
    ubuntu-image pulls in snapd.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 29 Nov 2019 21:47:05 -0800

livecd-rootfs (2.627) focal; urgency=medium

  * Don't depend on snapd on i386, since i386 support in focal is only for
    launchpad buildd chroots.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 29 Nov 2019 10:49:23 -0800

livecd-rootfs (2.626) focal; urgency=medium

  * No-change rebuild to build for i386 again (for now).

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 28 Nov 2019 11:43:51 +1300

livecd-rootfs (2.625) focal; urgency=medium

  * Make autoinstall files from initrd and filesystem with label autoinstall
    available on live-server systems.
  * Create a filelist whenever creating a manifest for an ubuntu-cpc
    project.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 28 Nov 2019 09:20:38 +1300

livecd-rootfs (2.624) focal; urgency=medium

  * Mark packages as autoinstalled using apt-mark in the chroot
    instead of using python-apt that potentially starts talking to the build
    system's dbus causing various problems. (LP: #1835406)

 -- Balint Reczey <rbalint@ubuntu.com>  Wed, 13 Nov 2019 21:01:51 +0100

livecd-rootfs (2.623) focal; urgency=medium

  * Add new buildd based bootable image for snapcraft builds.

 -- David Krauser <david.krauser@canonical.com>  Fri, 08 Oct 2019 10:48:48 -0400

livecd-rootfs (2.622) focal; urgency=medium

  * Support fetching classic gadget trees from a non-github-mirrored launchpad
    repository for ubuntu-image to use.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 30 Oct 2019 14:06:48 +0100

livecd-rootfs (2.621) focal; urgency=medium

  * Make sure the imx6 subarch uses the ubuntu-image imageformat.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 29 Oct 2019 12:31:35 +0100

livecd-rootfs (2.620) eoan; urgency=medium

  * Limit the lxd group to images with an installer; it's less appropriate
    for random tarball images, which are configured in ways we don't know.

 -- Adam Conrad <adconrad@ubuntu.com>  Sun, 13 Oct 2019 23:15:02 -0600

livecd-rootfs (2.619) eoan; urgency=medium

  * Subiquity: install linux-firmware in the installer layer, to make
    firmware blobs available in the live session. LP: #1847835

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Sun, 13 Oct 2019 20:53:11 +0100

livecd-rootfs (2.618) eoan; urgency=medium

  [ Michael Hudson-Doyle ]
  * Do not create a hook manually for ubuntu-cpc builds, make-hooks does not
    like that.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 08 Oct 2019 21:21:45 -0700

livecd-rootfs (2.617) eoan; urgency=medium

  * Create the lxd group as a system group for all projects. (LP: #1844498)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 09 Oct 2019 10:12:09 +1300

livecd-rootfs (2.616) eoan; urgency=medium

  * Subiquity images mount /usr/lib/modules from a squashfs, which systemd
    tries to unmount on shutdown, whilst they are still being in use. As
    systemd-udevd kmod built-in's libkmod has modules.* files
    memorymapped. This produces an warning on shutdown, flooding the
    screen with messages as systemd switches to a more verbose
    output. Specify LazyUnmount=yes on that mount, such that unmount call
    succeeds without flooding the shutdown log.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Tue, 08 Oct 2019 19:05:01 +0100

livecd-rootfs (2.615) eoan; urgency=medium

  * magic-proxy: dump proxy log to stdout on failure

 -- Robert C Jennings <robert.jennings@canonical.com>  Fri, 04 Oct 2019 10:24:18 -0500

livecd-rootfs (2.614) eoan; urgency=medium

  * 002-add-foreign-kernel.chroot_early: enable amd64 as a foreign arch on
    i386 image builds, since this is where the kernel comes from henceforth.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 02 Oct 2019 17:05:32 -0700

livecd-rootfs (2.613) eoan; urgency=medium

  * 999-ubuntu-image-customization.chroot: use IMAGEFORMAT=none for the checks
    instead of ubuntu-image, as that is what is used during ubuntu-image rootfs
    builds.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 19 Sep 2019 11:27:12 +0200

livecd-rootfs (2.612) eoan; urgency=medium

  * Hopefully the last fix for 999-ubuntu-image-customization.chroot: use
    config/chroot to pass IMAGEFORMAT instead of config/common, as only that
    file is updated with the right contents when the chroot hooks are run.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 16 Sep 2019 14:07:01 +0200

livecd-rootfs (2.611) eoan; urgency=medium

  * Execute chroot_hacks in live layer only.
  * lb_chroot_layered: also snap_validate_seed after all snaps are seeded

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 13 Sep 2019 12:37:25 +0100

livecd-rootfs (2.610) eoan; urgency=medium

  * Fix a typo in the 999-ubuntu-image-customization.chroot hook.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 10 Sep 2019 17:35:00 +0200

livecd-rootfs (2.609) eoan; urgency=medium

  [ Ethan Hsieh ]
  * Add support for the Nitrogen6x board (LP: #1838064).

  [ Łukasz 'sil2100' Zemczak ]
  * Do not initialize EXTRA_SNAPS with an empty value. Allow overrides via the
    environment.
  * Make sure that currently all ubuntu-image built images ship the NoCloud
    system-boot clout-init datasource (as right now all u-i targets are
    physical devices).

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 10 Sep 2019 10:46:28 +0200

livecd-rootfs (2.608) eoan; urgency=medium

  [ Iain Lane ]
  * snap_preseed: Handle SNAP_NO_VALIDATE_SEED being unset.

  [ Colin Watson ]
  * Use iptables-legacy rather than iptables when running on older
    (pre-4.15) kernel versions.  The newer nf_tables-based tools misbehave
    at least on 4.4.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 03 Sep 2019 15:35:17 +0100

livecd-rootfs (2.607) eoan; urgency=medium

  * snap seeding: Defer validation for regular image builds. When getting the
    list of snaps to include on an image via germinate, we process the snaps
    in alphabetical order. Currently we seed several packages `gnome-foo` and
    also `gtk-common-themes`, the default provider of `gtk-3-themes`. Since
    `gtk-common-themes` is alphabetically after `gnome-foo`, the `seed.yaml`
    we generate is invalid when we are part way through generating. What we
    really care about, though, is not that the `seed.yaml` is always valid at
    every step, but it is that it is valid at the *end* of seeding.  So for
    the germinate case, let's defer validation to happen once at the end.
    Other callsites of `snap_preseed`, where callers are careful to seed snaps
    in the right order, are unaffected by this.

 -- Iain Lane <iain.lane@canonical.com>  Mon, 02 Sep 2019 14:22:49 +0100

livecd-rootfs (2.606) eoan; urgency=medium

  * Undivert update-initramfs more carefully: previously the wrapper script
    and diversion were left in place on images such as buildd images that
    don't have initramfs-tools installed (LP: #1841573).

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 27 Aug 2019 17:05:32 +0100

livecd-rootfs (2.605) eoan; urgency=medium

  [ David Krauser ]
  * KVM disk images should derive from the uefi image.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 26 Jul 2019 14:36:03 -0300

livecd-rootfs (2.604) eoan; urgency=medium

  * Stop installing the udisks2 and pulseaudio extra snaps for the UC18 kassel
    subflavor images - those snaps were only needed for internal testing
    purposes.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 23 Jul 2019 17:58:05 +0200

livecd-rootfs (2.603) eoan; urgency=medium

  [ Tobias Koch ]
  * Add retry logic to snap-tool to make downloads more resilient

  [ Robert C Jennings ]
  * ubuntu-cpc: Only produce explicitly specified artifacts (LP: #1837254)

 -- Tobias Koch <tobias.koch@canonical.com>  Mon, 15 Jul 2019 17:59:06 +0200

livecd-rootfs (2.602) eoan; urgency=medium

  [ David Krauser ]
  * Fixing broken binary hook symlinks for hyperv gallery image builds.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 18 Jul 2019 14:07:10 +0100

livecd-rootfs (2.601) eoan; urgency=medium

  [ Michael Vogt ]
  * Run "snap debug validate-seed" during preseeding to do basic validation of
    the generated seed.yaml

 -- Iain Lane <iain.lane@canonical.com>  Tue, 16 Jul 2019 11:30:27 +0100

livecd-rootfs (2.600) eoan; urgency=medium

  [ Tobias Koch ]
  * Do proper error checking when calling snap-tool info to determine
    the base of a snap.

  [ Iain Lane ]
  * Seed core for non minimized builds, as it is still required (LP:
    #1836594).

 -- Tobias Koch <tobias.koch@canonical.com>  Mon, 15 Jul 2019 16:13:31 +0100

livecd-rootfs (2.599) eoan; urgency=medium

  * Append the list of seeded snaps to manifests for all regular images.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 02 Jul 2019 11:39:11 +0200

livecd-rootfs (2.598) eoan; urgency=medium

  * Change minimize-manual to read package section from version instead
    of package objects, fixing compatibility with (python-)apt 1.9.0

 -- Julian Andres Klode <juliank@ubuntu.com>  Mon, 24 Jun 2019 17:55:03 +0200

livecd-rootfs (2.597) eoan; urgency=medium

  * Install s390-tools-zkey into the installer layer for zkey support in
    subiquity.
  * Unbreak cpc/server builds, by ensuring that includes are copied with
    archived symlinks, and only hooks resolve symlinks when getting
    copied.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 20 Jun 2019 23:25:13 +0100

livecd-rootfs (2.596) eoan; urgency=medium

  * Add tzdata to buildd images.  It isn't strictly build-essential, but it
    has traditionally been present in both Debian and Ubuntu, and a variety
    of things fail without it.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 19 Jun 2019 23:21:56 +0100

livecd-rootfs (2.595) eoan; urgency=medium

  * Remove dangling symlink
    /usr/lib/systemd/system/local-fs.target.wants/media-region.lower.mount.
    It's unclear why this has just started causing build failures, but the
    symlink should have been removed in 2.592 with the rest of the MAAS
    stuff.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sat, 15 Jun 2019 11:09:48 -0700

livecd-rootfs (2.594) eoan; urgency=medium

  [ David Krauser ]
  * Add support for HyperV Gallery images

  [ Patrick Viafore ]
  * Add support for linux-kvm images

 -- Tiago Stürmer Daitx <tiago.daitx@ubuntu.com>  Wed, 12 Jun 2019 17:47:43 +0000

livecd-rootfs (2.593) eoan; urgency=medium

  * Use boot-partition for cloud-init seed on RPi

 -- Dave Jones <dave.jones@canonical.com>  Thu, 06 Jun 2019 08:29:57 +0000

livecd-rootfs (2.592) eoan; urgency=medium

  * Drop trying to mount removed maas squashfs.
  * Stop overriding initramfs compression default to lzma. LP: #1831736
  * Do not force lzma on ubuntu-core builds, the compress format default
    should be set universally inside initramfs-tools-ubuntu-core package
    instead of getting duplicated multiple times all over the place.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Wed, 05 Jun 2019 13:55:06 +0100

livecd-rootfs (2.591) eoan; urgency=medium

  * Fix typpo when dropping jasper.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Tue, 04 Jun 2019 23:53:12 +0100

livecd-rootfs (2.590) eoan; urgency=medium

  * Drop dead wubi subproject.
  * Drop dead jasper subproject.
  * Drop old arm platforms.
  * Drop ubuntu-desktop-next configs
  * Drop ubuntu-desktop-next hooks
  * Drop ubuntu-touch configs
  * Drop ubuntu-touch hooks
  * Drop ubuntu-rtm configs

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Tue, 04 Jun 2019 23:45:43 +0100

livecd-rootfs (2.589) eoan; urgency=medium

  * Add support for the 'kassel' subflavor of UC18 images.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 31 May 2019 01:41:13 -0700

livecd-rootfs (2.588) eoan; urgency=medium

  * Add an explicit build-dependency on python3-yaml since livecd-rootfs
    uses it, rather than relying on this dependency being pulled in
    indirectly via ubuntu-image.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 30 May 2019 14:23:11 -0700

livecd-rootfs (2.587) eoan; urgency=medium

  * Strip translation files out of the minimal images, another thing that
    goes unused when there is no human console user (and we already don't
    have the locales themselves present on a minimal image).  LP: #1829333.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 28 May 2019 08:40:42 -0700

livecd-rootfs (2.586) eoan; urgency=medium

  [ Robert C Jennings ]
  * magic-proxy: Send headers on error (LP: #1829944)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 23 May 2019 12:33:21 +1200

livecd-rootfs (2.585) eoan; urgency=medium

  [ Robert C Jennings ]
  * ubuntu-cpc: Ensure base disk image is the same between all build targets

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Tue, 21 May 2019 09:37:23 +1200

livecd-rootfs (2.584) eoan; urgency=medium

  * Build WSL rootfs tarball (LP: #1827930)

 -- Balint Reczey <rbalint@ubuntu.com>  Thu, 16 May 2019 23:01:13 +0200

livecd-rootfs (2.583) eoan; urgency=medium

  * Use snap-tool to seed subiquity snap.
  * Drop maas hook from server-live.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 16 May 2019 15:23:22 +0200

livecd-rootfs (2.582) eoan; urgency=medium

  * Don't purge busybox-static in minimized, no longer installed

 -- Julian Andres Klode <juliank@ubuntu.com>  Mon, 13 May 2019 14:22:56 +0200

livecd-rootfs (2.581) eoan; urgency=medium

  * Remove device nodes later for ubuntu-base:minimized (i.e. docker) builds.
    (LP: #1828118)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 08 May 2019 09:59:35 +1200

livecd-rootfs (2.580) eoan; urgency=medium

  * Run clean_debian_chroot after minimize_manual (LP: #1826377)

 -- Julian Andres Klode <juliank@ubuntu.com>  Fri, 26 Apr 2019 10:30:15 +0200

livecd-rootfs (2.579) eoan; urgency=medium

  * Fix ubuntu-server-live images to generate initrd with casper
    UUID. Whilst configs are sources, the variables are not exported into
    the environment by default. Thus when casper hook is executed, it had
    no idea that it should generate UUID.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 25 Apr 2019 17:07:10 +0100

livecd-rootfs (2.578) disco; urgency=medium

  * Fix the sed script that Tobias had right in the first place and I
    mangled in the previous upload.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sat, 13 Apr 2019 02:13:19 -0700

livecd-rootfs (2.577) disco; urgency=medium

  [ Tobias Koch ]
  * Detect which core snaps are required and install them on-the-fly.
  * If image has core18 snaps only, automatically preseed snapd.

  [ Michael Hudson-Doyle ]
  * Slim down ubuntu-cpc:minimized builds:
    - Do not include any snaps in ubuntu-cpc:minimized builds (erroring if any
      snap other than lxd is seeded).
    - Install the lxd-installer package instead, which installs the lxd snap
      when invoked.
    - Install lxd snap in unminimize.

  [ Balint Reczey ]
  * Pass --sort=name to tar to make tarballs more reproducible and
    rsync-friendly

  [ Steve Langasek ]
  * Adjust sed command for clarity.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 12 Apr 2019 13:34:56 -0700

livecd-rootfs (2.576) disco; urgency=medium

  * When the "snap-tool" script encounters a core snap it will switch to
    the "stable" channel if the channel was set to "stable/ubuntu-X.X". This
    ensures that core snaps always come from one canonical source.
  * Running `snap-tool info <snap_name>` will now also print out the base of
    the snap.

 -- Tobias Koch <tobias.koch@canonical.com>  Tue, 09 Apr 2019 17:33:34 +0100

livecd-rootfs (2.575) disco; urgency=medium

  [ Robert C Jennings ]
  * Remove duplicate snap listings in ubuntu-cpc qcow manifest

 -- Mathieu Trudel-Lapierre <cyphermox@ubuntu.com>  Mon, 01 Apr 2019 14:29:16 -0400

livecd-rootfs (2.574) disco; urgency=medium

  * Make serial-subiquity@ use the same codepath as tty1 subiquity.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 21 Mar 2019 22:51:04 +0000

livecd-rootfs (2.573) disco; urgency=medium

  * Add languages to live pass
    The name of the pass is live and not "ubuntu-live" which is the live pass
    default task.

 -- Didier Roche <didrocks@ubuntu.com>  Wed, 20 Mar 2019 17:10:53 +0100

livecd-rootfs (2.572) disco; urgency=medium

  * Revert "subiquity: fix name of mdoules.squashfs to mount", debian-cd
    has been fixed to to go back to the original name.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Wed, 20 Mar 2019 00:57:54 +0000

livecd-rootfs (2.571) disco; urgency=medium

  * subiquity: fix name of mdoules.squashfs to mount

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Mon, 18 Mar 2019 14:21:28 +0000

livecd-rootfs (2.570) disco; urgency=medium

  [ Jean-Baptiste Lallement ]
  * Fix grub divert for multilayer images:
    grub-probe must not be called during image build so grub is diverted. In
    multilayer image the chroot is always the tip of the filesystem, so we
    divert grub at the beginning of each pass and undivdert it as the end.
    For flat images, it's diverted just before building the chroot and
    undiverted after.

  [ Didier Roche ]
  * Ensure default langpacks are removed after installation:
    Add langpacks to live tasks to have them in the ubiquity diff file and
    thus, purged after installation if not selected. (LP: #1818890)

 -- Didier Roche <didrocks@ubuntu.com>  Mon, 18 Mar 2019 09:58:56 +0100

livecd-rootfs (2.569) disco; urgency=medium

  * Drop /etc/update-motd.d/51-cloudguest from cloud images; this is not
    consistent with current Ubuntu Advantage product language.  Any future
    customizations to update-motd for cloud images should be done via a
    package instead.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 14 Mar 2019 10:05:48 -0700

livecd-rootfs (2.568) disco; urgency=medium

  [ Tobias Koch ]
  * Make sure snap-tool exits with non-zero exit status, if a problem
    occurred.

  [ Steve Langasek ]
  * divert grub when calling into lb chroot, to avoid any problems from
    grub-probe.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 11 Mar 2019 18:14:46 -0700

livecd-rootfs (2.567) disco; urgency=medium

  * Fix change to ignore ubiquity packages, it failed to mark anything
    as automatic.

 -- Julian Andres Klode <juliank@ubuntu.com>  Wed, 27 Feb 2019 09:02:14 +0100

livecd-rootfs (2.566) disco; urgency=medium

  [ Julian Andres Klode ]
  * Do not mark direct dependencies of ubiquity as auto installed. This caused
    cryptsetup to remain auto on the installed system (LP: #1801629)

  [ Tobias Koch ]
  * When the magic-proxy script could not find a valid InRelease file for the
    configured timestamp, it would fall back to serving the canonical version
    of it. This meant that builds would succeed, even though snap-shotting the
    repository failed.
    .
    This update makes the script return HTTP 404 when an InRelease by-hash
    link for a given combination of mirror, suite and timestamp cannot be
    found.

 -- Julian Andres Klode <juliank@ubuntu.com>  Tue, 26 Feb 2019 08:56:02 +0100

livecd-rootfs (2.565) disco; urgency=medium

  * Also drop dependency on python.
  * Drop python3-minimal alternate dependency; nothing should depend on
    python3-minimal.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 20 Feb 2019 08:26:16 +0100

livecd-rootfs (2.564) disco; urgency=medium

  * Use python3 vmdkstream exclusively; we should not fall back to python2.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 19 Feb 2019 08:28:43 +0100

livecd-rootfs (2.563) disco; urgency=medium

  * Make sure buildd images have a /usr/sbin/policy-rc.d symlink.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 18 Feb 2019 15:57:11 +0000

livecd-rootfs (2.562) disco; urgency=medium

  * subiquity: make subiqutiy_config.mount optional
  * Add python3 vmdkstream support

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Mon, 18 Feb 2019 12:01:51 +0100

livecd-rootfs (2.561) disco; urgency=medium

  * Support building pi3-arm64 core18 images. At the same time, make sure we
    still use the right gadget tree repository for the classic arm64 pi3
    image.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 06 Feb 2019 18:07:06 +0100

livecd-rootfs (2.560) disco; urgency=medium

  [ Colin Watson ]
  * Disable merged /usr in buildd images.
  * Drop code to handle building buildd images for series earlier than
    disco; we'll deal with those in stable updates instead.

  [ Tobias Koch ]
  * When the REPO_SNAPSHOT_STAMP environment variable is set, inject a
    proxy into the build providing a snapshot view of the package repo.
  * Replace "snap download" with tool that uses snap store's coherence
    feature.

  [ Didier Roche ]
  * Fix customized images with multiple brand/models.
    Some customized images are built from the same chroot, but need to
    override brands and models.

  [ Balint Reczey ]
  * live-build/functions: Always use mount --make-private before umount.
    (LP: #1813730)

 -- Balint Reczey <rbalint@ubuntu.com>  Tue, 05 Feb 2019 19:51:03 +0700

livecd-rootfs (2.559) disco; urgency=medium

  [ Jean-Baptiste Lallement ]
  [ Didier Roche ]
  * Add support for multi layer filesystem by generating one squashfs per layer
    based on PASSES defined by project.
    Thanks Michael Hudson-Doyle for the reviews.

 -- Didier Roche <didrocks@ubuntu.com>  Fri, 01 Feb 2019 08:04:35 +0100

livecd-rootfs (2.558) disco; urgency=medium

  * Use the new linux-firmware-raspi2 for pi3 boot binary blobs as
    raspi3-firmware includes upgrade hooks that conflict with our image
    configuration.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 18 Jan 2019 17:09:26 +0100

livecd-rootfs (2.557) disco; urgency=medium

  * Don't install gpg or gpg-agent when building buildd images for series
    earlier than bionic.  (In earlier series, those packages didn't exist
    and gnupg was build-essential.)

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 16 Jan 2019 12:50:39 +0000

livecd-rootfs (2.556) disco; urgency=medium

  * Add wpasupplicant to the additional packages installed for the raspi2 and
    raspi3 targets.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 11 Jan 2019 11:25:05 +0100

livecd-rootfs (2.555) disco; urgency=medium

  * Apparently the last raspi3 image rename was not what cdimage expected.
    Link to the expected name instead, so that we can change it to something
    more sensible once raspi2 is migrated to ubuntu-image.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 10 Jan 2019 22:54:23 +0100

livecd-rootfs (2.554) disco; urgency=medium

  * Default to IMAGEFORMAT=ubuntu-image for raspi3 ubuntu-cpc builds.
  * Rename the resulting raspi3 image file to *.disk1.img.xz to be compatible
    with how raspi2 images are provided.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 09 Jan 2019 10:34:59 +0100

livecd-rootfs (2.553) disco; urgency=medium

  * Add a LXD image to builds for the buildd subproject.
  * Move buildd image building to binary hooks.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 07 Jan 2019 21:23:31 +0000

livecd-rootfs (2.552) disco; urgency=medium

  * Do not include curtin in the live-server installer.squashfs as the
    version of subiquity that includes it in the snap has now been released to
    stable.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 19 Dec 2018 11:00:08 +1300

livecd-rootfs (2.551) disco; urgency=medium

  * Do no install openssh-server in the base filsystem for the live server
    installer.
  * Use right lsb_release argument for HWE kernel name (-sc -> bionic, need
    -sr -> 18.04).
  * A few simple tweaks to reduce size of live servers installer.squashfs:
    - Do not run apt-get update (which can bring in package lists if we are
      unlucky wrt publisher schedules).
    - Run apt-get clean to clear out downloaded debs of curtin/casper and
      dependencies.
    - Do not install user-setup.
    - Use the core snap from the base filesystem if present.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Mon, 17 Dec 2018 13:40:21 +1300

livecd-rootfs (2.550) disco; urgency=medium

  [ Balint Reczey ]
  * Update Vcs-* fields in debian/control to point to git.

  [ Michael Hudson-Doyle ]
  * Fix typo preventing builds of ubuntu-core images.
  * Changes to kernel handling for live-server: do not include kernel/initrd
    in filesystem.squashfs but rather install it in a throwaway layer on top
    of installer.squashfs and fish kernel, initrd and modules out of that with
    an initrd hook that records kernel metapackage name in /run and mounts
    /lib/modules from a squashfs on the ISO.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 13 Dec 2018 14:04:52 +1300

livecd-rootfs (2.549) disco; urgency=medium

  [ Tobias Koch ]
  * Use series files with dependency handling to generate hook symlinks
    dynamically

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 10 Dec 2018 14:15:34 -0800

livecd-rootfs (2.548) disco; urgency=medium

  * Key netplan delegation to NetworkManager on presence of
    /usr/sbin/NetworkManager, not on /usr/lib/NetworkManager which may have
    hooks from other packages (i.e., wpasupplicant).

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 06 Dec 2018 13:38:09 +0200

livecd-rootfs (2.547) disco; urgency=medium

  [ Łukasz Zemczak ]
  * Add support for raspi3 rootfs builds (based on Ryan Finnie's changes).
  * For ubuntu-image consumption, export the kernel and initrd to
    image/boot/uboot for raspi*.
  * Avoid issues of hard-linking to a symbolic vmlinuz as this can lead to a
    dangling symlink.
  * Add raspi3 arm64 rootfs build support.
  * Add git to the build dependencies for the gadget tree pull.
  * Minor fixes to raspi3 builds: add arm64+raspi3 to the supported model
    list, pass SUITE on to the build stage and use the git:// url for the
    gadget tree.

  [ Aleksandr Bogdanov ]
  * vagrant: disabling automatic console log file

  [ Michael Zanetti ]
  * Don't set QML2_IMPORT_PATH in environment for Ubuntu Touch images.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 23 Nov 2018 17:20:29 +0100

livecd-rootfs (2.546) disco; urgency=medium

  * Revert "Do not mount result, on top of lowerdir, appears to fail in
    disco." the actual problem is in live-build with merged-usr and
    copying over chroot/binary includes.
  * Move overlay include.binary /lib to /usr/lib.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Mon, 12 Nov 2018 20:37:51 +0000

livecd-rootfs (2.545) disco; urgency=medium

  [ Dimitri John Ledkov ]
  * Do not mount result, on top of lowerdir, appears to fail in
    disco. Should unblock building server-live images in disco.
  * Also strip duplicate \n from the below.

  [ Cody Shepherd ]
  * Fix snap-seed-parse to take filename argument instead of printing to
    stdout

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 09 Nov 2018 22:22:29 +0000

livecd-rootfs (2.544) disco; urgency=medium

  [ Steve Langasek ]
  * Properly fix the hard-linking of vmlinuz, taken astray by my misguided
    merge review.

  [ Dimitri John Ledkov ]
  * When calling snap-seed-parse append stdout to file, but redirect
    stderr to stdout, thus unbreak autopkgtests.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 08 Nov 2018 15:40:42 +0000

livecd-rootfs (2.543) disco; urgency=medium

  [ Cody Shepherd ]
  * Ensure pre-seeded snaps are now published in the image manifests.
  * Include grub efi packages in manifests for uefi images.

  [ Aleksandr Bogdanov ]
  * vagrant: disabling automatic console log file

  [ Łukasz 'sil2100' Zemczak ]
  * Avoid issues of hard-linking to a symbolic vmlinuz as this can lead to a
    dangling symlink.

  [ Steve Langasek ]
  * Unconditionally set GRUB_FORCE_PARTUUID in cloud images; as of version
    2.02+dfsg1-5ubuntu5 grub will automatically fall back to booting with an
    initrd if one is available, so we can now always attempt initramfsless
    boot for cloud images which almost always works and causes only minimal
    increase in boot time for cases where it does not.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 02 Nov 2018 14:40:17 -0700

livecd-rootfs (2.542) cosmic; urgency=medium

  * Decide what model assertion series to fetch depending on the suite. Use 16
    for xenial and 18 for other series (bionic+). This enables core18 image
    builds.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 03 Oct 2018 11:51:59 +0200

livecd-rootfs (2.541) cosmic; urgency=medium

  [ Michael Hudson-Doyle ]
  * Remove device nodes from Docker images. (LP: #1645468)

  [ Robert C Jennings ]
  * Add the server snap seed to the ubuntu-cpc project
  * Allow hooks to replace generic snap assertion

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 27 Sep 2018 15:21:49 -0700

livecd-rootfs (2.540) cosmic; urgency=medium

  * Ensure /lib/modules exists in root tarballs and sqashfs.
    (LP: #1792905)

 -- Tobias Koch <tobias.koch@canonical.com>  Thu, 20 Sep 2018 09:38:34 +0200

livecd-rootfs (2.539) cosmic; urgency=medium

  * Stop building buildd chroots with --xattrs until we move to python3.

 -- Adam Conrad <adconrad@ubuntu.com>  Thu, 20 Sep 2018 02:52:10 -0600

livecd-rootfs (2.538) cosmic; urgency=medium

  * Add a buildd subproject.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 19 Sep 2018 16:35:54 +0200

livecd-rootfs (2.537) cosmic; urgency=medium

  * Minimize the number of manually installed packages in images by marking
    dependencies of metapackages as automatically installed.

 -- Julian Andres Klode <juliank@ubuntu.com>  Tue, 18 Sep 2018 08:55:04 +0200

livecd-rootfs (2.536) cosmic; urgency=medium

  * Fix live-server journald config snippet to actually disable journald rate
    limiting.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Tue, 28 Aug 2018 11:00:39 +1200

livecd-rootfs (2.535) cosmic; urgency=medium

  * Disentangle enabling universe in the final image a little from having
    PREINSTALLED=true set and enable it for a live-server build.
    (LP: #1783129)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Fri, 24 Aug 2018 13:04:51 +1200

livecd-rootfs (2.534) cosmic; urgency=medium

  [ Michael Hudson-Doyle ]
  * Disable journald rate limiting in the live-server live session.
    (LP: #1776891)

  [ Steve Langasek ]
  * generate all tar files with --xattrs.  LP: #1302192.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 06 Aug 2018 13:12:02 -0700

livecd-rootfs (2.533) cosmic; urgency=medium

  [ Robert C Jennings ]
  * ubuntu-cpc: Remove git-man for minimized images
  * Disable checksum generation

  [ Colin Watson ]
  * live-build/auto/config: Drop "lp-*" hostname filter for Launchpad
    builders, since LP #1747015 is now fixed; "*.buildd" should be enough.

  [ Francis Ginther ]
  * Update unminimize script text and install ubuntu-standard when
    unminimizing a minimal image (LP: #1778777)

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 18 Jul 2018 11:06:54 -0600

livecd-rootfs (2.532) cosmic; urgency=medium

  * ubuntu-cpc: Generate the root image contents once, and use it for both the
    -root.tar.xz and the .squashfs.

 -- Daniel Watkins <oddbloke@ubuntu.com>  Thu, 07 Jun 2018 11:11:02 -0700

livecd-rootfs (2.531) cosmic; urgency=medium

  [ Daniel Watkins ]
  * ubuntu-cpc: Use linux-kvm for all amd64 minimized builds (LP: #1775472).

  [ Steve Langasek ]
  * live-build/ubuntu-cpc/hooks/033-disk-image-uefi.binary: don't manually
    install grub-efi-amd64 since that forces off grub-pc, which is otherwise
    now coinstallable.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 06 Jun 2018 17:34:07 -0700

livecd-rootfs (2.530) cosmic; urgency=medium

  * ubuntu-cpc: Reintroduce the -root.tar.xz artifact (LP: #1585233).

 -- Daniel Watkins <oddbloke@ubuntu.com>  Wed, 06 Jun 2018 11:21:57 -0700

livecd-rootfs (2.529) cosmic; urgency=medium

  * Improvements to the ubuntu-base (i.e. Docker) build:
    - Customize the unminimize script to not install ubuntu-minimal.
    - Divert /usr/bin/man to a script that points to the unminimize script.
    - Remove apt lists that are currently removed downstream anyway.
      (LP: #1699913)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 07 Jun 2018 05:59:12 +1200

livecd-rootfs (2.528) cosmic; urgency=medium

  * Don't divert grub-probe; otherwise we're missing the filesystem UUIDs that
    the grub search command needs to find the right prefix/root. This is
    different than the PARTUUID for booting initrd-less.

 -- Mathieu Trudel-Lapierre <cyphermox@ubuntu.com>  Mon, 28 May 2018 10:39:09 -0400

livecd-rootfs (2.527) cosmic; urgency=medium

  * Symlink systemd-networkd-wait-online to /bin/true in the live installer
    live session to avoid depending on buggy systemd behaviour.
  * Remove "optional: true" from installer netplan config.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 23 May 2018 14:27:01 +1200

livecd-rootfs (2.526) cosmic; urgency=medium

  * Drop Lubuntu Next now that Lubuntu Next is Lubuntu.
  * Don't follow recommends on Lubuntu now that this is no longer the
    case in the seed.

 -- Simon Quigley <tsimonq2@ubuntu.com>  Thu, 03 May 2018 23:18:52 -0500

livecd-rootfs (2.525) bionic; urgency=medium

  * Don't fail to build CPC images if /lib/modules already exists in the
    squashfs.

 -- Daniel Watkins <daniel.watkins@canonical.com>  Tue, 24 Apr 2018 13:00:39 -0400

livecd-rootfs (2.524) bionic; urgency=medium

  * Ensure MAAS squashfsi are clean of passwords. LP: #1764991.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 19 Apr 2018 21:23:30 +0100

livecd-rootfs (2.523) bionic; urgency=medium

  * Allow the configuration of model assertions independent of preseeding
    snaps.
  * Allow non-generic model assertions to be configured.
  * Don't include the name of the model assertion in the path we write it out
    to (LP: #1764541).

 -- Daniel Watkins <daniel.watkins@canonical.com>  Thu, 19 Apr 2018 11:44:38 -0400

livecd-rootfs (2.522) bionic; urgency=medium

  * Remove landscape-common from minimal image, and handle restoring it in
    unminimize script.  LP: #1763182.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 17 Apr 2018 13:53:00 -0700

livecd-rootfs (2.521) bionic; urgency=medium

  * In subiquity image, mount additional squashfs in /media.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Wed, 11 Apr 2018 14:20:27 +0200

livecd-rootfs (2.520) bionic; urgency=medium

  * Make lzma initramfs compression opt-in rather than opt-out, and do not
    opt-in to it for live-server builds to speed up the boot. (LP: #1750873)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 11 Apr 2018 19:15:49 +1200

livecd-rootfs (2.519) bionic; urgency=medium

  [ Robert C Jennings ]
  * Refactor snap preseeding to allow additional snaps to be preseeded from
    hooks

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 10 Apr 2018 15:59:33 -0700

livecd-rootfs (2.518) bionic; urgency=medium

  * Make subiquity installer boot quicker, by making dhcp interfaces
    optional, such that wait-online is not blocking bringing up the
    installer UI.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Tue, 03 Apr 2018 14:56:58 +0100

livecd-rootfs (2.517) bionic; urgency=medium

  [ Simon Quigley ]
  * Add proper lubuntu support in BASE_SEED.

 -- Iain Lane <iain.lane@canonical.com>  Tue, 03 Apr 2018 11:56:32 +0100

livecd-rootfs (2.516) bionic; urgency=medium

  [ Chris Glass ]
  * Make sure we call the build "minimal" within the cloud build info,
    when building a minimized image.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 27 Mar 2018 12:12:31 -0700

livecd-rootfs (2.515) bionic; urgency=medium

  * Set the default locale to C.UTF-8 in all server and cloud images.
   (LP: #1751051, #1759003)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Tue, 27 Mar 2018 09:59:02 +1300

livecd-rootfs (2.514) bionic; urgency=medium

  * On amd64, if building minimal images for bionic, xenial, or extra ppa,
    use kvm kernel, otherwise fallback to virtual.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Wed, 21 Mar 2018 11:02:25 +0000

livecd-rootfs (2.513) bionic; urgency=medium

  * In the live-server build, prevent casper from mounting any existing
    swap partitions from drives we might later be installing to.
    (LP: #1743643)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 21 Mar 2018 15:58:02 +1300

livecd-rootfs (2.512) bionic; urgency=medium

  * ubuntu-cpc: When performing a minimized build, don't generate artifacts
    that won't boot with the linux-kvm kernel (LP: #1757223).

 -- Daniel Watkins <daniel.watkins@canonical.com>  Tue, 20 Mar 2018 13:42:50 -0400

livecd-rootfs (2.511) bionic; urgency=medium

  * Whitelist preserving "unowned" /var/log/journal. Maybe systemd package
    should own the directory, and only adjust the permissions in
    postinst. LP: #1754332

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Fri, 16 Mar 2018 18:36:56 +0000

livecd-rootfs (2.510) bionic; urgency=medium

  * Rename the directory containing the systemd override file for subiquity to
    the correct name :/
  * Add Environment=SNAP_REEXEC=0 to the above override file.
  * Remove the snap.subiquity.started overrides, that service is long gone.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 15 Mar 2018 14:09:57 +1300

livecd-rootfs (2.509) bionic; urgency=medium

  [ Steve Langasek ]
  * Properly handle loop device names when there are > 10 devices on the
    system.

  [ Dimitri John Ledkov ]
  * Build EFI armhf images.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Tue, 06 Mar 2018 12:58:46 +0000

livecd-rootfs (2.508) bionic; urgency=medium

  * Use Ubuntu-specific branches when seeding snaps, as required in
    <https://wiki.ubuntu.com/UbuntuSeededSnaps>.
  * Add dependency on distro-info for the above.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 06 Mar 2018 10:15:43 +0100

livecd-rootfs (2.507) bionic; urgency=medium

  * ubuntu-server: generate multi-lowerdir overlayfs for
    maas-rack-controller, and full maas. To be used in subiquity for maas
    install options.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Wed, 28 Feb 2018 13:11:03 +0000

livecd-rootfs (2.506) bionic; urgency=medium

  * live-build-auto/{build,config}: Support fetching a file from the seed
    mirror (BASE_SEED.minimal-remove) and putting it into the livefs build as
    filesystem.manifest-minimal-remove. It's intended for ubiquity to read
    this file as a list of packages to remove when doing a 'minimal' desktop
    installation.

 -- Iain Lane <iain.lane@canonical.com>  Fri, 23 Feb 2018 15:37:42 +0000

livecd-rootfs (2.505) bionic; urgency=medium

  * Move casper from filesystem.squashfs to installer.squashfs.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Fri, 23 Feb 2018 16:54:51 +1300

livecd-rootfs (2.504) bionic; urgency=medium

  * Override JobRunningTimeoutSec to 0s on the .device unit that
    subiquity_config.mount depends on to avoid a 5s delay on switching to a
    new VT when there is no device there (LP: #1750117)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 21 Feb 2018 10:39:58 +1300

livecd-rootfs (2.503) bionic; urgency=medium

  * Install linux-signed-generic in the live-server image. (LP: #1749065)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 15 Feb 2018 09:54:14 +1300

livecd-rootfs (2.502) bionic; urgency=medium

  * Shuffle subiquity service definition to a mix of a snapd-generated service
    file (from the subiquity snap) and an overlay (in this package).

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 14 Feb 2018 12:46:06 +1300

livecd-rootfs (2.501) bionic; urgency=medium

  * Stop building ova, vmdk, vagrant images on i386.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Mon, 12 Feb 2018 11:24:49 +0000

livecd-rootfs (2.500) bionic; urgency=medium

  * Disable the snapd.refresh.timer in the live server session.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 08 Feb 2018 13:43:12 +1300

livecd-rootfs (2.499) bionic; urgency=medium

  * live-build/auto/config: Take into account SUBPROJECT when setting seeded
    snaps, and also make sure we can work with snaps seeded in project hooks.

 -- Mathieu Trudel-Lapierre <cyphermox@ubuntu.com>  Tue, 06 Feb 2018 23:37:32 -0500

livecd-rootfs (2.498) bionic; urgency=medium

  * Don't write config/seeded-snaps if no snaps have been seeded.

 -- Iain Lane <iain.lane@canonical.com>  Thu, 01 Feb 2018 11:52:56 +0000

livecd-rootfs (2.497) bionic; urgency=medium

  * live-build/auto/config: Clean out unused hostname matches and fix indenting.
  * live-build/auto/config: Reinstate hostname filtering for "*.buildd", which
    is the correct match for non-lxd builders, and add "lp-*" for the lxd ones.
  * live-build/auto/config: Fix incorrect quoting causing a skipped if statement
    in non-live ubuntu-server builds since sometime in mid-October of last year.

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 31 Jan 2018 20:54:54 -0700

livecd-rootfs (2.496) bionic; urgency=medium

  * Update hostname matches for launchpad buildds to match current practice,
    fixing build failures due to LP being unable to reach
    people.canonical.com.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 31 Jan 2018 16:41:23 -0800

livecd-rootfs (2.495) bionic; urgency=medium

  * Set ports/archive as appropriate for default mirror - should fix
    autopkgtests.

 -- Iain Lane <iain.lane@canonical.com>  Wed, 31 Jan 2018 09:38:07 +0000

livecd-rootfs (2.494) bionic; urgency=medium

  * Run subiquity on any serial consoles that the user told systemd
    about.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Wed, 31 Jan 2018 21:58:33 +1300

livecd-rootfs (2.493) bionic; urgency=medium

  * Set a default archive mirror - needed for germinate.

 -- Iain Lane <iain.lane@canonical.com>  Tue, 30 Jan 2018 15:08:23 +0000

livecd-rootfs (2.492) bionic; urgency=medium

  * Oops. I shouldn't reference my private stuff.

 -- Iain Lane <iain.lane@canonical.com>  Tue, 30 Jan 2018 11:51:19 +0000

livecd-rootfs (2.491) bionic; urgency=medium

  * Support seeding of snaps, as emitted by germinate >= 2.27.

 -- Iain Lane <iain.lane@canonical.com>  Tue, 30 Jan 2018 11:20:28 +0000

livecd-rootfs (2.490) bionic; urgency=medium

  * ubuntu-cpc: Initramfs compression should match default for
    update-initramfs (LP: #1744114)

 -- Robert C Jennings <robert.jennings@canonical.com>  Mon, 29 Jan 2018 12:15:17 -0500

livecd-rootfs (2.489) bionic; urgency=medium

  [ Balint Reczey ]
  * Revert to building minimized and not minimimized images with the same
    ~2.2 GiB size
  * Stop suggesting partimage which is not used anymore
  * Drop Nexus 7 support

  [ Steve Langasek ]
  * Add support for passing snap channel to ubuntu-core image builds.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 12 Jan 2018 15:04:42 -0800

livecd-rootfs (2.488) bionic; urgency=medium

  * Enable systemd-networkd by default for live-server installs.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 04 Jan 2018 09:36:56 +1300

livecd-rootfs (2.487) bionic; urgency=medium

  * Drop android-tools-fsutils dependency, and instead install it on
    demand for the nexus7 sub-arch. This target is no longer produced,
    thus by doing this android-tools can fall out of main to universe.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Mon, 11 Dec 2017 12:22:36 +0000

livecd-rootfs (2.486) bionic; urgency=medium

  [ Michael Hudson-Doyle ]
  * Install grub-ieee1275 instead of grub2 on ppc64el; grub2 is a dummy
    transitional package in universe.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 06 Dec 2017 14:22:43 -0800

livecd-rootfs (2.485) bionic; urgency=medium

  [ Michael Hudson-Doyle ]
  * Automount a partition of fixed UUID for giving subiquity canned answers.

  [ Balint Reczey ]
  * Use default xz compression (-6) for raspi2 image.
    Xz with -0 generated ~35% bigger compressed image. (LP: #1732681)
  * Zero fill space in UEFI partitions, too
  * Set LB_ISO_PREPARER to livecd-rootfs to avoid unbound variable in
    default string
  * Build minimized images in a 1GiB image

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Mon, 04 Dec 2017 10:51:13 +1300

livecd-rootfs (2.484) bionic; urgency=medium

  [ Balint Reczey ]
  * Skip setting up initrd for s390x when it is not generated for the image.
    This fixes building minimized s390x images.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 14 Nov 2017 16:58:34 -0800

livecd-rootfs (2.483) bionic; urgency=medium

  * Fix lingering reference to livecd-rootfs.ubuntu-core.model-assertion
    that breaks the ubuntu-core image build.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 13 Nov 2017 09:15:13 -0800

livecd-rootfs (2.482) bionic; urgency=medium

  * Remove boot/grub leftovers from our root squashfs, left behind after
    grub purge.
  * Remove apt, debconf, dpkg cruft files from /var/cache and /var/lib in all
    our livefses.
  * Pass --cache false to lb config; otherwise we copy around caches of
    .debs that are never used properly, and which prevent us from emptying
    /var/cache/apt in images.
  * When building minimized cloud images, remove various packages that we
    don't want installed by default.  Some are tools that aren't needed for
    non-interactive use; some are libraries whose reverse-dependencies
    will have already been removed; and one, open-vm-tools, should only be
    included in images that are targeted to VMWare (which is not the case
    for any of the current minimal images), rather than being included
    directly in the cloud-image seed.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 09 Nov 2017 23:49:43 -0800

livecd-rootfs (2.481) bionic; urgency=medium

  * The target for x86 ubuntu-core images is VMs, so create them with
    a buffer of free space in order to work if booted in place.
  * ubuntu-image now produces a manifest file listing the snap revisions
    used; publish this so that it's picked up by launchpad-buildd.
  * Change ubuntu-core image builds to use the standard "$PREFIX" naming for
    artifacts instead of being gratuitously different; requires a matching
    change to ubuntu-cdimage.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 09 Nov 2017 23:29:50 -0800

livecd-rootfs (2.480) bionic; urgency=medium

  [ Gary Wang ]
  * Add the IMAGEFORMAT=none to support generating a single rootfs.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 06 Nov 2017 11:12:45 -0800

livecd-rootfs (2.479) bionic; urgency=medium

  * Purge initramfs-tools from minimized images.
  * Make sure to remove any initramfs that was generated in a minimized
    image.
  * divert /usr/bin/systemd-detect-virt as part of the grub diversions, so
    that the grub kernel postinst hook is operational when we're building
    in a container.  LP: #1729034.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 31 Oct 2017 09:58:35 -0700

livecd-rootfs (2.478) artful; urgency=medium

  [ Michael Hudson-Doyle ]
  * Two last minute server-live fixes:
    - Seed the subiquity snap to track the stable channel (LP: #1724410)
    - Remove snap.subiquity.started from subiquity's After=/Requires= as it
      does not fix the race condition they were intended to address and causes
      subiquity to be killed when snapd refreshes subiquity (LP: #1724411)

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 17 Oct 2017 22:08:38 -0700

livecd-rootfs (2.477) artful; urgency=medium

  * Fix server live image to pull subiquity from the stable channel, not
    from edge.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sun, 15 Oct 2017 13:44:56 -0700

livecd-rootfs (2.476) artful; urgency=medium

  * snap.subiquity.started.service must be RemainAfterExit=yes to satisfy
    the service dependencies.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 12 Oct 2017 09:23:52 -0400

livecd-rootfs (2.475) artful; urgency=medium

  * Add the SNAP_REEXEC=0 enviroment to the subiquity service as well.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 12 Oct 2017 00:32:46 -0400

livecd-rootfs (2.474) artful; urgency=medium

  * Fix wrong variable name in systemd unit snippets.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 11 Oct 2017 18:24:21 -0400

livecd-rootfs (2.473) artful; urgency=medium

  [ Balint Reczey ]
  * Clean up dangling /boot/initrd.img symlink when needed
  * Revert ignoring failure of minimized autopkgtest on ppc64el
  * Use kvm kernel only on amd64
  * Skip installing server task when building minimial images

  [ Steve Langasek ]
  * export SNAP_REEXEC=0 to our snappy systemd units in the livefs overlay,
    to work around apparmor not working reliably against aufs.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 11 Oct 2017 12:46:14 -0400

livecd-rootfs (2.472) artful; urgency=medium

  [ Michael Hudson-Doyle ]
  * Add snap.subiquity.started.service to subiquity.service's Requires=.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 10 Oct 2017 18:41:01 -0400

livecd-rootfs (2.471) artful; urgency=medium

  * Now that grub-related diversions have been factored out in 2.466
    instead of having bogus root=stuff arg generated in grub.cfg, it is
    actually empty. Therefore update the sed command to make the arg in
    the root= token optional. This should resolve non-booting livecd cpc
    images.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Tue, 10 Oct 2017 13:26:21 +0100

livecd-rootfs (2.470) artful; urgency=medium

  * Add initial support for preinstallation of snaps in images, and
    preinstall pulsemixer in the Ubuntu MATE image.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sun, 08 Oct 2017 21:49:09 -0400

livecd-rootfs (2.469) artful; urgency=medium

  * Unminimization information should only go to motd when we are actually
    minimized.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sun, 08 Oct 2017 16:08:10 -0400

livecd-rootfs (2.468) artful; urgency=medium

  [ Dimitri John Ledkov ]
  * Drop obsolete fix-ups of resolv.conf, debootstrap should now result in
    correct symlink to resolved without any further fixes.

  [ Michael Hudson-Doyle ]
  * Have subiquity.service order after on a service defined by the subiquity
    snap, which in turn will order after the job that mounts the subiquity
    snap. (LP: #1721414)

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Fri, 06 Oct 2017 12:52:43 +1300

livecd-rootfs (2.467) artful; urgency=medium

  * fix remaining wrong references to /etc/default/grub.d/40-partuuid

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 04 Oct 2017 23:52:21 -0700

livecd-rootfs (2.466) artful; urgency=medium

  * ubuntu-server: drop hard-coded test key from the subiquity overlay in
    favor of the generic-classic assertion from the store.
  * move snap assertion handling into the generic build script (and, in
    the process, from the subiquity overlay to the base squashfs).
  * add ubuntu-mate to the set of projects we add snap model assertions to.
  * Factor out grub-related diversions and use them consistently, so we
    don't end up with wrong os-probe output in our grub.cfg.
  * Fix the force-partuuid handling to create the file under
    /etc/default/grub.d/ with a .cfg extension as grub expects; it's unclear
    how this ever worked without.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 04 Oct 2017 23:02:36 -0700

livecd-rootfs (2.465) artful; urgency=medium

  * Skip installation of kernel headers for all minimal images
  * Use the kvm kernel flavor for minimized cloud image where available,
    not virtual.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 04 Oct 2017 10:31:20 -0700

livecd-rootfs (2.464) artful; urgency=medium

  * Ignore failure of new autopkgtest on ppc64el, where it's not a
    regression.
  * Use /bin/sh, not /bin/bash, for autopkgtest.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sun, 01 Oct 2017 13:39:20 -0700

livecd-rootfs (2.463) artful; urgency=medium

  [ Balint Reczey ]
  * Bump needed live-build version which can build images without initrd
  * Mention unminimize script in motd
  * Warn users that unminimize may fail reinstalling packages
  * Use SUBPROJECT=minimized name instead of SUBPROJECT=minimize for
    consistency
  * Run autopkgtest for SUBPROJECT=minimized
  * When SUBPROJECT environment variable is not set assume it to be ""

  [ Michael Hudson-Doyle ]
  * Fix path to subiquity-loadkeys

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 29 Sep 2017 17:33:02 -0400

livecd-rootfs (2.462) artful; urgency=medium

  * Fix a reference to an undefined variable in a script that's set -u.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 29 Sep 2017 15:10:47 -0400

livecd-rootfs (2.461) artful; urgency=medium

  * In subiquity, loadkeys to setup Shift+Tab key combination.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Thu, 28 Sep 2017 13:58:43 -0400

livecd-rootfs (2.460) artful; urgency=medium

  [ Steve Langasek ]
  * Begin adding support for a project-independent 'minimize' subproject, which
    (ironically) omits ubuntu-minimal in favor of using only the minbase
    package set.
  * Export the subproject into config/chroot and config/binary, so that this
    information is available to per-project hooks that need to be
    subproject-aware (e.g., to skip steps when SUBPROJECT=minimize)
  * Make the 999-cpc-fixes.chroot subproject-aware, so we don't try to
    locale-gen
  * In a cloud environment, we can rely on the kernel being able to boot the
    root filesystem directly, without an initramfs; enable this when building
    minimized.
  * If we're using SUBPROJECT=minimize, and tzdata is not installed, remove
    files that have been left behind.  This is a workaround for a bug that
    should be fixed in tzdata.

  [ Balint Reczey ]
  * Mount using --make-rslave to ensure safe unmounts for rbind mounts
  * Don't ask for password and GECOS while creating vagrant user
  * Drop man pages and most of the documentation from minimized images
    /usr/share/doc/*/copyright and changelog.Debian.gz files are still kept
  * Add unminimize script for reverting minimization on running system
  * Install ubuntu-minimal while unminimizing the system

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 28 Sep 2017 09:24:30 -0400

livecd-rootfs (2.459) artful; urgency=medium

  [ Steve Langasek ]
  * Remove spurious call to 'sync'; we don't need to flush all disk caches
    on the system to cleanly unmount a partition.

  [ Michael Hudson-Doyle ]
  * only show alert (i.e. panic) kernel messages on the console when
    subiquity is running

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Thu, 21 Sep 2017 11:34:20 +1200

livecd-rootfs (2.458) artful; urgency=medium

  * Move default netplan config for server-live image to where hook will
    pick it up.

 -- Michael Hudson-Doyle <mwhudson@debian.org>  Mon, 18 Sep 2017 10:47:59 +1200

livecd-rootfs (2.457) artful; urgency=medium

  * Enable systemd-networkd by default.
    - Usually, netplan's systemd-generator enables systemd-networkd and
    systemd-networkd-wait-online on boot. But netplan configuration is not
    yet generated at that point by cloud-init. Cloud-init generates in the
    network-pre.target and expects the network.target /
    network-online.target to work. These are already part of the ongoing
    systemd transaction, thus cannot be injected into the boot-sequency by
    cloud-init local mode. Therefore make sure cloud images include
    networkd in the initial boot transaction.
    - src:systemd will shortly not enable networkd unconditionally by
    default.
  * Drop ifupdown e-n-i configuration files, no longer used.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Sun, 17 Sep 2017 15:17:45 +0100

livecd-rootfs (2.456) artful; urgency=medium

  * Improve teardown_mountpoint to recursively find all submounts and
    unmount them, instead of working from a hard-coded list.  This makes
    the code resilient against other submounts being added later, including
    downstream.
  * Also nuke the sleep / udevadm settle calls in the process, which should
    never be required and slow down the builds.

  [ Michael Hudson-Doyle ]
  * set a default netplan config of dhcp-on-ethernet for the server live image

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 13 Sep 2017 22:35:03 -0700

livecd-rootfs (2.455) artful; urgency=medium

  * Restore the call to 'umount -R $mountpoint' from umount_partition,
    accidentally dropped in previous upload.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 13 Sep 2017 12:50:10 -0700

livecd-rootfs (2.454) artful; urgency=medium

  [ Steve Langasek ]
  * live-build/functions: mount tmpfs on /var/cache/apt and var/lib/apt, so
    we don't have to leave empty space in our derivative images for packages
    that have been downloaded/installed/removed.  This normally isn't
    relevant for the installed system, since the root filesystem will
    auto-expand in place on the target disk, but lets us ship smaller
    images.
  * live-build/functions: also call 'apt-get update' after mounting the
    blank /var/lib/apt.
  * live-build/ubuntu-cpc/hooks/033-disk-image-uefi.binary: call apt-get
    update *before* installing packages, not after.

  [ Robert C Jennings ]
  * live-build/ubuntu-cpc/functions: Add a function, teardown_mountpoint,
    to reverse the work done in setup_mountpoint.  Lack of this function
    has forced users of setup_mountpoint to implement this separately
    and the implementations have diverged. (LP: #1716992)
  * live-build/ubuntu-cpc/functions: Remove umount_settle function.
    The was only used where teardown_mountpoint was lacking.

  [ Steve Langasek ]
  * Also adjust live-build/ubuntu-server/hooks/032-installer-squashfs.binary
    to use teardown_mountpoint.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 13 Sep 2017 12:04:48 -0700

livecd-rootfs (2.453) artful; urgency=medium

  [ Chris Glass ]
  * Create vagrant user for vagrant image, per upstream requirements.

  [ Colin Watson ]
  * Mount and unmount /dev recursively, to cope with setups where there are
    interesting bind-mounts under /dev (e.g. loop devices bind-mounted by
    LXD).  LP: #1716465.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 11 Sep 2017 11:39:11 -0700

livecd-rootfs (2.452) artful; urgency=medium

  * Fix suppressing kpartx error

 -- Balint Reczey <rbalint@ubuntu.com>  Tue, 29 Aug 2017 16:18:36 +0200

livecd-rootfs (2.451) artful; urgency=medium

  * Fix a reference to an undefined variable in the ubuntu-cpc hooks,
    introduced by the previous upload.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 25 Aug 2017 14:28:43 -0700

livecd-rootfs (2.450) artful; urgency=medium

  [ Steve Langasek ]
  * Set a default locale of C.UTF-8 in the cloud images.

  [ Mathieu Trudel-Lapierre ]
  * Drop special handling of grub modules.  Modules should be included in
    the signed grub binaries when necessary.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 23 Aug 2017 17:27:53 -0700

livecd-rootfs (2.449) artful; urgency=medium

  [ Balint Reczey ]
  * Use VMDKstream in a more future-proof way

  [ Dimitri John Ledkov ]
  * Drop creating upstart jobs for serial getty.

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Mon, 14 Aug 2017 17:02:53 +0100

livecd-rootfs (2.448) artful; urgency=medium

  [ Balint Reczey ]
  * Depend on packages in main instead of installing them at runtime
  * Depend on vmdk-stream-converter instead of installing it at run time
  * Use xz -T4 -0 instead of pxz (LP: #1701132)
    Supported xz versions before 5.2 also accept the -T4 option but ignore
    it.
  * Depend on xz-utils instead of pxz

  [ Mathieu Trudel-Lapierre ]
  * auto/config: enable Debug::pkgDepCache::AutoInstall so tracking down
    dependency bugs in the livefs is a little clearer.

  [ Robert C Jennings ]
  * live-build/functions: Update path for VMDKstream.py (LP: #1706116)

 -- Brian Murray <brian@ubuntu.com>  Mon, 24 Jul 2017 11:06:24 -0700

livecd-rootfs (2.447) artful; urgency=medium

  * Add cm3 as a known ubuntu-core image type.  LP: #1698223.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 15 Jun 2017 23:36:44 -0700

livecd-rootfs (2.446) artful; urgency=medium

  * Build ubuntu back with tasks. The metapackage switch was due to g++
    transition and needed some additional hint. This is adding maintenance
    and as mentioned in 2.335, we can revert this.

 -- Didier Roche <didrocks@ubuntu.com>  Fri, 02 Jun 2017 15:08:29 +0200

livecd-rootfs (2.445) artful; urgency=medium

  * Resurrect Balint's fix from
    lp:~rbalint/livecd-rootfs/livecd-rootfs-autopkgtest-fix to wrap kpartx
    and trap spurious errors, since the problem is still being seen
    intermittently on i386 despite us calling sync before kpartx.

  [ Mathieu Trudel-Lapierre ]
  * Use ubuntu-server as the user for autologin on ubuntu-server live images.

  [ Simon Quigley ]
  * Use the correct task for lubuntu-next.
  * Use --no-install-recommends for lubuntu-next, consistent with lubuntu.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 23 May 2017 15:56:52 -0700

livecd-rootfs (2.444) artful; urgency=medium

  * For now, make sure all automated image builds are on the edge channel.
    Eventually we will want to pass the channel as build metadata instead.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 28 Apr 2017 18:22:45 -0700

livecd-rootfs (2.443) artful; urgency=medium

  * Mark autopkgtests isolation-machine since debootstrap won't work in a
    container.
  * Use xz to compress ubuntu-image .img files before transfer, so that we
    have smaller downloads and retain file sparseness everywhere.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 28 Apr 2017 17:50:07 -0700

livecd-rootfs (2.442) artful; urgency=medium

  [ Robert Jennings ]
  * live-build/ubuntu-cpc/hooks/060-ipv6.chroot: remove faulty release
    comparison prior to aa-series (LP: #1681548)
  * live-build/ubuntu-cpc/hooks/999-extras.binary: Exit on first failure

  [ Balint Reczey ]
  * sync before calling kpartx to let writing to loop devices finish
  * Sort and list dependencies nicely
  * Require PROJECT environment to be set for lb build
  * Allow overwriting IMAGEFORMAT even for ubuntu-cpc and ubuntu-server
  * Optionally use ubuntu-image for building snap based images

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 28 Apr 2017 15:15:12 -0700

livecd-rootfs (2.441.2) zesty; urgency=medium

  * The ubuntu-server:live should use a casper-based initramfs to work
    correctly. (LP: #1682460)

 -- Mathieu Trudel-Lapierre <cyphermox@ubuntu.com>  Tue, 18 Apr 2017 09:56:31 -0400

livecd-rootfs (2.441.1) zesty; urgency=medium

  * Setup kernel properly for ubuntu-server:live; we *do* want to build
    kernel-generic and initrd-generic for this image. (LP: #1682460)

 -- Mathieu Trudel-Lapierre <cyphermox@ubuntu.com>  Thu, 13 Apr 2017 11:14:09 -0400

livecd-rootfs (2.441) zesty; urgency=medium

  [ Balint Reczey ]
  * Add a basic but configurable autopkgtest.

  [ Mathieu Trudel-Lapierre ]
  * Add ubuntu-server:live for a subiquity-based server image.
  * Refactor functions out of ubuntu-cpc and ubuntu-server hooks.

 -- Mathieu Trudel-Lapierre <cyphermox@ubuntu.com>  Wed, 12 Apr 2017 19:37:08 -0400

livecd-rootfs (2.440) zesty; urgency=medium

  [ Steve Langasek ]
  * live-build/ubuntu-cpc/functions: don't call sleep as part of
    umount_settle; udevadm settle is synchronous and there's no reason to
    sleep after it.
  * live-build/ubuntu-cpc/functions: umount_partition: don't call
    umount_settle for each submount; just unmount them one by one and
    settle at the end.
  * Support passing IMAGE_TARGETS in the environment, to limit which images
    are output as part of a build; particularly useful for ubuntu-cpc builds
    which output multiple image types.

  [ Nishanth Aravamudan ]
  * live-build/ubuntu-cpc/hooks/061-open-iscsi.chroot: generate iSCSI
    Initiator Name at first iscsid run for cloud images to ensure it is
    unique (LP: #1444992).

  [ Brian Murray ]
  * Fix the OVF's metadata to include Ubuntu specific identifiers and
    descriptions instead of the generic Linux ones. Thanks to Chris Glass.
    (LP: #1656293)
  * Add replace_grub_root_with_label function thereby consolidating multiple
    uses of the same calls to sed. Thanks to Dan Watkins.

  [ Adam Conrad ]
  * Set device_tree_address for the new kernel in the RPi bootloader config.txt

 -- Adam Conrad <adconrad@ubuntu.com>  Thu, 23 Mar 2017 11:39:22 -0600

livecd-rootfs (2.439) zesty; urgency=medium

  * Fix the manifest generation in OVA files so that ovf files don't have
    double extensions.  Thanks to Chris Glass.  (LP: #1627931)

 -- Brian Murray <brian@ubuntu.com>  Fri, 03 Feb 2017 13:32:59 -0800

livecd-rootfs (2.438) zesty; urgency=medium

  * live-build/auto/config: Add ubuntu-budgie project (LP: #1652144)

 -- David Mohammed <fossfreedom@ubuntu.com>  Thu, 22 Dec 2016 18:51:29 +0000

livecd-rootfs (2.437) zesty; urgency=medium

  * live-build/auto/config: Don't remove .pyc files any more - we don't care
    *that* much about the small space gain these days, and would prefer the
    speed win. (LP: #1627190)

 -- Iain Lane <iain.lane@canonical.com>  Fri, 04 Nov 2016 11:02:13 +0000

livecd-rootfs (2.436) zesty; urgency=medium

  [ Robert C Jennings ]
  * ubuntu-cpc: Remove redundant copy of grub files.

 -- Mathieu Trudel-Lapierre <cyphermox@ubuntu.com>  Fri, 28 Oct 2016 21:49:42 -0400

livecd-rootfs (2.435) yakkety; urgency=medium

  * Update the ubuntu-touch hints to try installing ubuntu-system-settings
    instead of ubuntu-system-settings-online-accounts as this makes the dep
    resolver more happy on amd64/i386 systems. This should fix the current
    image build failure for yakkety i386 images.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 10 Oct 2016 14:41:46 +0200

livecd-rootfs (2.434) yakkety; urgency=medium

  * Update the 00-uid-gid-fix.chroot_early hook for touch to include the new
    known good bootstrap hash values.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 30 Sep 2016 11:20:22 +0200

livecd-rootfs (2.433) yakkety; urgency=medium

  * Use the virtual kernel for the arm64 cpc images instead of generic.

 -- Adam Conrad <adconrad@ubuntu.com>  Thu, 22 Sep 2016 21:54:16 -0600

livecd-rootfs (2.432) yakkety; urgency=medium

  * Use the virtual kernel for the powerpc64 cpc images (LP: #1625368)

 -- Adam Conrad <adconrad@ubuntu.com>  Mon, 19 Sep 2016 16:55:40 -0600

livecd-rootfs (2.431) yakkety; urgency=medium

  [ Łukasz 'sil2100' Zemczak ]
  * Temporarily change the 60-install-click.chroot script to pull in clicks for
    arm64 builds from a different location for ubuntu-touch.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 14 Sep 2016 14:27:40 -0500

livecd-rootfs (2.430) yakkety; urgency=medium

  [ Michael Vogt ]
  * live-build/ubuntu-core/hooks/01-setup_user.chroot:
    - do not create "ubuntu" user for ubuntu-core anymore, the
      console-conf package will create this user now
  * live-build/ubuntu-core/hooks/02-add_user_to_groups.chroot
    - dropped

  [ Steve Langasek ]
  * live-build/ubuntu-cpc/hooks/042-vagrant.binary: fix unmount handling
    so that the teardown is done properly /before/ we try to make an
    image from our filesystem, since otherwise /etc/resolv.conf is broken.
    LP: #1621393.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 09 Sep 2016 15:57:27 -0700

livecd-rootfs (2.429) yakkety; urgency=medium

  * live-build/auto/build: Fix typo in netplan policy snippet.
    *brown paperbag* (LP: #1615180)

 -- Martin Pitt <martin.pitt@ubuntu.com>  Sat, 20 Aug 2016 06:56:37 +0200

livecd-rootfs (2.428) yakkety; urgency=medium

  * live-build/auto/build: Move NetworkManager configuration to the right
    place.

 -- Martin Pitt <martin.pitt@ubuntu.com>  Fri, 19 Aug 2016 16:28:23 +0200

livecd-rootfs (2.427) yakkety; urgency=medium

  * live-build/auto/build: If the image pre-installs network-manager, let it
    manage all devices by default by shipping a default netplan policy.
    Installing NM on an existing system only manages wifi and wwan, to avoid
    interfering with networkd managed devices on existing server/cloud
    instances.

 -- Martin Pitt <martin.pitt@ubuntu.com>  Thu, 18 Aug 2016 08:39:36 +0200

livecd-rootfs (2.426) yakkety; urgency=medium

  * live-build/ubuntu-core/hooks/400-create-apt-get-warning.binary
    - use echo to display the error, thanks ogra for pointing that out,
      update the string also to use the new snappy command naming

 -- Sebastien Bacher <seb128@ubuntu.com>  Wed, 17 Aug 2016 15:23:19 +0200

livecd-rootfs (2.425) yakkety; urgency=medium

  * live-build/ubuntu-core/hooks/400-create-apt-get-warning.binary,
    500-create-xdg-wrapper.binary, 700-classic-dir.binary:
    - Correct some syntax errors in the ubuntu-core snap hooks.
    - Create a desktop entry and some mimetype associations for xdg-open in
      ubuntu-core. That way interacting with web, email and documentations
      urls in a snap should do the right thing.

 -- Sebastien Bacher <seb128@ubuntu.com>  Wed, 17 Aug 2016 12:11:19 +0200

livecd-rootfs (2.424) yakkety; urgency=medium

  * Install nplan in the ubuntu-core image.

 -- Michael Hudson-Doyle <michael.hudson@ubuntu.com>  Tue, 16 Aug 2016 10:28:45 +1200

livecd-rootfs (2.423) yakkety; urgency=medium

  [ Simon Quigley ]
  * Add an image for Lubuntu Next (LXQt)

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 12 Aug 2016 13:02:01 -0700

livecd-rootfs (2.422) yakkety; urgency=medium

  * live-build/ubuntu-touch/includes.chroot/etc/lightdm/
    lightdm.conf.d/90-phablet.conf:
    - Don't have Touch greeters show a guest session. Touch isn't ready
      for non-phablet users yet nor a multi-user greeter.

 -- Michael Terry <mterry@ubuntu.com>  Wed, 10 Aug 2016 11:06:32 -0400

livecd-rootfs (2.421) yakkety; urgency=medium

  [ Louis Zuckerman ]
  * Fixes for vagrant box builder in ubuntu-cpc LP: #1565985
    - Install virtualbox-guest-utils
    - Don't disable default synced folder
    - Don't set vm name
    - Add cloud-init config to manage /etc/hosts LP: #1561250

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 21 Jul 2016 09:14:50 -0700

livecd-rootfs (2.420) yakkety; urgency=medium

  [ Łukasz 'sil2100' Zemczak ]
  * Remove the ubuntu-pd project from the scripts
  * Add instead an ubuntu-touch-custom project for custom re-builds of
    ubuntu-touch

  [ Oliver Grawert ]
  * sanitize the version number of the ubuntu-core snap
  * sanitize the version number of the kernel snap

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 19 Jul 2016 13:59:16 +0200

livecd-rootfs (2.419) yakkety; urgency=medium

  [ Daniel Watkins ]
  * Consolidate cloud images
    - Remove .tar.gz and .tar.xz (removed in favour of the squashfs).
    - Remove the MBR-only disk image in favour of the shared GPT/MBR UEFI
      image.
    - Remove '-disk1' from bootable image names.

  [ Phil Roche ]
  * Removed HWCLOCKACCESS=no from /etc/default/rcS (LP: #1581044)

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 28 Jun 2016 16:21:08 -0700

livecd-rootfs (2.418) yakkety; urgency=medium

  * Ubuntu-MATE now does follow Recommends; adjust the configuration for it
    to not pass --no-install-recommends.

 -- Mathieu Trudel-Lapierre <cyphermox@ubuntu.com>  Wed, 22 Jun 2016 13:42:37 -0400

livecd-rootfs (2.417) yakkety; urgency=medium

  * Swap order of security and updates in dvd sources.list.

 -- Adam Conrad <adconrad@ubuntu.com>  Mon, 13 Jun 2016 05:11:00 -0600

livecd-rootfs (2.416) yakkety; urgency=medium

  * Fix security mirror sources.list entries for non-x86 architectures.

 -- Adam Conrad <adconrad@ubuntu.com>  Mon, 13 Jun 2016 02:20:02 -0600

livecd-rootfs (2.415) yakkety; urgency=medium

  [ Michael Vogt ]
  * add var/lib/snapd/classic in ubuntu-core

  [ Daniel Watkins ]
  * Don't overwrite the default sources.list in cloud images.
  * Replace sources.list generated using COMPONENTS with the sources.list from
    an Ubuntu Server installation (i.e. with all components enabled, and all
    deb-src lines commented).

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 08 Jun 2016 12:59:38 -0700

livecd-rootfs (2.414) yakkety; urgency=medium

  * Update post-debootstrap hashes for ubuntu-touch.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 07 Jun 2016 11:18:54 +0200

livecd-rootfs (2.413) yakkety; urgency=medium

  * name switch from ubuntu-core to just core was postponed ... temporarily
    revert this bit til we have the necessary snapd bits in place.

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 30 May 2016 17:43:40 +0200

livecd-rootfs (2.412) yakkety; urgency=medium

  * rename the ubuntu-core snap to simply be "core", update the package
    summary too

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 27 May 2016 10:45:38 +0200

livecd-rootfs (2.411) yakkety; urgency=medium

  [ Michael Vogt ]
  * update kernel snap building to match the new kernel policy
  * system-image: add /usr/local/bin/xdg-open dbus helper

  [ Oliver Grawert ]
  * add u-boot-tools to all snappy arches
  * drop flash-kernel from snappy, it is useless there
  * create /boot/uboot dir on all arches and configure /etc/fw_env.config
    everywhere
  * adjust motd message on snappy (capitalize "Snappy Ubuntu Core" and replace
    the "snappy --help" with "snap --help"

  [ Adam Conrad ]
  * Stop explicitly removing systemd-sysv for touch.
  * Move touch resolution hints to a HINTS variable, and adjust for use
    on dual-stack gl/gles arches where things don't quite work right.

 -- Adam Conrad <adconrad@ubuntu.com>  Thu, 26 May 2016 21:05:28 -0600

livecd-rootfs (2.410) yakkety; urgency=medium

  * Rename old ubuntu-core tarballs to ubuntu-base to avoid confusion.
  * Drop special-casing of ubuntu-core:system-image in places, now that
    ubuntu-core unambiguously refers to the snappy Ubuntu Core image.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 09 May 2016 16:32:58 -0700

livecd-rootfs (2.409) yakkety; urgency=medium

  [ Michael Vogt ]
  * add meta/kernel.yaml to the kernel snaps

  [ Łukasz 'sil2100' Zemczak ]
  * Add the new dhcpd user introduced by latest archive changes.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 04 May 2016 12:49:23 +0200

livecd-rootfs (2.408) xenial; urgency=medium

  * drop linux-firmware-raspi2, it does not actually contain driver
    firmware but bootloaders (and fails to install if its target dir
    is missing).

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 21 Apr 2016 14:15:21 +0200

livecd-rootfs (2.407) xenial; urgency=medium

  [ Colin Watson ]
  * Add a basic build-time syntax check for live-build/auto/*.

  [ Oliver Grawert ]
  * add multiverse to sources.list for snappy kernel builds

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 21 Apr 2016 10:53:12 +0200

livecd-rootfs (2.406) xenial; urgency=medium

  * Fix syntax error.

 -- Iain Lane <iain@orangesquash.org.uk>  Wed, 20 Apr 2016 21:13:23 +0100

livecd-rootfs (2.405) xenial; urgency=medium

  * move the snappy kernel builds to the correct linux-image-$arch and
    linux-firmware-$arch metapackages

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 20 Apr 2016 19:34:11 +0200

livecd-rootfs (2.404) xenial; urgency=medium

  * Follow linux-firmware-raspi2 renaming in the archive for raspi2 images.

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 20 Apr 2016 10:49:02 -0600

livecd-rootfs (2.403) xenial; urgency=medium

  * Follow up on recent changes from the new network-manager packages and add
    the nm-openvpn user to touch. This should essentially fix the image build
    failures.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Mon, 18 Apr 2016 12:27:04 +0200

livecd-rootfs (2.402) xenial; urgency=medium

  * Update the passwd, shadow, group and gshadow bootstrap hashes for touch.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 15 Apr 2016 13:52:56 +0200

livecd-rootfs (2.401) xenial; urgency=medium

  * Re-enable systemd predictable network interface naming on cloud-images
  * Stop creating default configuration for eth0 (LP: #1563487)

 -- Daniel Watkins <daniel.watkins@canonical.com>  Thu, 14 Apr 2016 14:47:42 -0400

livecd-rootfs (2.400) xenial; urgency=medium

  * Transition from ubuntu-snappy to ubuntu-core-snapd-units and snapd.

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 13 Apr 2016 22:57:39 -0600

livecd-rootfs (2.399) xenial; urgency=medium

  [ Oliver Grawert ]
  * live-build/ubuntu-core/hooks/25-create-generic-initrd.chroot:
    kill the snappy os build if the initramfs-tools-ubuntu-core package
    is not found
  * make s390x known to the snappy builds
  * skip kernel snap an device tarball builds for s390x and ppc64el
  * drop listing of the device tarballs, this was only for debugging

  [ Adam Conrad ]
  * live-build/ubuntu-cpc/hooks/032-disk-image.binary: Install s390-tools
    and sysconfig-hardware before we attempt to configure zipl.

 -- Oliver Grawert <ogra@ubuntu.com>  Sun, 10 Apr 2016 17:23:05 +0200

livecd-rootfs (2.398) xenial; urgency=medium

  * switch snappy package builds from "snappy build" to "snapcraft snap"
  (LP: #1557515)

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 08 Apr 2016 16:45:48 +0200

livecd-rootfs (2.397) xenial; urgency=medium

  * live-build/ubuntu-core/hooks/25-create-generic-initrd.chroot:
    create a generic initrd inside the snappy os-snap so we do not need the
    hackish ubuntu-core-generic-initrd package anymore.

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 07 Apr 2016 17:21:13 +0200

livecd-rootfs (2.396) xenial; urgency=medium

  [ Adam Conrad ]
  * Remove obsolete pvr-omap4 special-casing to simplify configs.

  [ Daniel Watkins ]
  * Enable building of powerpc cloud images.

 -- Adam Conrad <adconrad@ubuntu.com>  Sun, 03 Apr 2016 02:39:50 -0600

livecd-rootfs (2.395) xenial; urgency=medium

  * create /etc/cloud/cloud.cfg.d/99-snappy-disable-network-config.cfg on
    snappy so we do not end up with broken network config after cloud-init
    ran (LP: #1563296).

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 01 Apr 2016 16:31:50 +0200

livecd-rootfs (2.394) xenial; urgency=medium

  [ Xavi Garcia ]
  * Adding a new hook to change the configuration file for upower.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Wed, 30 Mar 2016 16:20:20 +0200

livecd-rootfs (2.393) xenial; urgency=medium

  * actually make the /etc/mtab link relative (LP: #1547033)

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 24 Mar 2016 13:27:01 +0100

livecd-rootfs (2.392) xenial; urgency=medium

  * move mtab link to point to /proc/self/mounts instead of /proc/mounts
    (LP: #1547033) in snappy builds

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 22 Mar 2016 13:16:59 +0100

livecd-rootfs (2.391) xenial; urgency=medium

  * adjust snap versions to only have one dash and use plus chars instead

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 21 Mar 2016 17:36:47 +0100

livecd-rootfs (2.390) xenial; urgency=medium

  * add link for wlan mac address in dragonboard kernel snaps
  * move dragonboard kernel snap to linux-snapdragon (with a currently hardcoded
    version due to missing -meta package for this kernel, don't do that at
    home !)

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 16 Mar 2016 14:28:22 +0100

livecd-rootfs (2.389) xenial; urgency=medium

  * Follow rename of ubuntustudio-font-meta to ubuntustudio-fonts.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 16 Mar 2016 10:45:40 +0000

livecd-rootfs (2.388) xenial; urgency=medium

  * add support for dragonboard kernel snap
  * remove  grub-efi-arm64 to the arm64 OS snap as it breaks uboot

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 15 Mar 2016 13:21:25 +0100

livecd-rootfs (2.387) xenial; urgency=medium

  * Move the new touch click apps (unav, dekko, calendar) to the custom
    tarball.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Tue, 15 Mar 2016 12:56:32 +0100

livecd-rootfs (2.386) xenial; urgency=medium

  [ Michael Vogt ]
  * add dpkg.list to assets of the kernel snap
  * add grub-efi-arm64 to the arm64 OS snap

  [ Adam Conrad ]
  * Build raspi2 images with multiverse for firmware.

 -- Adam Conrad <adconrad@ubuntu.com>  Mon, 14 Mar 2016 10:31:55 -0600

livecd-rootfs (2.385) xenial; urgency=medium

  * add snap building for kernel snaps

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 09 Mar 2016 15:58:35 +0100

livecd-rootfs (2.384) xenial; urgency=medium

  * slightly adjust the naming of the OS snap for snappy builds so it becomes
    easier for cdimage to grab and publish it.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 08 Mar 2016 19:43:19 +0100

livecd-rootfs (2.383) xenial; urgency=medium

  * add snap cration for ubuntu-core snappy rootfs builds

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 08 Mar 2016 16:43:45 +0100

livecd-rootfs (2.382) xenial; urgency=medium

  * Remove the manta device from the list of touchsubarches as we're not
    building its kernel anymore.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Fri, 04 Mar 2016 09:47:31 +0100

livecd-rootfs (2.381) xenial; urgency=medium

  [ Ben Howard ]
  * live-build/ubuntu-cpc/hooks/042-vagrant.binary: scope serial device for
    Virtualbox only.

  [ Łukasz 'sil2100' Zemczak ]
  * Update the debootstrap group and gshadow hashes for ubuntu-touch.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@ubuntu.com>  Thu, 03 Mar 2016 10:07:26 +0100

livecd-rootfs (2.380) xenial; urgency=medium

  [ Ben Howard ]
  * live-build/ubuntu-cpc/hooks/042-vagrant.binary: add serial device for
    Vagrant images (LP: #1546108).

  [ Daniel Watkins ]
  * Refactor ubuntu-cpc hooks to hard-code producing an 'ext4' rootfs, which
    is used outside of the livecd-rootfs build process (specifically for EC2
    publication).

 -- Dimitri John Ledkov <xnox@ubuntu.com>  Mon, 22 Feb 2016 19:17:15 +0000

livecd-rootfs (2.379) xenial; urgency=medium

  * add /var/lib/systemd/rfkill to pre-created dirs to use as writable
    mountpoint for bind-mounts in snappy.

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 18 Feb 2016 14:42:29 +0100

livecd-rootfs (2.378) xenial; urgency=medium

  * Add net.ifnames=0 to the raspi2 cmdline injected into raspi2 builds.

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 17 Feb 2016 17:47:26 -0700

livecd-rootfs (2.377) xenial; urgency=medium

  * live-build/ubuntu-cpc/hooks/999-cpc-fixes.chroot: Add fake_cloud_init
    function to create a nocloud data source for cloud images that aren't
    meant to be used on real clouds and use it by default on armhf+raspi2

 -- Adam Conrad <adconrad@ubuntu.com>  Sun, 14 Feb 2016 03:12:37 -0700

livecd-rootfs (2.376) xenial; urgency=medium

  [ Michael Terry ]
  * Change real name for phablet user to "Ubuntu" in ubuntu-touch.

  [ Steve Langasek ]
  * Drop BuildLiveCD from the examples; we now use launchpad-buildd to drive
    livefs builds, so BuildLiveCD is obsolete and misleading.
  * Add hooks to ubuntu-cpc to divert /bin/sync in the chroot and undivert it
    at the end.  This is a general-purpose change that should be applied to
    all flavors and archs, but at the moment it's only needed on armhf+raspi2
    to work around the raspberrypi2-firmware postinst calling sync, which is
    actually warranted in the normal case.
  * If a subarch is specified for a cloud image build, don't build rootfs
    artifacts; these should come from the 'generic' build.
  * Fix architecture handling in hooks.  We know we're always being invoked
    from a launchpad-buildd-like setup, which passes ARCH and SUBARCH in the
    environment, because auto/config and auto/build both rely on this.  So
    don't scatter dpkg --print-architecture calls throughout, especially
    when many of these are not cross-build-aware.
  * Refactor ubuntu-cpc hooks to allow us to handle images where the root
    partition should not be partition 1.

  [ Ben Howard ]
  * ubuntu-cpc: fix hooks/032-disk-image.binary call to
    create_empty_partition, which requires five args due to "-u"
  * ubuntu-cpc: in hooks/030-root-tarball.binary create /lib/modules to fix
    (LP: 1543204).

  [ Dimitri John Ledkov ]
  * Do not remove linux-base, when purging all the linux-*, in the tarball
    build. Otherwise ubuntu-minimal is removed, and things get crazy.
  * Correct initrd.img symlink, kernel/hooks should actually produce the
    right thing here, but meh.
  * Chroot to execute zipl, because it's nice.
  * Use the right loop device to install zipl onto.

  [ Steve Langasek ]
  * Refactor ubuntu-cpc hooks to always produce a 'plain' rootfs via
    live-build and reuse this for the tarball, instead of lb_binary_rootfs
    creating some artifact that we ignore / throw away.
  * Initial support for raspi2 subarch.
  * Import live-build/ubuntu-cpc/hooks/raspi2/mkknlimg from
    https://github.com/raspberrypi/linux/blob/rpi-4.1.y/scripts/mkknlimg
    and use it to install a bootable uboot.bin.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 12 Feb 2016 21:14:49 +0000

livecd-rootfs (2.375) xenial; urgency=medium

  [ Steve Langasek ]
  * Refactor some non-idiomatic architecture handling in
    live-build/ubuntu-cpc/hooks/999-cpc-fixes.chroot that also misidentifies
    the architecture name for armhf.

  [ Ben Howard ]
  * ubuntu-cpc: add missing net.ifnames=0 for ppc64el disk images.

 -- Ben Howard <ben.howard@ubuntu.com>  Thu, 04 Feb 2016 17:15:58 +0100

livecd-rootfs (2.374) xenial; urgency=medium

  [ Michael Vogt ]
  * ubuntu-core:
    - include the dpkg.list in the device tarball
    - store /usr/share/snappy/dpkg.list manifest on the OS tarball

  [ Dimitri John Ledkov ]
  * ubuntu-cpc:
    - exclude s390x from should_install_grub

  [ Steve Langasek ]
  * Refactor/reorder ubuntu-cpc support for consistency with other flavors,
    so that subarch overrides can be applied correctly.

  [ Ben Howard ]
  * ubuntu-cpc:
    - fixed loop setup due to change of kpartx output
    - only use grub-install logic for Intel architectures

 -- Ben Howard <ben.howard@ubuntu.com>  Tue, 02 Feb 2016 10:18:14 -0700

livecd-rootfs (2.373) xenial; urgency=medium

  * Set timeout options so ppc64el cloud images don't display a grub boot
    menu (matching the behaviour of other cloud images).
  * Specify a regex to run-parts so that cloud image extra scripts are found
    and executed.

 -- Daniel Watkins <daniel.watkins@canonical.com>  Thu, 28 Jan 2016 11:51:23 +0000

livecd-rootfs (2.372) xenial; urgency=medium

  * Install grub in ppc64el cloud images so they are bootable (LP: #1538610)

 -- Daniel Watkins <daniel.watkins@canonical.com>  Wed, 27 Jan 2016 16:32:58 +0000

livecd-rootfs (2.371) xenial; urgency=medium

  * Remove unneeded packages from the root.tar.{gz,xz} cloud image targets
    (LP: #1534764).

 -- utlemming Howard <utlemming.howard@ubuntu.com>  Tue, 19 Jan 2016 12:48:32 +0000

livecd-rootfs (2.370) xenial; urgency=medium

  * Produce OVA files for i386 cloud builds.

 -- Daniel Watkins <daniel.watkins@canonical.com>  Wed, 13 Jan 2016 11:51:51 +0000

livecd-rootfs (2.369) xenial; urgency=medium

  [ Łukasz 'sil2100' Zemczak ]
  * Fix the invalid path for the error message in 00-uid-gid-fix.chroot_early
    for ubuntu-touch.

  [ Michael Vogt ]
  * live-build/ubuntu-core/hooks/11-remove-extra-packages.chroot:
    - remove libicu52 hook

  [ Daniel Watkins ]
  * Enable building of s390x cloud images.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 13 Jan 2016 10:29:43 +0000

livecd-rootfs (2.368) xenial; urgency=medium

  * Fix earlier mistake of changing the wrong hashes.

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@canonical.com>  Mon, 14 Dec 2015 10:01:58 +0100

livecd-rootfs (2.367) xenial; urgency=medium

  * Update the passwd/shadow db hashes on ubuntu-touch builds

 -- Łukasz 'sil2100' Zemczak <lukasz.zemczak@canonical.com>  Mon, 14 Dec 2015 09:47:01 +0100

livecd-rootfs (2.366) xenial; urgency=medium

  * also add the new apt user to /etc/passwd in snappy

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 11 Dec 2015 17:34:44 +0100

livecd-rootfs (2.365) xenial; urgency=medium

  * update /etc/shadow on snappy for new apt user

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 11 Dec 2015 12:05:39 +0100

livecd-rootfs (2.364) xenial; urgency=medium

  * ubunut-cpc:
    - extendend hooks/functions to support creation of derivative images
      including mounting images.
    - added the ability to create qcow2 images in hooks/functions
    - simplified loop clean-up in hooks/functions
    - removed assumption that disk1.img would be built
    - switched qcow2 generation to use hooks/functions function

 -- Ben Howard <ben.howard@ubuntu.com>  Thu, 10 Dec 2015 09:10:35 -0700

livecd-rootfs (2.363) xenial; urgency=medium

  * configure /etc/fw_env.config for all arm arches on snappy

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 10 Dec 2015 15:04:41 +0100

livecd-rootfs (2.362) xenial; urgency=medium

  * make sure u-boot-tools is installed on snappy arm64

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 08 Dec 2015 16:47:21 +0100

livecd-rootfs (2.361) xenial; urgency=medium

  * live-build/ubuntu-core/hooks/01-setup_user.chroot:
    make sure the default group is still created when adding the default user
    to adm and sudo groups.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 08 Dec 2015 16:36:34 +0100

livecd-rootfs (2.360) xenial; urgency=medium

  [ Michael Vogt ]
  * live-build/ubuntu-core/hooks/01-setup_user.chroot:
    - add default ubuntu user to "adm" and "sudo" groups

  [ Łukasz 'sil2100' Zemczak ]
  * Fix the previous apt list removal hook. This hook needs to
    be .binary as otherwise we're still left with apt lists when
    the image is published.

 -- Michael Vogt <michael.vogt@ubuntu.com>  Mon, 07 Dec 2015 11:03:35 +0100

livecd-rootfs (2.359) xenial; urgency=medium

  * ubuntu-cpc:
    - add devpts-live to hook builds
    - add logic to settle the disks after UEFI builds

 -- Ben Howard <ben.howard@ubuntu.com>  Mon, 23 Nov 2015 09:34:57 -0700

livecd-rootfs (2.358) xenial; urgency=medium

  * Fix typo in ubuntu-cpc preventing non-intel builds.

 -- Ben Howard <ben.howard@ubuntu.com>  Tue, 17 Nov 2015 08:36:32 -0700

livecd-rootfs (2.357) xenial; urgency=medium

  * merge lp:~utlemming/livecd-rootfs/additional-cloud-targets:
  * added additional CPC build targets:
    - added manifest generation for squashfs and root.tar.gz
    - added VMDK generation
    - added OVA generation from VMDK's
    - added generic Vagrant image generation

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 16 Nov 2015 15:50:17 +0100

livecd-rootfs (2.356) xenial; urgency=medium

  * merge lp:~sil2100/livecd-rootfs/update_hashes to update the passwd db
    hashes on ubuntu-touch builds (LP: #1516526)

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 16 Nov 2015 15:44:48 +0100

livecd-rootfs (2.355) xenial; urgency=medium

  * fix input group in snappy

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 13 Nov 2015 12:52:34 +0100

livecd-rootfs (2.354) xenial; urgency=medium

  * do not ship assets/dtbs/overlays in raspi2 tarball, it breaks
    ubuntu-device-flash

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 13 Nov 2015 10:53:13 +0100

livecd-rootfs (2.353) xenial; urgency=medium

  * drop input group from snappy images, adjust md5 sums in
    live-build/ubuntu-core/hooks/00-uid-gid-fix.chroot_early
  * completely separate the snappy device tarball creation from the snappy
    rootfs so one doesnt taint the other (which allows dropping a lot more from
    the rootfs we do not need in a snappy system, like initramfs creation
    tools and all its dependencies).
  * drop live-build/ubuntu-core/hooks/500-move-kernel-to-device-tar.binary
  * enable automated build of raspi2 device tarballs for snappy

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 09 Nov 2015 12:53:24 +0100

livecd-rootfs (2.352) xenial; urgency=medium

  * Move building of all architecture-specific CPC artifacts into Launchpad
    (LP: #1513754).

 -- Daniel Watkins <daniel.watkins@canonical.com>  Fri, 06 Nov 2015 09:55:33 +0000

livecd-rootfs (2.351) xenial; urgency=medium

  * live-build/ubuntu-core/hooks/21-snappy-security-policy-stamp.chroot:
    - create a /usr/share/snappy/security-policy-version so that
      snappy can re-generate the security profiles if any of the versions
      of apparmor or ubuntu-core-security-* changes

 -- Michael Vogt <michael.vogt@ubuntu.com>  Wed, 04 Nov 2015 08:45:49 +0100

livecd-rootfs (2.350) xenial; urgency=medium

  [ Oliver Grawert ]
  * bump UID for tss user in snappy, else it matches dnsmasq and bad things
    happen
  * fix handling of writable files in /etc/default for snappy

  [ Ben Howard ]
  * Cloud Images: disable new NIC naming convention (LP: #1510345).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 29 Oct 2015 14:25:28 +0000

livecd-rootfs (2.349) wily; urgency=medium

  * do not hardcode installation of grub-pc for amd64 in snappy images,
    instead install the right grub set for secureboot there

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 09 Oct 2015 17:47:03 +0200

livecd-rootfs (2.348) wily; urgency=medium

  * limit grub-install diversion on snappy images to x86 architectures

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 09 Oct 2015 12:52:57 +0200

livecd-rootfs (2.347) wily; urgency=medium

  * divert grub-install on snappy images during rootfs build

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 09 Oct 2015 12:44:04 +0200

livecd-rootfs (2.346) wily; urgency=medium

  * merge lp:~sil2100/livecd-rootfs/remove_apt_lists to drop cruft from
    /var/lib/apt/lists on phone images

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 30 Sep 2015 15:23:02 +0200

livecd-rootfs (2.345) wily; urgency=medium

  [ Łukasz Zemczak ]
  * lp:~sil2100/livecd-rootfs/pocket-desktop:
    - add support for pocket-desktop

  [ Oliver Grawert ]
  * add user/group fixes for snappy shipping tpm-tools

 -- Michael Vogt <michael.vogt@ubuntu.com>  Mon, 21 Sep 2015 16:19:43 +0200

livecd-rootfs (2.344) wily; urgency=medium

  * Drop 'landscape-client' from Cloud Images (LP: #1497030).

 -- Ben Howard <ben.howard@ubuntu.com>  Thu, 17 Sep 2015 15:56:24 -0600

livecd-rootfs (2.343) wily; urgency=medium

  [ Oliver Grawert ]
  * add empty "extrausers" equivalents for subuid and subgid files, else
    adduser falls over in interactive mode when trying to write to them.

  [ Iain Lane ]
  * live-build/ubuntu-touch/hooks/03-etc-writable.chroot: Set up /etc/whoopsie
    too. (LP: #1437633)

 -- Iain Lane <iain@orangesquash.org.uk>  Thu, 10 Sep 2015 12:22:57 +0100

livecd-rootfs (2.342) wily; urgency=medium

  * ubuntu-touch, ubuntu-desktop-next: drop systemd-journal-remote from group
    files, update md5sums in 00-uid-gid-fix.chroot_early

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 09 Sep 2015 13:20:10 +0200

livecd-rootfs (2.341) wily; urgency=medium

  * add ppp and watchdog packages to snappy

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 07 Sep 2015 18:32:15 +0200

livecd-rootfs (2.340) wily; urgency=medium

  [ Michael Vogt ]
  * live-build/ubuntu-core/hooks/500-move-kernel-to-device-tar.binary:
    - cleanup further after moving the kernel out of the rootfs
      (LP: #1468469)

  [ Oliver Grawert ]
  * systemd-journal-remote was dropped from /etc/group and /etc/gshadow,
    update the files and md5sums in the passwd checks of ubuntu-core

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 03 Sep 2015 14:20:39 +0200

livecd-rootfs (2.339) wily; urgency=medium

  * revert the apparmor-super-noise change, issue is found
  * touch the cache files during build to prevent timestamp issues in the future
  * drop copying of zip files of the android package, we do not generate these
    anymore.

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 12 Aug 2015 12:17:51 +0200

livecd-rootfs (2.338) wily; urgency=medium

  [ Łukasz Zemczak ]
  * merge lp:~sil2100/livecd-rootfs/deb-src_for_extra_ppas,
  In case of extra PPAs also include the deb-src entry in the sources list.
  (LP: #1482703)
  [ Oliver Grawert ]
  * add the apparmor-super-noise change to get extra detailed info about all
  apparmor operations in the ubuntu-touch build logs

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 11 Aug 2015 18:18:58 +0200

livecd-rootfs (2.336) wily; urgency=medium

  * make apparmor precompilation more verbose, list the dir contents of
    /custom/cache/apparmor to see in the build log what has been created.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 11 Aug 2015 11:29:01 +0200

livecd-rootfs (2.335) wily; urgency=medium

  * Attempt to build Ubuntu image using metapackages instead of tasks; this
    is necessary in order to build a test image out of wily-proposed for the
    g++5 transition, but may be reverted later if this doesn't turn out to
    be maintainable.  (Code taken from the trusty HWE LTS branch of
    livecd-rootfs.)

 -- Steve Langasek <steve.langasek@ubuntu.com>  Sun, 09 Aug 2015 22:54:24 -0700

livecd-rootfs (2.334) wily; urgency=medium

  * add dnsmasq user to snappy builds, needed by ubuntu-fan

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 28 Jul 2015 10:48:13 +0200

livecd-rootfs (2.333) wily; urgency=medium

  * lp:~mvo/livecd-rootfs/snappy-add-fw_env.config:
    - add /etc/fw_env.config that points to
      /boot/uboot/fw_env.config to make fw_{set,print}env work

 -- Michael Vogt <michael.vogt@ubuntu.com>  Fri, 17 Jul 2015 17:46:09 +0200

livecd-rootfs (2.332) wily; urgency=medium

  * Get previous ubuntu-core changes on desktop-next

 -- Sebastien Bacher <seb128@ubuntu.com>  Thu, 09 Jul 2015 18:19:41 +0200

livecd-rootfs (2.331) wily; urgency=medium

  * merge lp:~sergiusens/livecd-rootfs/eth0Not to not hardcode eth0 anymore on
    snappy.

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 09 Jul 2015 16:41:53 +0200

livecd-rootfs (2.330) wily; urgency=medium

  * fix another quoting issue in snappy

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 09 Jul 2015 12:11:55 +0200

livecd-rootfs (2.329) wily; urgency=medium

  [ Łukasz Zemczak ]
  * Split out the youtube scope to the custom tarball since some images
    can't have it pre-installed (e.g. arale China images).

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 08 Jul 2015 15:08:15 -0700

livecd-rootfs (2.328) wily; urgency=medium

  * fix quoting issue with the last change ...

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 08 Jul 2015 22:51:04 +0200

livecd-rootfs (2.327) wily; urgency=medium

  * merge lp:~sergiusens/livecd-rootfs/snappyDevicePart for using versioned
    kernel and initrd binaries in snappy

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 08 Jul 2015 17:46:36 +0200

livecd-rootfs (2.326) wily; urgency=medium

  * snappy: install libc6:i386 on amd64 images for multiarch support out of
    the box. (LP: #1444049)

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 07 Jul 2015 11:49:46 +0200

livecd-rootfs (2.325) wily; urgency=medium

  * live-build/ubuntu-touch/includes.chroot/etc/lightdm/lightdm.conf.d/
    90-phablet.conf:
    - don't use deprecated "[SeatDefault]" syntax
  * live-build/ubuntu-desktop-next/includes.chroot/usr/share/lightdm/
    lightdm.conf.d/90-desktop-next-autologin.conf:
    - let desktop-next autolog to the ubuntu user session

 -- Sebastien Bacher <seb128@ubuntu.com>  Fri, 03 Jul 2015 11:39:41 +0200

livecd-rootfs (2.324) wily; urgency=medium

  * Revert unwanted change included in the previous upload

 -- Sebastien Bacher <seb128@ubuntu.com>  Thu, 02 Jul 2015 16:04:16 +0200

livecd-rootfs (2.323) wily; urgency=medium

  * live-build/ubuntu-desktop-next/hooks/11-remove-extra-packages.chroot:
    - remove click from desktop-next

 -- Sebastien Bacher <seb128@ubuntu.com>  Thu, 02 Jul 2015 15:53:43 +0200

livecd-rootfs (2.322) wily; urgency=medium

  * live-build/ubuntu-desktop-next/hooks/00-uid-gid-fix.chroot_early:
    - updated for the previous group changes

 -- Sebastien Bacher <seb128@ubuntu.com>  Wed, 01 Jul 2015 10:09:43 +0200

livecd-rootfs (2.320) wily; urgency=medium

  * Copied some touch tweaks (n-m config and user groups) to desktop-next

  [ Michael Vogt ]
  * snappy/desktop-next:
    - add snappypkg user and remove clickpkg user

 -- Sebastien Bacher <seb128@ubuntu.com>  Tue, 30 Jun 2015 18:08:10 +0200

livecd-rootfs (2.319) wily; urgency=medium

  * copy set locale hook from core to desktop-next

  [ Sergio Schvezov ]
  * removing debian packaging artifacts from the image

 -- Sebastien Bacher <seb128@ubuntu.com>  Fri, 26 Jun 2015 10:43:07 +0200

livecd-rootfs (2.318) wily; urgency=medium

  * merge lp:~sergiusens/livecd-rootfs/no-walinuxagent to remove all the
    hackery that was initially needed for azure snappy images, this got
    properly implemented now.

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 25 Jun 2015 13:59:50 +0200

livecd-rootfs (2.317) wily; urgency=medium

  [ Sebastien Bacher ]
  * live-build/ubuntu-desktop-next/hooks/20-extra-files.chroot:
    - create other needed directories
  * live-build/ubuntu-desktop-next/includes.chroot:
    - copy ubuntu-core's include for /etc/hosts and resolv.conf config
  * live-build/ubuntu-desktop-next/hooks/00-uid-gid-fix.chroot_early:
    - copy touch hacks to create needed userdirs (lightdm & usermetrics),
      the users are added by the script and not the usual postinst so their
      uderdirs are not created as they should
  * live-build/ubuntu-desktop-next/hooks/10-remove-documentation.binary:
    - don't remove the copyright and manpages on desktop

  [ Oliver Grawert ]
  * allow install of "multi" click packages in 60-install-click.chroot on
    ubuntu-touch

 -- Sebastien Bacher <seb128@ubuntu.com>  Fri, 19 Jun 2015 10:52:07 +0200

livecd-rootfs (2.316) wily; urgency=medium

  * live-build/ubuntu-desktop-next/hooks/20-extra-files.chroot:
    - create /writable otherwise the mounts job fail and block the boot

 -- Sebastien Bacher <seb128@ubuntu.com>  Wed, 17 Jun 2015 17:10:18 +0200

livecd-rootfs (2.315) wily; urgency=medium

  * live-build/ubuntu-core/hooks/500-move-kernel-to-device-tar.binary,
    live-build/ubuntu-desktop-next/hooks/500-move-kernel-to-device-tar.binary,:
    - deal with vmlinuz .signed when copying kernels

 -- Sebastien Bacher <seb128@ubuntu.com>  Thu, 11 Jun 2015 17:53:01 +0200

livecd-rootfs (2.314) wily; urgency=medium

  [ Iain Lane ]
  * Small whitespace cleanup in live-build/auto/config

  [ Sebastien Bacher ]
  * Set kernel flavours variable to try to fix amd64 build

 -- Sebastien Bacher <seb128@ubuntu.com>  Wed, 10 Jun 2015 15:10:03 +0200

livecd-rootfs (2.313) wily; urgency=medium

  * Revert symlink changes, that creates build issues, copy updated hook
    to the desktop-next directory instead

 -- Sebastien Bacher <seb128@ubuntu.com>  Wed, 10 Jun 2015 11:26:04 +0200

livecd-rootfs (2.312) wily; urgency=low

  [ Michael Vogt ]
  * live-build/ubuntu-core/hooks/500-move-kernel-to-device-tar.binary:
    - ignore /vmlinu?, /initrd.img symlinks when building the boot assets

  [ Sebastien Bacher ]
  * Symlink some desktop-next hooks to ubuntu-core to avoid duplication

 -- Sebastien Bacher <seb128@ubuntu.com>  Tue, 09 Jun 2015 17:56:23 +0200

livecd-rootfs (2.311) wily; urgency=medium

  * Updates users and groups for desktop next

 -- Sebastien Bacher <seb128@ubuntu.com>  Mon, 08 Jun 2015 15:32:17 +0200

livecd-rootfs (2.310) wily; urgency=medium

  * Don't add a docker group to desktop next

 -- Sebastien Bacher <seb128@ubuntu.com>  Mon, 08 Jun 2015 09:49:23 +0200

livecd-rootfs (2.309) wily; urgency=medium

  * Updated user/groups config for the desktop-next

 -- Sebastien Bacher <seb128@ubuntu.com>  Fri, 05 Jun 2015 18:31:52 +0200

livecd-rootfs (2.308) wily; urgency=medium

  * Copy desktop-next hooks in the configuration

 -- Sebastien Bacher <seb128@ubuntu.com>  Fri, 05 Jun 2015 15:06:07 +0200

livecd-rootfs (2.307) wily; urgency=medium

  * Remove duplicated code leftover in the previous desktop-next changeset

 -- Sebastien Bacher <seb128@ubuntu.com>  Fri, 05 Jun 2015 10:55:39 +0200

livecd-rootfs (2.306) wily; urgency=medium

  * Create hooks and image build config for the ubuntu-desktop-next
    new based on snappy image.

 -- Didier Roche <didrocks@ubuntu.com>  Fri, 29 May 2015 11:51:22 +0200

livecd-rootfs (2.305) wily; urgency=medium

  * also add /lib/firmware to the dirs we pre-create on touch and core.

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 28 May 2015 13:18:43 +0200

livecd-rootfs (2.304) wily; urgency=medium

  * -touch/-core create /etc/mtab link, /lib/modules dir and the respective
    writable mountpoints (/userdata for touch, /writable for core) so we do
    not need to re-pack the rootfs on the system-image server to add them.

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 28 May 2015 12:17:32 +0200

livecd-rootfs (2.303) wily; urgency=medium

  * drop grouper from touchsubarches variable. the android package does not
    provide any grouper images anymore which makes touch image builds fail.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 26 May 2015 14:12:09 +0200

livecd-rootfs (2.302) wily; urgency=medium

  * Call Setup_cleanup in live-build/auto/build to set exit handler.

 -- Adam Conrad <adconrad@ubuntu.com>  Mon, 25 May 2015 23:09:42 -0600

livecd-rootfs (2.301) wily; urgency=low

  [ Michael Vogt ]
  * create /boot/uboot on armhf to ensure that its in the system
    tarball and still on the system if ubuntu-core-upgrader
    performs a "format" (LP: #1447652)
  * live-build/ubuntu-core/hooks/500-move-kernel-to-device-tar.binary:
    - fix typo in hardware.yaml
  * live-build/auto/config:
    - add grub-efi-ia32-bin for i386 for efi support

  [ Adam Conrad ]
  * live-build/auto/config: Handle applying priorities to EXTRA_PPAS
    via the extra_ppa="user/ppaname:priority" syntax (LP: #1450257)

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 06 May 2015 18:23:17 -0600

livecd-rootfs (2.300) vivid; urgency=medium

  * live-build/ubuntu-core/hooks/11-remove-extra-packages.chroot: revert
    removal of python from the rootfs temporarily, since we've manually
    re-added it to the seed in order to make walinuxagent work again on the
    azure image.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 22 Apr 2015 16:03:42 -0700

livecd-rootfs (2.299) vivid; urgency=medium

  * Fix snappy motd to not reference 'development', which isn't always true.

 -- Adam Conrad <adconrad@ubuntu.com>  Fri, 17 Apr 2015 13:29:03 -0600

livecd-rootfs (2.298) vivid; urgency=low

  * live-build/auto/config:
    - remove resolvconf, click-apparmor, dosfstools
    - shuffle install order around
  * snappy:
    + remove click-hook-framework
    + remove /etc/init.d/grub-common

 -- Michael Vogt <michael.vogt@ubuntu.com>  Thu, 16 Apr 2015 09:37:34 -0500

livecd-rootfs (2.297) vivid; urgency=low

  * fix device.tar.gz generation for snappy
  * lp:~ubuntu-on-ec2/livecd-rootfs/cpc2:
    - build cloud based images using livecd-rootfs

 -- Michael Vogt <michael.vogt@ubuntu.com>  Thu, 09 Apr 2015 14:54:23 +0200

livecd-rootfs (2.296) vivid; urgency=low

  * ubuntu-core:
    - update passwd/group etc for new syslog user
    - remove live-build/ubuntu-core/hooks/15-pycompile-snappy.chroot
    - merged lp:~snappy-dev/livecd-rootfs/core_update
      to generate device tar conform hardware.yaml
    - add compability handling for current u-d-f/grub when extracting
      the device tarball

 -- Michael Vogt <michael.vogt@ubuntu.com>  Mon, 30 Mar 2015 20:40:25 +0200

livecd-rootfs (2.295) vivid; urgency=medium

  * forcefully add ubuntu-system-settings-online-accounts to ubuntu-touch
    builds to make sure the dependency is fulfilled in advance

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 25 Mar 2015 10:26:40 +0100

livecd-rootfs (2.294) vivid; urgency=medium

  * add more verbosity to the copy command for android fragments in
    ubuntu-touch

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 13 Mar 2015 11:10:33 +0100

livecd-rootfs (2.293) vivid; urgency=low

  [ Michael Vogt ]
  * live-build/ubuntu-core/hooks/11-remove-extra-packages.chroot:
    - remove libpython2.7 and friends as welll

  [ Oliver Grawert ]
  * remove all .override files in teh build chroot, else teh buildd machines
    fall over.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 10 Mar 2015 16:21:36 +0100

livecd-rootfs (2.292) vivid; urgency=low

  [ Michael Vogt ]
  * live-build/ubuntu-core/hooks/11-remove-extra-packages.chroot:
    - python2 is no longer required on a snappy system
  * live-build/ubuntu-core/hooks/00-uid-gid-fix.chroot_early:
    - updated md5sums as the ordering of users/groups has changed with
      the new systemd-sysv

  [ Oliver Grawert ]
  * live-build/ubuntu-touch/hooks/00-uid-gid-fix.chroot_early:
    bump all md5sums to new values, now that debootstrap installs systemd-sysv
    instead of upstart the ordering and thus the group numbering has changed

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 10 Mar 2015 12:07:16 +0100

livecd-rootfs (2.291) vivid; urgency=low

  [ Michael Vogt ]
  * do not leave some packages in ^rc state on snappy/ubuntu-core
    (LP: #1428115). Thanks to Daniel Holbach

  [ Oliver Grawert ]
  * put FLASH_KERNEL_SKIP=true into /etc/environment on phones, this will
    prevent the systems from trying to flash an updated initrd automatically
    in case you call update-initramfs or install your own kernel package on a
    nexus device where this is supported, please call flash-kernel manually
    after unsetting the variable in your work environment.

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 06 Mar 2015 21:14:11 +0100

livecd-rootfs (2.290) vivid; urgency=medium

  * touch: Explicitly uninstall systemd-sysv, to help apt to install upstart
    when the preferred "init" alternative is systemd-sysv. Also explicitly
    install packagekit to help the problem resolver. Thanks Colin Watson!
    (LP: #1428026)

 -- Martin Pitt <martin.pitt@ubuntu.com>  Wed, 04 Mar 2015 12:04:22 +0100

livecd-rootfs (2.289) vivid; urgency=medium

  * add info about /var/log ownership so it ends up in the ubuntu-touch build
    logs

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 03 Mar 2015 15:10:07 +0100

livecd-rootfs (2.288) vivid; urgency=low

  [ Michael Vogt ]
  * add dosfstools on snappy to ensure systemd can fsck the /boot
    partition

  [ Ricardo Salveti de Araujo ]
  * touch: don't depend on mir-platform-graphics-android and let that to be
    handled by the seeds (they can't stop bumping the package name and the
    graphics-mesa package doesn't cause any harm)

 -- Ricardo Salveti de Araujo <ricardo.salveti@canonical.com>  Sun, 01 Mar 2015 01:27:11 -0300

livecd-rootfs (2.287) vivid; urgency=low

  [ Michael Vogt ]
  * add even more verbose output to
    live-build/ubuntu-core/hooks/00-uid-gid-fix.chroot_early
    (thanks Oliver!)
  * live-build/ubuntu-core/hooks/00-uid-gid-fix.chroot_early:
    - adjust the {group,gshadow}_bootstrap values. The audio group
      used to be gid 1005 after the bootstrap and is now 29.
  * live-build/auto/config:
    - add snappy-ubuntu

  [ Oliver Grawert ]
  * make sure /var/log is always owned by the syslog group on touch

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 18 Feb 2015 15:03:54 +0100

livecd-rootfs (2.286) vivid; urgency=medium

  * touch: forcing package mir-platform-graphics-android to see if we're able
    to remove the dependency on the mesa one (until mir is properly fixed)

 -- Ricardo Salveti de Araujo <ricardo.salveti@canonical.com>  Thu, 12 Feb 2015 03:05:31 -0200

livecd-rootfs (2.285) vivid; urgency=medium

  * touch: removing dependencies on a specific mir platform driver as mir can
    now identify and load the correct driver during runtime

 -- Ricardo Salveti de Araujo <ricardo.salveti@canonical.com>  Wed, 11 Feb 2015 23:35:42 -0200

livecd-rootfs (2.284) vivid; urgency=medium

  * bump the gshadow hash in 00-uid-gid-fix.chroot_early too

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 11 Feb 2015 21:07:27 +0100

livecd-rootfs (2.283) vivid; urgency=low

  [ Michael Vogt ]
  * add more verbose output to
    live-build/ubuntu-core/hooks/00-uid-gid-fix.chroot_early
    (thanks Oliver!)

  [ Oliver Grawert ]
  * make sure to collect all output of all changed files in one go in
    00-uid-gid-fix.chroot_early, that way we only need to fix it once and have
    all info in the logs

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 11 Feb 2015 18:25:11 +0100

livecd-rootfs (2.282) vivid; urgency=medium

  * update the passwd hash for changed GID of syslog ... also add output of
    the respective md5sums to the error message for easier debugging

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 11 Feb 2015 16:46:18 +0100

livecd-rootfs (2.281) vivid; urgency=medium

  * add more verbose output to
    live-build/ubuntu-touch/hooks/00-uid-gid-fix.chroot_early

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 11 Feb 2015 15:11:51 +0100

livecd-rootfs (2.280) vivid; urgency=medium

  * live-build/ubuntu-core/hooks/02-add_user_to_groups.chroot: use commas
    instead of spaces.

 -- Loïc Minier <loic.minier@ubuntu.com>  Wed, 04 Feb 2015 18:03:08 +0100

livecd-rootfs (2.279) vivid; urgency=medium

  * Revert changes to post-debootstrap hashes for core.

 -- Loïc Minier <loic.minier@ubuntu.com>  Wed, 04 Feb 2015 16:32:09 +0100

livecd-rootfs (2.278) vivid; urgency=medium

  * Add live-build/ubuntu-core/hooks/99zz-check-uid-gid.chroot, copy of
    live-build/ubuntu-touch/hooks/99zz-check-uid-gid.chroot with just the
    error message changed. Currently, the passwd/group checks weren't run.
  * live-build/ubuntu-touch/hooks/00-uid-gid-fix.chroot_early: also add input
    group.
  * Core: drop live-build/ubuntu-core/hooks/12-add-docker-user.chroot and move
    docker user creation to
    live-build/ubuntu-core/hooks/00-uid-gid-fix.chroot_early; add ubuntu user
    to docker group in
    live-build/ubuntu-core/hooks/02-add_user_to_groups.chroot. This fixes
    static uid/gid maps for docker user/group.
  * Update post-debootstrap hashes in
    live-build/ubuntu-core/hooks/00-uid-gid-fix.chroot_early.

 -- Loïc Minier <loic.minier@ubuntu.com>  Wed, 04 Feb 2015 14:28:37 +0100

livecd-rootfs (2.277) vivid; urgency=medium

  * live-build/ubuntu-core/hooks/00-uid-gid-fix.chroot_early: add new "input"
    group to etc/group and etc/gshadow static maps.
  * live-build/ubuntu-core/includes.chroot/etc/resolv.conf: use relative
    symlink as suggested by lintian.
  * Bump Standards-Version to 3.9.6.

 -- Loïc Minier <loic.minier@ubuntu.com>  Wed, 04 Feb 2015 13:32:58 +0100

livecd-rootfs (2.276) vivid; urgency=medium

  [ Mathieu Trudel-Lapierre ]
  * live-build/auto/config: add config for Ubuntu MATE.

  [ Michael Vogt ]
  * use generic kernel for all ubuntu-core system-image
  * live-build/ubuntu-core/hooks/01-setup_user.chroot:
    - run chpasswd after user moved into /var/lib/extrausers
  * live-build/ubuntu-core/hooks/01-setup_user.chroot:
    - run with -e

 -- Mathieu Trudel-Lapierre <mathieu-tl@ubuntu.com>  Wed, 28 Jan 2015 11:03:08 -0500

livecd-rootfs (2.275+ppa2) vivid; urgency=medium

  * live-build/ubuntu-core/hooks/04-configure_network.chroot: use
    'allow-hotplug' for the network config, not 'auto', to work around
    systemd behavior that causes 'auto' to delay the rest of the boot when
    DHCP is not available on the network.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 14 Jan 2015 22:49:43 -0800

livecd-rootfs (2.275+ppa1) vivid; urgency=low

  * live-build/ubuntu-core/hooks/00-uid-gid-fix.chroot_early:
    - port static uid/gid setup from ubuntu-touch
  * live-build/ubuntu-core/hooks/15-pycompile-snappy.chroot:
    - byte compile .pyc files for snappy

 -- Michael Vogt <michael.vogt@ubuntu.com>  Wed, 07 Jan 2015 09:36:11 +0100

livecd-rootfs (2.275) vivid; urgency=low

  [ Michael Vogt ]
  * live-build/ubuntu-core/hooks/00-uid-gid-fix.chroot_early:
    - port static uid/gid setup from ubuntu-touch

  [ Ricardo Salveti de Araujo ]
  * Bump the hardcoded libmirplatform driver version for ubuntu-touch

 -- Ricardo Salveti de Araujo <ricardo.salveti@canonical.com>  Wed, 14 Jan 2015 13:31:43 -0200

livecd-rootfs (2.274) vivid; urgency=medium

  [ Michael Vogt ]
  * live-build/ubuntu-core/hooks/400-create-apt-get-warning.binary:
    - improve apt-get output
  * live-build/auto/config:
    - add click-apparmor for system-image
  * live-build/ubuntu-core/hooks/400-create-apt-get-warning.binary:
    - fix incorrect "echo"
    - add missing wrappers for apt, apt-cache
    - fix message
  * live-build/ubuntu-core/hooks/14-set-motd.chroot:
    - update motd

  [ James Hunt ]
  * live-build/ubuntu-core/hooks/10-remove-documentation.binary:
    - compress remaining documentation to save further space.

 -- Michael Vogt <michael.vogt@ubuntu.com>  Wed, 10 Dec 2014 12:57:30 +0100

livecd-rootfs (2.273) vivid; urgency=low

  [ Michael Vogt ]
  * live-build/ubuntu-core/hooks/14-set-motd.chroot:
    - set snappy specific motd
  * live-build/ubuntu-core/hooks/13-set-locale.chroot:
    - set default locale to C.UTF-8

  [ Oliver Grawert ]
  * add systemd-journal-remote group to touch builds

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 02 Dec 2014 10:20:28 +0100

livecd-rootfs (2.271) vivid; urgency=medium

  *  bump the hardcoded libmirplatform driver version for ubuntu-touch

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 27 Nov 2014 16:27:44 +0100

livecd-rootfs (2.270) vivid; urgency=medium

  * bump version of mir alternative in ubuntu-touch

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 27 Nov 2014 12:37:31 +0100

livecd-rootfs (2.269) vivid; urgency=low

  * live-build/auto/{build,config}:
    - create device-azure.tar.gz during the build that includes the
      packages for the azure cloud
  * live-build/ubuntu-core/hooks/400-create-apt-get-warning.binary:
    - display helpful message to use snappy when a user tries to use
      apt-get on a snappy system
  * live-build/ubuntu-core/hooks/500-move-kernel-to-device-tar.binary:
    - do the device-azure.tar.gz extraction here
  * live-build/ubuntu-core/hooks/12-add-docker-user.chroot:
    - ensure docker group is used

 -- Michael Vogt <michael.vogt@ubuntu.com>  Mon, 24 Nov 2014 08:38:15 +0100

livecd-rootfs (2.268) vivid; urgency=low

  * live-build/ubuntu-core/hooks/09-move-kernel-to-device-tar.binary:
    - build device tarball with system/ prefix
    - include /vmlinz, /initrd.img into device tarball
    - include /boot/abi-* /boot/System.map-*

 -- Michael Vogt <michael.vogt@ubuntu.com>  Mon, 17 Nov 2014 11:27:31 +0100

livecd-rootfs (2.267) vivid; urgency=low

  * live-build/auto/config:
    - system-image: do not install ubuntu-minimal
    - system-image: install KERNEL_FLAVOURS=virtual on i386/amd64
    - system-image: use "--linux-packages=linux-image"
    - add click-hook-framework
  * live-build/auto/build:
    - system-image: collect the deivce.tar.gz
  * live-build/ubuntu-core/hooks/09-move-kernel-to-device-tar.binary:
    - create a device.tar.gz from the installed kernel/modules and
      remove it from the rootfs
  * live-build/ubuntu-core/hooks/10-remove-documentation.binary:
    - strip documentation
  * live-build/ubuntu-core/hooks/11-remove-extra-packages.chroot:
    - remove extra packages like libicu52/libqt that are still on the
      image because vivid system-image has a dependency on u-d-m which
      depends on libqt
  * live-build/ubuntu-core/hooks/12-add-docker-user.chroot:
    - add a docker user/group into the image (this can go once we have
      a hook for this)

 -- Michael Vogt <michael.vogt@ubuntu.com>  Fri, 14 Nov 2014 13:06:19 +0100

livecd-rootfs (2.266) vivid; urgency=medium

  * Move the shorts click package to the custom tarball.  LP: #1386177.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 12 Nov 2014 23:15:15 -0800

livecd-rootfs (2.265) vivid; urgency=low

  * live-build/ubuntu-core/hooks/03-boot_with_systemd.chroot:
    - only modify /etc/default/grub if the file exists

 -- Michael Vogt <michael.vogt@ubuntu.com>  Mon, 03 Nov 2014 17:10:57 +0100

livecd-rootfs (2.264) vivid; urgency=low

  * live-build/auto/config:
    - also install flash-kernel/u-boot-tools in the armhf system-image,
      thanks to Adam Conrad

 -- Michael Vogt <michael.vogt@ubuntu.com>  Mon, 03 Nov 2014 11:45:00 +0100

livecd-rootfs (2.263) vivid; urgency=medium

  * live-build/auto/config:
    - explicitly set KERNEL_FLAVOURS=generic to get the right kernel
      on armhf

 -- Michael Vogt <michael.vogt@ubuntu.com>  Mon, 03 Nov 2014 11:30:02 +0100

livecd-rootfs (2.262) vivid; urgency=medium

  * fix typo in 99zz-check-uid-gid.chroot
  * add systemd users to group and passwd files on touch

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 29 Oct 2014 19:54:28 +0100

livecd-rootfs (2.261) vivid; urgency=medium

  * make diff not exit 1 if we show the diff for passwd, shadow, group etc

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 29 Oct 2014 16:44:25 +0100

livecd-rootfs (2.260) vivid; urgency=medium

  * properly redirect error output in 99zz-check-uid-gid.chroot so it ends up
    in the log files.

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 29 Oct 2014 13:19:46 +0100

livecd-rootfs (2.259) vivid; urgency=medium

  * merge ubuntu-core system-image fixes from the PPA:
    - add ubuntu-core-libs
    - add packages not (yet) in the ubuntu-core seed
    - fix resolv.conf
    - make timezone, localtime and hostname writable for cloud-init

 -- Michael Vogt <michael.vogt@ubuntu.com>  Wed, 29 Oct 2014 11:05:29 +0100

livecd-rootfs (2.258) vivid; urgency=medium

  * collect changes to /etc/{passwd|shadow|group|gshadow} in the error output
    in case they got updated on ubuntu-touch. Give a proper hint what to
    change to make the error go away on the next run.

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 29 Oct 2014 09:49:56 +0100

livecd-rootfs (2.257) utopic; urgency=medium

  * Drop the click packages moved in 2.255 from the rootfs, leaving them
    only in the custom tarball.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 15 Oct 2014 21:07:38 +0100

livecd-rootfs (2.256) utopic; urgency=medium

  * Fix directory layout of custom tarball.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 15 Oct 2014 17:12:23 +0100

livecd-rootfs (2.255) utopic; urgency=medium

  [ Steve Langasek ]
  * Add support to the ubuntu-touch target to generate a separate custom
    tarball as part of the build, moving most click packages into it.

  [ Colin Watson ]
  * Temporarily install the to-be-moved click packages in both core and
    custom databases, to simplify the landing process.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 14 Oct 2014 00:12:08 +0100

livecd-rootfs (2.254) utopic; urgency=medium

  * force the right alternative when the libmir*-android packages are
    installed, so that accidentially pulled in -mesa versions will not provide
    the default alternatives for them in ubuntu-touch images

 -- Oliver Grawert <ogra@ubuntu.com>  Sat, 11 Oct 2014 13:09:49 +0200

livecd-rootfs (2.253) utopic; urgency=medium

  * Update hardcoded libmir*-android installations for Mir 0.8.0.

 -- Colin Watson <cjwatson@ubuntu.com>  Sat, 11 Oct 2014 08:54:47 +0100

livecd-rootfs (2.252) utopic; urgency=low

  [ James Hunt ]
  * Convert resolvconf hook from a chroot hook to a binary hook since lb
    overwrites /etc/resolv.conf after the chroot hooks have run.  *

 -- Michael Vogt <michael.vogt@ubuntu.com>  Thu, 09 Oct 2014 13:20:40 +0200

livecd-rootfs (2.251) utopic; urgency=low

  * create /etc/hosts for ubuntu-core:system-image

 -- Michael Vogt <michael.vogt@ubuntu.com>  Thu, 09 Oct 2014 09:24:39 +0200

livecd-rootfs (2.250) utopic; urgency=low

  * build system-image without recommends

 -- Michael Vogt <michael.vogt@ubuntu.com>  Tue, 07 Oct 2014 11:44:09 +0200

livecd-rootfs (2.249) utopic; urgency=medium

  * live-build/ubuntu-core/hooks/06-handle_resolvconf.chroot: Remove
    pre-existing /etc/resolv.conf.

 -- James Hunt <james.hunt@ubuntu.com>  Mon, 06 Oct 2014 13:25:11 +0100

livecd-rootfs (2.248) utopic; urgency=medium

  * live-build/ubuntu-core/hooks/06-handle_resolvconf.chroot: Configure
    resolv.conf for Ubuntu Core.
  * live-build/ubuntu-core/hooks/07-configure-system-image-client.chroot:
    Configure system-image-cli's client.ini for Ubuntu Core. This can be
    dropped once bug 1373467 is fixed.

 -- James Hunt <james.hunt@ubuntu.com>  Fri, 03 Oct 2014 15:23:47 +0100

livecd-rootfs (2.247) utopic; urgency=medium

  * live-build/ubuntu-touch/hooks/00-uid-gid-fix.chroot_early:
    Create some directories which would otherwise go missing due to our
    pre-created users. (LP: #1374553)

 -- Stéphane Graber <stgraber@ubuntu.com>  Fri, 26 Sep 2014 14:41:19 -0400

livecd-rootfs (2.246) utopic; urgency=medium

  * live-build/auto/config: Use ubuntukylin-live task for ubuntukylin, not
    ubuntu-live (LP: #1372731).

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 24 Sep 2014 10:59:55 +0100

livecd-rootfs (2.245) utopic; urgency=medium

  * Add two new hooks for Ubuntu Touch to setup sensible /etc/passwd,
    /etc/shadow, /etc/group and /etc/gshadow PRIOR to package installation
    to guarantee user/group ordering on the image and then to check for any
    unexpected change to those files. (LP: #1332538)

    Any change to either the initial set of users and groups or to the
    post-package-install set will now be fatal to the image and will require
    a manual update of the hardcoded user/group list contained in this new
    chroot_early hook.
  * Bump dependency on live-build accordingly.
  * Update the setup_user hook to also take care of gshadow.

 -- Stéphane Graber <stgraber@ubuntu.com>  Mon, 22 Sep 2014 16:02:58 -0400

livecd-rootfs (2.244) utopic; urgency=medium

  * Substitute DEB_HOST_MULTIARCH into hook scripts at build time, rather
    than relying on dpkg-architecture (which is in dpkg-dev) to be present
    in the image.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 23 Sep 2014 16:07:41 +0100

livecd-rootfs (2.243) utopic; urgency=medium

  * Updating apparmor features file for Ubuntu Touch

 -- Ricardo Salveti de Araujo <ricardo.salveti@canonical.com>  Mon, 22 Sep 2014 23:59:25 -0300

livecd-rootfs (2.242) utopic; urgency=medium

  * get-ppa-fingerprint: Adjust use of
    softwareproperties.ppa.get_ppa_info_from_lp to match the new calling
    convention in software-properties 0.93.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 17 Sep 2014 11:11:41 +0100

livecd-rootfs (2.241) utopic; urgency=medium

  * live-build/auto/config: Use ubuntukylin-desktop task for ubuntukylin,
    not ubuntu-desktop.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 10 Sep 2014 10:54:17 +0100

livecd-rootfs (2.240) utopic; urgency=medium

  * live-build/ubuntu-touch/hooks/01-setup_user.chroot:
    - Don't modify PAM files directly, we'll let ubuntu-touch-session
      do that for us the proper way.  (LP: #1348637)

 -- Michael Terry <mterry@ubuntu.com>  Wed, 13 Aug 2014 16:37:17 -0400

livecd-rootfs (2.239) utopic; urgency=medium

  * Revert part of the last change to ship the systemd hook as .chroot
    and not .binary since it doesn't appear to be running properly as a
    binary hook.

 -- Stéphane Graber <stgraber@ubuntu.com>  Tue, 05 Aug 2014 13:37:57 -0400

livecd-rootfs (2.238) utopic; urgency=medium

  * ubuntu-core: Fix build failure due to missing /etc/default/grub and
    provide an fstab that will make systemd happy.

 -- Stéphane Graber <stgraber@ubuntu.com>  Tue, 05 Aug 2014 11:32:44 -0400

livecd-rootfs (2.237) utopic; urgency=medium

  * ubuntu-core: Add click-systemd to preinstalled image (currently only in
    a PPA, so can't use tasks for this).

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 05 Aug 2014 13:29:22 +0200

livecd-rootfs (2.236) utopic; urgency=medium

  [ James Hunt ]
  * ubuntu-core:
    - Perform in-place edit.
    - Allow variable expansion.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 05 Aug 2014 10:52:55 +0200

livecd-rootfs (2.235) utopic; urgency=medium

  * Only add the ubuntu-core hooks for the system-image subproject.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 05 Aug 2014 08:34:27 +0200

livecd-rootfs (2.234) utopic; urgency=medium

  [ James Hunt ]
  * ubuntu-core:
    - Don't remove doc to be kind to devs.
    - Boot with systemd (temporary method until we have systemd-sysv).
    - Configure first network interface.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 04 Aug 2014 16:12:43 +0200

livecd-rootfs (2.233) utopic; urgency=medium

  [ Colin Watson ]
  * live-build/auto/config: Add configuration for new kubuntu-plasma5
    flavour.

  [ James Hunt ]
  * ubuntu-core: Run setup hooks as done for ubuntu-touch.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 31 Jul 2014 10:37:18 +0100

livecd-rootfs (2.232) utopic; urgency=medium

  [ James Hunt ]
  * live-build/auto/config: Enable universe for system-image ubuntu-core
    sub-project which requires 'system-image-cli'.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 30 Jul 2014 17:56:04 +0100

livecd-rootfs (2.231) utopic; urgency=medium

  * Hard-code installation of libmirclientplatform-android and
    libmirplatformgraphics-android to avoid accidentally pulling in the
    -mesa variants that are preferred as dependencies of libmirclient and
    libmirserver.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Mon, 28 Jul 2014 20:17:14 -0700

livecd-rootfs (2.230) utopic; urgency=low

  * lp:~mvo/livecd-rootfs/ubuntu-core-system-image:
    - install the "ubuntu-core" task and a kernel when building
      ubuntu-core with SUBPROJECT=system-image

 -- Michael Vogt <michael.vogt@ubuntu.com>  Mon, 28 Jul 2014 20:10:56 +0200

livecd-rootfs (2.229) utopic; urgency=medium

  [ Michael Terry ]
  * Don't set an arbitrary password for the phablet user. As we transition
    to using PAM as the storage medium for the user's password, we can't
    expect the user to know about the 'phablet' password.
  * And configure libnss-extrausers to store user password information
    instead of /etc/shadow.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 24 Jul 2014 15:49:48 -0700

livecd-rootfs (2.228) utopic; urgency=medium

  * Pass --mirror-binary in the ubuntu-rtm case too; this isn't inherited
    from the bootstrap mirror.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 23 Jul 2014 11:51:11 +0100

livecd-rootfs (2.227) utopic; urgency=medium

  * Pass --mirror-chroot-security and --mirror-binary-security in the
    ubuntu-rtm case, as the default of http://security.ubuntu.com/ubuntu/
    isn't going to have ubuntu-rtm suites.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 23 Jul 2014 11:00:23 +0100

livecd-rootfs (2.226) utopic; urgency=medium

  * Disable apt authentication checks when building ubuntu-rtm images
    against dogfood (that test archive is signed, but not with a very useful
    key).
  * Apply a grievous hack to get debootstrap working against ubuntu-rtm
    series.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 23 Jul 2014 01:50:21 +0100

livecd-rootfs (2.225) utopic; urgency=medium

  * Use the soon-to-exist ubuntu-rtm archive for ubuntu-touch builds if
    SUBPROJECT is ubuntu-rtm (or ubuntu-rtm/dogfood for the dogfood
    version).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 17 Jul 2014 12:50:09 +0100

livecd-rootfs (2.224) utopic; urgency=medium

  * drop extra space in DEFGROUPS variable

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 16 Jul 2014 20:32:58 +0200

livecd-rootfs (2.223) utopic; urgency=medium

  * add android_cache group (GID 2001) so that after we switch developer mode
    to default to the phablet user it is still possible to adb push image
    tarballs to the /cache partition

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 16 Jul 2014 14:15:21 +0200

livecd-rootfs (2.222) utopic; urgency=medium

  * Precompiling apparmor policies on touch

 -- Ricardo Salveti de Araujo <ricardo.salveti@canonical.com>  Tue, 15 Jul 2014 17:34:38 -0300

livecd-rootfs (2.221) utopic; urgency=medium

  * Adding android_nvram group to the touch image

 -- Ricardo Salveti de Araujo <ricardo.salveti@canonical.com>  Mon, 30 Jun 2014 00:12:43 +0400

livecd-rootfs (2.220) utopic; urgency=medium

  [ Alfonso Sanchez-Beato (email Canonical) ]
  * Add media group to touch image

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 27 Jun 2014 16:31:02 +0200

livecd-rootfs (2.219) utopic; urgency=medium

  * Drop fdupes analysis: not widely used any more, can be done separately
    if needed, and very noisy in build logs.
  * Make the output kernel/initrd world-readable in a couple more cases,
    particularly relevant to ubuntu-defaults-image (LP: #1334616).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 26 Jun 2014 12:31:12 +0100

livecd-rootfs (2.218) utopic; urgency=medium

  * Install linux-signed-generic directly in live passes rather than relying
    on it being in the corresponding tasks.  linux-signed-generic shouldn't
    be in a task because that expands to ABI-versioned packages, and tasks
    can't be updated post-release.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 24 Jun 2014 02:18:36 +0100

livecd-rootfs (2.217) utopic; urgency=medium

  * drop swapfile creation for preinstalled images

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 23 Jun 2014 18:35:57 +0200

livecd-rootfs (2.216) utopic; urgency=medium

  * ubuntu-touch: remove the previous ugly hack again ... issue is fixed

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 30 May 2014 13:25:57 +0200

livecd-rootfs (2.215) utopic; urgency=medium

  * ubuntu-touch; DON'T DO THAT AT HOME ! (and keep the kids away) ...
    hack to remove a bunch of initscripts that currently break writable mode.
    this needs to be dropped again ASAP (once a proper fix landed) !!

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 30 May 2014 10:09:58 +0200

livecd-rootfs (2.214) utopic; urgency=medium

  * ubuntu-desktop-next: Use the Task fields that the archive now has for this
    project.

 -- Iain Lane <iain.lane@canonical.com>  Wed, 28 May 2014 10:37:36 +0100

livecd-rootfs (2.213) utopic; urgency=medium

  * The EXTRA_ARCHIVES environment variable defined in 2.212 doesn't quite
    work properly because it doesn't allow for signing key configuration.
    Rename it to the more domain-specific EXTRA_PPAS (which is now a
    space-separated sequence of <ppa-owner>/<ppa-name> pairs), and fetch
    signing keys for those from Launchpad using python3-software-properties.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 19 May 2014 15:28:35 +0100

livecd-rootfs (2.212) utopic; urgency=medium

  * live-build/auto/config: If EXTRA_ARCHIVES is set in the environment,
    dump its value into config/archives/extra-archives.list.chroot and
    config/archives/extra-archives.list.binary.  This makes it easier for a
    builder to build an image against an additional PPA.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 19 May 2014 12:14:28 +0100

livecd-rootfs (2.211) utopic; urgency=medium

  * Add an ubuntu-desktop-next project for building a desktop flavour
    including Unity 8 and the applications developed for Ubuntu Touch.

 -- Iain Lane <iain.lane@canonical.com>  Fri, 16 May 2014 17:54:04 +0100

livecd-rootfs (2.210) utopic; urgency=medium

  * live-build/ubuntu-touch/hooks/70-reconfigure-autopilot.chroot: Fix test
    for whether a package is installed, and check for both python-autopilot
    and python3-autopilot.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 16 May 2014 13:05:07 +0100

livecd-rootfs (2.209) utopic; urgency=medium

  * live-build/auto/config: Pass any additional command-line arguments on to
    "lb config".

 -- Colin Watson <cjwatson@ubuntu.com>  Sat, 10 May 2014 13:54:42 +0100

livecd-rootfs (2.208) trusty; urgency=medium

  * Adding support for ubuntu-touch i386 based images

 -- Ricardo Salveti de Araujo <ricardo.salveti@canonical.com>  Fri, 28 Mar 2014 19:00:25 -0300

livecd-rootfs (2.207) trusty; urgency=medium

  * touch/80-enable-libhybris.chroot: making libhybris the default alternatives
    for EGL/GLESv2 on touch

 -- Ricardo Salveti de Araujo <ricardo.salveti@canonical.com>  Tue, 18 Mar 2014 21:03:48 -0300

livecd-rootfs (2.206) trusty; urgency=medium

  * dropping maguro and adding flo, changing golfish to generic in touchsubarches

 -- Oliver Grawert <ogra@ubuntu.com>  Sat, 22 Feb 2014 23:35:07 +0100

livecd-rootfs (2.205) trusty; urgency=medium

  * touch/48-setup-env.chroot: QML2_IMPORT_PATH should respect
    DEB_HOST_MULTIARCH (as we now have i386 builds as well)

 -- Ricardo Salveti de Araujo <ricardo.salveti@canonical.com>  Tue, 18 Feb 2014 23:51:24 -0300

livecd-rootfs (2.204) trusty; urgency=medium

  * Make livecd-rootfs be Architecture: any so that we can go back to the
    android-tools-fsutils dependency being architecture-specific, which
    relieves us of having to port it to new architectures which don't care
    about Android.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 31 Jan 2014 11:04:39 +0000

livecd-rootfs (2.203) trusty; urgency=medium

  * Add hostname and machine-info to the writable paths, so that hostnamectl
    can change them to create a sane default bluetooth device name.

 -- Chris Wayne <chris.wayne@canonical.com>  Mon, 20 Jan 2014 15:34:59 +0100

livecd-rootfs (2.202) trusty; urgency=medium

  * Add the minimal task to ubuntu-core to preserve brand consistency.

 -- Adam Conrad <adconrad@ubuntu.com>  Fri, 10 Jan 2014 11:46:36 -0700

livecd-rootfs (2.201) trusty; urgency=low

  * add support for copying goldfish android images out of the android package

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 27 Nov 2013 12:22:07 +0100

livecd-rootfs (2.200) trusty; urgency=low

  * use proper quoting for egrep call in click installer

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 26 Nov 2013 16:41:56 +0100

livecd-rootfs (2.199) trusty; urgency=low

  * make the click package installation check for proper architecture before
    trying to install packages from the list, so that i386 touch builds do not
    fall over with "wrong architecture" failures at the click install step.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 26 Nov 2013 15:14:18 +0100

livecd-rootfs (2.198) trusty; urgency=low

  * Double-quotes prevented the previous change from working, so drop those.
    Additionally remove an hardcoded occurence of "saucy", instead using
    LB_DISTRIBUTION to avoid having to change that in the future.

 -- Stéphane Graber <stgraber@ubuntu.com>  Sun, 20 Oct 2013 23:17:57 -0400

livecd-rootfs (2.197) trusty; urgency=low

  * Workaround to make ubuntu-touch build with older android package.

 -- Stéphane Graber <stgraber@ubuntu.com>  Sun, 20 Oct 2013 16:52:29 -0400

livecd-rootfs (2.196) saucy; urgency=low

  * Removing the PPAs for Ubuntu Touch builds.

 -- Sergio Schvezov <sergio.schvezov@canonical.com>  Mon, 14 Oct 2013 19:20:15 -0300

livecd-rootfs (2.195) saucy; urgency=low

  * fix the prefixing of click packages in manifest files

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 11 Oct 2013 18:27:58 +0200

livecd-rootfs (2.194) saucy; urgency=low

  * prefix click packages in the manifest file with "click:"

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 11 Oct 2013 18:14:02 +0200

livecd-rootfs (2.193) saucy; urgency=low

  * drop SHELL=/system/bin/sh from /etc/environment on touch images (urgh)

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 11 Oct 2013 17:30:21 +0200

livecd-rootfs (2.192) saucy; urgency=low

  * add click packages to the manifest output on ubuntu touch

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 11 Oct 2013 14:29:41 +0200

livecd-rootfs (2.191) saucy; urgency=low

  * ubuntu-touch: Make writable symlinks relative.

 -- Martin Pitt <martin.pitt@ubuntu.com>  Mon, 30 Sep 2013 13:59:59 +0200

livecd-rootfs (2.190) saucy; urgency=low

  * ubuntu-touch: Add 03-etc-writable.chroot hook to move/symlink files in
    /etc to /etc/writable/ that we need to update atomically. At the moment
    these are timezone and localtime. (LP: #1227520)

 -- Martin Pitt <martin.pitt@ubuntu.com>  Mon, 30 Sep 2013 13:32:32 +0200

livecd-rootfs (2.189) saucy; urgency=low

  * Explicitly add the ubuntu-desktop task to Edubuntu builds, so that any
    ambiguous dependencies resolved by the contents of the ubuntu-desktop
    task are actually resolved reliably.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 24 Sep 2013 16:58:20 +0100

livecd-rootfs (2.188) saucy; urgency=low

  * ship policykit rules for networkmanager, now that we use it on touch

 -- Oliver Grawert <ogra@ubuntu.com>  Sat, 21 Sep 2013 12:54:02 +0200

livecd-rootfs (2.187) saucy; urgency=low

  * Removing QPA_PLATFORM_PLUGIN as it is now handled in their proper
    packages.

 -- Sergio Schvezov <sergio.schvezov@canonical.com>  Thu, 12 Sep 2013 23:25:42 +0200

livecd-rootfs (2.186) saucy; urgency=low

  * drop phablet-team PPA sources.list entries from ubuntu-touch, since we do
    not use the PPA anymore

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 12 Sep 2013 20:47:11 +0200

livecd-rootfs (2.185) saucy; urgency=low

  * Configure LightDM, if installed, to autologin the phablet user

 -- Michael Terry <mterry@ubuntu.com>  Mon, 09 Sep 2013 12:21:13 -0400

livecd-rootfs (2.184) saucy; urgency=low

  * Revert to always using archive-team.internal in 60-install-click.chroot
    for now.  This is unfortunate, but "hostname --fqdn" doesn't work at
    this stage.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 06 Sep 2013 13:21:42 +0100

livecd-rootfs (2.183) saucy; urgency=low

  * Make 60-install-click.chroot more verbose, in an attempt to figure out
    why this doesn't work in the datacentre.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 06 Sep 2013 11:48:25 +0100

livecd-rootfs (2.182) saucy; urgency=low

  * Log the hostname at the start of the build.
  * Fix test for whether we're running in the Canonical datacentre when
    installing click packages.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 05 Sep 2013 16:03:15 +0100

livecd-rootfs (2.181) saucy; urgency=low

  * Use new multiple-database scheme in click 0.4.3 to preinstall click
    packages.
  * Download core click packages from the right place when building images
    outside the Canonical datacentre.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 05 Sep 2013 11:29:17 +0100

livecd-rootfs (2.180) saucy; urgency=low

  * make sure the NM configuration mangling of touch images uses the sudo and
    not the admin group, "admin" is dead since years ... (LP: #1217596)
  * drop a few superfluous env vars on request of Ted Gould

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 28 Aug 2013 16:27:12 +0200

livecd-rootfs (2.179) saucy; urgency=low

  * add 70-reconfigure-autopilot.chroot to ubuntu-touch builds, to make sure
    the phablet user actually ends up in the autopilot group

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 27 Aug 2013 11:23:56 +0200

livecd-rootfs (2.178) saucy; urgency=low

  * Copying click packages to install search location instead of installing
    for a hardcoded user.

 -- Sergio Schvezov <sergio.schvezov@canonical.com>  Mon, 26 Aug 2013 17:22:14 -0300

livecd-rootfs (2.177) saucy; urgency=low

  * do not forcefully use the admin group on touch images. this group was
    dropped in favour of the sudo group several releases ago

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 26 Aug 2013 16:51:13 +0200

livecd-rootfs (2.176) saucy; urgency=low

  * preserve a symlink of media-info for backwards compatibility

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 23 Aug 2013 16:39:31 +0200

livecd-rootfs (2.175) saucy; urgency=low

  * move media-info file from /var/log/installer to /etc on touch images.

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 23 Aug 2013 16:25:08 +0200

livecd-rootfs (2.174) saucy; urgency=low

  * make sure the bluetooth group has the right android GID on touch builds

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 16 Aug 2013 13:25:52 +0200

livecd-rootfs (2.173) saucy; urgency=low

  [Michael Terry]
  * Add phablet user to nopasswdlogin group on Touch images
  * Switch min uid to 1002 to prevent system users from showing in
    the greeter on Touch images

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 14 Aug 2013 11:01:47 +0200

livecd-rootfs (2.172) saucy; urgency=low

  * Reenabling click package installation hook.

 -- Sergio Schvezov <sergio.schvezov@canonical.com>  Sun, 11 Aug 2013 19:03:53 -0300

livecd-rootfs (2.171) saucy; urgency=low

  * seems unlike my local build the buildd doesnt get along with links, use
    copy instead

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 07 Aug 2013 21:56:07 +0200

livecd-rootfs (2.170) saucy; urgency=low

  * fix package mirror in android package install routine

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 07 Aug 2013 19:17:43 +0200

livecd-rootfs (2.169) saucy; urgency=low

  * switch touch builds to use the packaged android img files (pending cdimage
    changes to publish these from the livefs builder)

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 07 Aug 2013 16:05:45 +0200

livecd-rootfs (2.168) saucy; urgency=low

  * drop unity-next PPA from ubuntu-touch builds, unity8 is in the archive now

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 01 Aug 2013 19:11:55 +0200

livecd-rootfs (2.167) saucy; urgency=low

  * make sure FLASH_KERNEL_SKIP is set when we post-process touch images

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 31 Jul 2013 13:33:53 +0200

livecd-rootfs (2.166) saucy; urgency=low

  * add radio user (with UID 1001 (required by android)) to the default user
    creation for ubuntu-touch

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 25 Jul 2013 11:14:34 +0200

livecd-rootfs (2.165) saucy; urgency=low

  * Remove e2fs-zero.py and references to it, it's no longer used.

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 24 Jul 2013 11:42:23 +0100

livecd-rootfs (2.164) saucy; urgency=low

  * Run builds under eatmydata.  (This doesn't actually seem to help very
    much - it shaves a minute off a 48-minute test build on my laptop - but
    it will stop people being distracted by it.)
  * Remove livecd.py, which was never finished.
  * Remove all vestiges of livecd.sh and ubuntu-touch-android.sh.
    Requiescant in pace.
  * Temporarily disable Click package installation, until desktop/AppArmor
    integration has landed properly.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 23 Jul 2013 23:21:56 +0100

livecd-rootfs (2.163) saucy; urgency=low

  * point click package install to http://archive-team.internal/click_packages

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 18 Jul 2013 16:31:54 +0200

livecd-rootfs (2.162) saucy; urgency=low

  * Ubuntu Touch click package install hook.

 -- Sergio Schvezov <sergio.schvezov@canonical.com>  Wed, 17 Jul 2013 00:05:49 -0300

livecd-rootfs (2.161) saucy; urgency=low

  * drop bashrc mangling from ubuntu-touch builds \o/

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 17 Jul 2013 16:30:12 +0200

livecd-rootfs (2.160) saucy; urgency=low

  * Do the same trick as in 2.158 for kubuntu armhf+omap4 too.

 -- Iain Lane <iain.lane@canonical.com>  Wed, 17 Jul 2013 11:52:23 +0100

livecd-rootfs (2.159) saucy; urgency=low

  * make touch images source the dbus session address from
    ~/.cache/upstart/dbus-session instead of ~/.dbus-session

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 16 Jul 2013 20:12:31 +0200

livecd-rootfs (2.158) saucy; urgency=low

  * Under armhf+omap4, don't use the ubuntu-desktop Task, but use the
    metapackage instead. The metapackage doesn't pull in the X stack which
    allows us to additionally install the special "revert" X stack that we
    require here.

 -- Iain Lane <iain.lane@canonical.com>  Tue, 16 Jul 2013 17:19:22 +0100

livecd-rootfs (2.157) saucy; urgency=low

  * add xserver-xorg-input-evdev-omap-revert and
    xserver-xorg-video-omap-revert to panda builds

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 12 Jul 2013 11:03:34 +0200

livecd-rootfs (2.156) saucy; urgency=low

  * fix build stamp handling for ubuntu-touch (requires an RT to have IS
    update BuildLiveCD on the builders)

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 11 Jul 2013 16:34:34 +0200

livecd-rootfs (2.155) saucy; urgency=low

  * try to hand the exported $NOW over from live-build/auto/config as
    $BUILDSTAMP so live-build/auto/build can use it to write a stamp file

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 05 Jul 2013 12:29:50 +0200

livecd-rootfs (2.154) saucy; urgency=low

  [ Sergio Schvezov ]
  * Adding ppa:ubuntu-unity/next for Touch to obtain unity8 and Mir.
  * Switching to using the maliit plugin provided by maliit-framework.

 -- Ricardo Salveti de Araujo <ricardo.salveti@canonical.com>  Thu, 04 Jul 2013 13:44:08 -0300

livecd-rootfs (2.153) saucy; urgency=low

  * we do better not try to create something outside of a chroot while we are
    in it :P (make sure bootimg's are created in /boot of the chroot and only
    copied afterwards).

 -- Oliver Grawert <ogra@ubuntu.com>  Sat, 29 Jun 2013 16:59:28 +0200

livecd-rootfs (2.152) saucy; urgency=low

  * live-build/auto/build: Fix syntax error.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 28 Jun 2013 17:13:54 +0100

livecd-rootfs (2.151) saucy; urgency=low

  * use ubuntu-touch-generic-initrd for touch images instead of rolling an
    arch specific initrd at build time for each arch (this should save quite
    some build time)
  * directly create the output file with abootimg, no need to cp it separately
  * do not remove kernel packages from a chroot we throw away anyway

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 28 Jun 2013 15:06:59 +0200

livecd-rootfs (2.150) saucy; urgency=low

  * export $NOW in BuildLiveCD so we have it available in live-build
  * create a build stamp in /var/log/installer/media-info on Ubuntu Touch images

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 26 Jun 2013 11:32:31 +0200

livecd-rootfs (2.149) saucy; urgency=low

  * set QT_SELECT=qt5 in touch image environment

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 14 Jun 2013 16:11:33 +0200

livecd-rootfs (2.148) saucy; urgency=low

  [ Colin Watson ]
  * live-build/ubuntu-touch/hooks/02-add_user_to_groups.chroot: Delete
    redundant code to create global static groups, which are already created
    more correctly by base-passwd on every Ubuntu system.
  * live-build/ubuntu-touch/hooks/02-add_user_to_groups.chroot: Fix
    detection of existing groups not to misfire if there is an existing
    group with the desired group name as a prefix.

  [ Oliver Grawert ]
  * drop daily-build-next PPA, according to didrocks everything from there
    should be in the saucy archive now, yay.

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 10 Jun 2013 12:33:32 +0200

livecd-rootfs (2.147) saucy; urgency=low

  * sync ubuntu-touch customzation scripts with phablet build tree

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 03 Jun 2013 09:56:15 +0200

livecd-rootfs (2.146) saucy; urgency=low

  * drop the generic .bootimg from ubuntu-touch, all boot images we need have
    to be subarch tagged

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 30 May 2013 18:21:06 +0200

livecd-rootfs (2.145) saucy; urgency=low

  * adjust naming of the bootimg files so cdimage picks them up for publishing

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 30 May 2013 12:14:38 +0200

livecd-rootfs (2.144) saucy; urgency=low

  * Clean up subarch loop for touch subarches to skip unwanted deps.

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 29 May 2013 16:41:24 -0600

livecd-rootfs (2.143) saucy; urgency=low

  * drop all the cleanup code, we already have the tarball and don't need to
    clean the chroot.
  * add better quoting for update-initramfs and abootimg calls for
    ubuntu-touch

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 29 May 2013 21:47:03 +0200

livecd-rootfs (2.142) saucy; urgency=low

  * copy the initrd out of the chroot before we purge the kernel package on
    ubuntu-touch

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 29 May 2013 16:53:56 +0200

livecd-rootfs (2.141) saucy; urgency=low

  * make removal of non existing old initrds non fatal in ubuntu-touch

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 29 May 2013 16:25:18 +0200

livecd-rootfs (2.140) saucy; urgency=low

  *  hardcode dist in the temporary sources.list of the ubuntu-touch initrd
     creation for a test

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 29 May 2013 14:20:34 +0200

livecd-rootfs (2.139) saucy; urgency=low

  * fix resolv.conf for ubuntu-touch initramfs creation

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 29 May 2013 12:10:53 +0200

livecd-rootfs (2.138) saucy; urgency=low

  * also move the sources.list.d dir out of the way on ubuntu-touch

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 28 May 2013 15:17:46 +0200

livecd-rootfs (2.137) saucy; urgency=low

  * clear up /var/lib/initramfs-tools/ in the chroot after building initrds
  * remove ubuntu-touch/hooks/49-setup-demo-assets.chroot
  * handle sources.list in ubuntu-touch initrd creation

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 28 May 2013 11:13:57 +0200

livecd-rootfs (2.136) saucy; urgency=low

  * ubuntu-touch: determine the value for $kver inside the chroot, not
    outside. Use -c and drop -t with update-initramfs

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 27 May 2013 18:13:05 +0200

livecd-rootfs (2.135) saucy; urgency=low

  [ Colin Watson ]
  * BuildLiveCD: Time out lockfile after 12 hours, which should be enough
    for even the longest build queue to clear.

  [ Oliver Grawert ]
  * add live-build script for subarch specific Ubuntu Touch initrd
    and boot image creation

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 27 May 2013 14:34:17 +0200

livecd-rootfs (2.134) saucy; urgency=low

  * remove qt5-proper PPA from ubuntu touch builds

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 17 May 2013 14:33:35 +0200

livecd-rootfs (2.133) saucy; urgency=low

  * drop online-accounts-qt5-staging PPA from ubuntu-touch images

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 07 May 2013 21:00:42 +0200

livecd-rootfs (2.132) saucy; urgency=low

  * also remove ubuntu-touch-android.sh from debian/install

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 07 May 2013 15:11:53 +0200

livecd-rootfs (2.131) saucy; urgency=low

  * drop hardcoded packagelists for ubuntu-touch, this is dealt with by
    the ubuntu-touch seed/task/metapackage
  * drop android build script, we will instead use a package

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 07 May 2013 14:19:03 +0200

livecd-rootfs (2.130) saucy; urgency=low

  * make sure we build a plain filesystem for ubuntu-touch (this should
    automatically produce a preinstalled tarball)

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 06 May 2013 12:48:17 +0200

livecd-rootfs (2.129) saucy; urgency=low

  * Disable zsync for ubuntu-touch images.
  * Copy binary-tar.tar.gz to $PREFIX.rootfs.tar.gz if it exists.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 03 May 2013 11:46:58 -0700

livecd-rootfs (2.128) saucy; urgency=low

  * Don't include lupin-casper in ubuntu-touch images.
  * Use gzip compression for ubuntu-touch tarballs.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 03 May 2013 08:51:24 -0700

livecd-rootfs (2.127) saucy; urgency=low

  * Install metapackages rather than tasks for ubuntu-touch, since it still
    relies on PPAs and those don't have tasks.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 02 May 2013 13:50:34 -0700

livecd-rootfs (2.126) saucy; urgency=low

  * drop the super-friends (sorry batman and robin ...) and ubuntu-sdk PPAs
  from live-build config for ubuntu-touch, their packages should be in the
  saucy archive already

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 02 May 2013 20:23:13 +0200

livecd-rootfs (2.125) saucy; urgency=low

  * live-build/auto/config: Add basic ubuntu-touch enablement (based on
    patch from Oliver Grawert, for which thanks).
  * live-build/auto/config, live-build/ubuntu-touch: Copy a huge pile of
    customisation by Ricardo Salveti from
    lp:~phablet-team/touch-preview-images/ubuntu-build-phablet, which should
    be close to enough for the architecture-independent parts of
    ubuntu-touch builds.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 01 May 2013 12:05:41 -0700

livecd-rootfs (2.124) raring; urgency=low

  * drop the namespace in mount options of ubuntu-touch-android.sh,
    mount does not like that
  * actually give chroot a rootdir when calling it
  * make sure /dev/pts exists in the chroot before mounting something on it
  * make umount lazy

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 16 Apr 2013 13:53:53 +0200

livecd-rootfs (2.123) raring; urgency=low

  * fix typos in debootstrap line of ubuntu-touch-android.sh

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 16 Apr 2013 11:07:44 +0200

livecd-rootfs (2.122) raring; urgency=low

  * redo ubuntu-touch-android.sh to use its own build chroot since we can not
    add universe support to the livefs builder chroot

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 15 Apr 2013 20:18:32 +0200

livecd-rootfs (2.121) raring; urgency=low

  * ubuntu-touch-android.sh: enable universe in the build chroot

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 15 Apr 2013 18:40:55 +0200

livecd-rootfs (2.120) raring; urgency=low

  * fix typo in shebang of ubuntu-touch-android.sh

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 15 Apr 2013 16:07:08 +0200

livecd-rootfs (2.119) raring; urgency=low

  [ Colin Watson ]
  * BuildLiveCD: Link livecd-${NOW}-${ARCH}.out to livecd-${ARCH}.out, to
    make it easier for cdimage to fetch the latest build log for failure
    notification mails.

  [ Oliver Grawert ]
  * the android build system is sadly full of bashisms (even though it has
    generic .sh suffixes and no shebang line) until this is fixed use a
    /bin/bash shebang

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 11 Apr 2013 11:28:08 +0200

livecd-rootfs (2.118) raring; urgency=low

  * normalize the naming scheme for ubuntu-touch-android.sh output

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 28 Mar 2013 19:34:18 +0100

livecd-rootfs (2.117) raring; urgency=low

  * make ubuntu-touch-android.sh also create $subarch-system.img
  $subarch-recovery.img and $subarch-boot.img

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 28 Mar 2013 18:47:06 +0100

livecd-rootfs (2.116) raring; urgency=low

  * add new arg (-t) to enable Ubuntu Touch android cross builds which calls a
    newly added script (ubuntu-touch-android.sh) to cross build android base
    images for Ubuntu Touch on an amd64 builder.

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 28 Mar 2013 16:02:12 +0100

livecd-rootfs (2.115) raring; urgency=low

  * live-build/auto/config: Run the ubuntukylin-default-settings chroot
    hook.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 27 Mar 2013 14:47:51 +0000

livecd-rootfs (2.114) raring; urgency=low

  * Revert changes in 2.113.  This needs to be done in cdimage/debian-cd
    instead.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 14 Mar 2013 16:54:48 +0000

livecd-rootfs (2.113) raring; urgency=low

  * live-build/auto/config: Set gfxboot default language to zh_CN for
    UbuntuKylin.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 14 Mar 2013 11:53:38 +0000

livecd-rootfs (2.112) raring; urgency=low

  * live-build/auto/config: Add ubuntu-gnome project (LP: #1152818)

 -- Jeremy Bicha <jbicha@ubuntu.com>  Wed, 13 Mar 2013 10:28:23 +0000

livecd-rootfs (2.111) raring; urgency=low

  * live-build/auto/config: Add ubuntukylin as a valid project
    (LP: #1152812).
  * BuildLiveCD: Remove the explicit list of valid projects.  This is a
    hassle to modify, and not very useful since an invalid project will fail
    soon enough anyway.

 -- Colin Watson <cjwatson@ubuntu.com>  Sat, 09 Mar 2013 12:13:24 +0000

livecd-rootfs (2.110) raring; urgency=low

  * live-build/auto/config: Drop ubuntustudio-audio-plugins task.

 -- Colin Watson <cjwatson@debian.org>  Thu, 07 Mar 2013 13:27:13 +0000

livecd-rootfs (2.109) raring; urgency=low

  * Drop ubuntustudio-generation and ubuntustudio-recording tasks and add
    ubuntustudio-audio task to reflect Ubuntu Studio seed restructuring
    - update live-build/auto/config

 -- Micah Gersten <micahg@ubuntu.com>  Tue, 05 Mar 2013 23:14:25 -0600

livecd-rootfs (2.108) raring; urgency=low

  [ Colin Watson ]
  * live-build/auto/build: Use slightly safer code for kernel handling just
    in case 'set -o pipefail' is ever reinstated here.

  [ Adam Conrad ]
  * Add abootimg explicitly to ac100 and nexus7 images, so it's marked
    as manually installed and apt doesn't autoremove it (LP: #1041290)
  * Remove linux-firmware-nexus7 from the install list, it gets pulled
    in automatically by linux-image-nexus7, so this is redundant.

 -- Adam Conrad <adconrad@ubuntu.com>  Tue, 29 Jan 2013 12:34:37 -0700

livecd-rootfs (2.107) raring; urgency=low

  * Make sure the $PREFIX.kernel-$FLAVOUR.efi.signed output is
    world-readable.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 04 Dec 2012 16:20:22 +0000

livecd-rootfs (2.106) raring; urgency=low

  * re-enable all slideshows on all preinstalled images, webkit should work
    again

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 03 Dec 2012 14:37:01 +0100

livecd-rootfs (2.105) raring; urgency=low

  * preseed autologin in the nexus7 tarball
  * use ubuntu-defaults-nexus7 package in the nexus7 images

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 23 Nov 2012 12:20:30 +0100

livecd-rootfs (2.104) raring; urgency=low

  * use a subarch based approach for the ac100 and nexus7 bootimg.cfg files
  * create a media-info file and place it inside the tarball installer
    initramfs for copying it to the target system on successfull decompression
    (LP: #1080747)

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 22 Nov 2012 01:23:29 +0100

livecd-rootfs (2.103) raring; urgency=low

  * live-build/auto/build: Exclude all *.efi* files from kernel version
    detection (i.e. including *.efi.signature), not just *.efi.signed.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 21 Nov 2012 22:31:46 +0000

livecd-rootfs (2.102) raring; urgency=low

  * create the nexus7 rootfs image with .ext4 as suffix instead of using
    .img, so debian-cd knows how to handle it

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 20 Nov 2012 16:45:06 +0100

livecd-rootfs (2.101) raring; urgency=low

  * instead of mangling the ac100 bootimg for nexus7 support, ship a proper
    config in ac100-tarball-installer and build the nexus7 one from scratch
    as well.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 20 Nov 2012 12:37:33 +0100

livecd-rootfs (2.100) raring; urgency=low

  * clean up the userdata dir
  * move the tarball around instead of copying it
  * fix quoting of abootimg call harder

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 19 Nov 2012 19:48:42 +0100

livecd-rootfs (2.99) raring; urgency=low

  * fix quoting in abootimg call for nexus7
  * dont fail if the userdata dir already exists

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 19 Nov 2012 18:04:13 +0100

livecd-rootfs (2.98) raring; urgency=low

  * we want nvidia-tegra3 (the binary) not nvidia-graphics-drivers-tegra3

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 19 Nov 2012 14:55:19 +0100

livecd-rootfs (2.97) raring; urgency=low

  * add linux-firmware-nexus7 and nvidia-graphics-drivers-tegra3 to nexus7
    builds
  * preseed the license popup of linux-firmware-nexus7, we will show
    it in the installer for full image installs.

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 19 Nov 2012 12:58:36 +0100

livecd-rootfs (2.96) raring; urgency=low

  * add nexus7 specific kernel cmdline
  * move the nexus7 processing up a bit in the code so we can modify the
    bootimg cmdline before the file gets copied around

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 14 Nov 2012 13:28:50 +0100

livecd-rootfs (2.95) raring; urgency=low

  * make the dependency on android-tools-fsutils not arch specific, seems
    dpkg doesnt like arch specific binary deps in arch all packages

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 09 Nov 2012 13:30:15 +0100

livecd-rootfs (2.94) raring; urgency=low

  * add a dependency on android-tools-fsutils for armhf builds
  * add nexus7 live-build configuration
  * add nexus7 post processing with make_ext4fs for teh tarball to roll a
    proper android img file

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 09 Nov 2012 13:00:36 +0100

livecd-rootfs (2.93) quantal; urgency=low

  * Revert binary/$INITFS/kernel-$FLAVOUR to the unsigned kernel, and link
    signed kernels to binary/$INITFS/kernel-$FLAVOUR.efi.signed instead
    (LP: #1067659).

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 17 Oct 2012 11:48:47 +0100

livecd-rootfs (2.92) quantal; urgency=low

  * disable all slideshows on al preinstalled images, due to (LP: #1066046)
    the installer crashes when trying to start up webkit for teh slideshow

 -- Oliver Grawert <ogra@ubuntu.com>  Sat, 13 Oct 2012 11:44:52 +0200

livecd-rootfs (2.91) quantal; urgency=low

  * make sure preinstalled ac100 images have multiverse enabled in their
    sources.list

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 12 Oct 2012 14:18:53 +0200

livecd-rootfs (2.90) quantal; urgency=low

  * live-build/auto/build: If they exist, link *.efi.signed versions of the
    kernel to binary/$INITFS/kernel-$FLAVOUR rather than the unsigned
    versions.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 11 Oct 2012 02:22:34 +0100

livecd-rootfs (2.89) quantal; urgency=low

  * fix lubuntu and xubuntu preinstalled handling so we end up with the
    right slideshows in oem-config

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 02 Oct 2012 23:56:33 +0200

livecd-rootfs (2.88) quantal; urgency=low

  * live-build/auto/config: Add photography and publishing metas for
    Ubuntu Studio (LP: #1057816)

 -- Micah Gersten <micahg@ubuntu.com>  Thu, 27 Sep 2012 23:19:19 -0500

livecd-rootfs (2.87) quantal; urgency=low

  * live-build/auto/config: Build ubuntu-server and ubuntu-core with
    --initramfs=none, since we don't need casper in those images.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 12 Sep 2012 14:01:56 +0100

livecd-rootfs (2.86) quantal; urgency=low

  * Reorganise code to avoid kernel installation on
    ubuntu-server/ubuntu-core so that it works for all architectures.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 11 Sep 2012 16:56:43 +0100

livecd-rootfs (2.85) quantal; urgency=low

  * live-build/auto/config: Set KERNEL_FLAVOURS=none for ubuntu-server as
    well, so that live-build/auto/build doesn't try to copy out kernel
    images.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 10 Sep 2012 09:34:56 +0100

livecd-rootfs (2.84) quantal; urgency=low

  * Actually apply the change done in 2.74 as it was only done to the
    legacy code...
    - Change mksquashfs compression flags for LTSP images, turning
      compression back on to match current ltsp-update-image behaviour.

 -- Stéphane Graber <stgraber@ubuntu.com>  Sun, 09 Sep 2012 15:49:07 -0400

livecd-rootfs (2.83) quantal; urgency=low

  * live-build/auto/config: Remove standard and server tasks from
    ubuntu-server squashfs, and build it with no kernel packages so that
    they can be added more correctly later by the installer (LP: #1028453).

 -- Colin Watson <cjwatson@ubuntu.com>  Sun, 09 Sep 2012 20:41:19 +0100

livecd-rootfs (2.82) quantal; urgency=low

  * live-build/auto/build: live-build now calls hybrid ISO9660 images
    binary.hybrid.iso rather than binary-hybrid.iso.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 03 Sep 2012 18:41:24 +0100

livecd-rootfs (2.81) quantal; urgency=low

  * live-build/auto/config: Disable zsync for BINARYFORMAT=iso*|usb* builds.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 30 Aug 2012 23:44:33 +0100

livecd-rootfs (2.80) quantal; urgency=low

  * add pvr-omap4 driver to omap4 image builds for everything but
    ubuntu-server, ubuntu-core and base images so we have GLES working
    out of the box on them

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 29 Aug 2012 12:53:11 +0200

livecd-rootfs (2.79) quantal; urgency=low

  * setting --architectures seems to have weird side effects on arm
    (considering all but the buildd arch as foreign etc), disable it for a
    testbuild...

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 27 Aug 2012 16:04:30 +0200

livecd-rootfs (2.78) quantal; urgency=low

  * revert the last change, i was not aware that unity-2d was also ripped out
    of the archive and not only removed from the seeds

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 23 Aug 2012 19:02:35 +0200

livecd-rootfs (2.77) quantal; urgency=low

  * add unity-2d to the list of extra packages on ac100

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 23 Aug 2012 17:55:37 +0200

livecd-rootfs (2.76) quantal; urgency=low

  * live-build/auto/config:
    - Don't try to install an empty task name when building an image without
      a live task.
    - Fix installation of ubuntu-server fstab removal hook.
    - Pass --architectures to 'lb config', to make it easier to build images
      for a different architecture.
    - Attempt to restrict task installation to the native architecture.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 23 Aug 2012 11:09:10 +0100

livecd-rootfs (2.75) quantal; urgency=low

  * Adjust for live-build interface changes up to 3.0~a57-1ubuntu1.
  * Break ubuntu-defaults-builder (<< 0.32) to account for these interface
    changes.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 22 Aug 2012 13:29:29 +0100

livecd-rootfs (2.74) quantal; urgency=low

  * Change mksquashfs compression flags for LTSP images, turning
    compression back on to match current ltsp-update-image behaviour.

 -- Stéphane Graber <stgraber@ubuntu.com>  Mon, 20 Aug 2012 19:37:01 -0400

livecd-rootfs (2.73) quantal; urgency=low

  * Add u-boot-tools to the installed set for all u-boot ARM images
  * Remove ti-omap4-ppa from the omap4 images; it's no longer used

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 25 Jul 2012 06:37:02 -0600

livecd-rootfs (2.72) quantal; urgency=low

  * Install a hook to remove /etc/fstab rather than building ubuntu-server
    with --debian-installer=live; the latter has unwanted side-effects.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 23 Jul 2012 21:34:28 +0100

livecd-rootfs (2.71) quantal; urgency=low

  * live-build/auto/config: Don't purge .pyc files on ubuntu-server images.
  * live-build/auto/config: Build ubuntu-server with
    --debian-installer=live.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 23 Jul 2012 17:57:59 +0100

livecd-rootfs (2.70) quantal; urgency=low

  * live-build/auto/config: Don't install lupin-casper on ubuntu-server
    images.

 -- Colin Watson <cjwatson@ubuntu.com>  Sun, 22 Jul 2012 23:45:21 +0100

livecd-rootfs (2.69) quantal; urgency=low

  * live-build/auto/config: Add server task to ubuntu-server images.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 06 Jul 2012 12:39:46 +0100

livecd-rootfs (2.68) quantal; urgency=low

  * live-build/auto/config: Emit sources.list entries for -proposed if the
    environment variable PROPOSED is set (LP: #1019514).
  * BuildLiveCD: If the -p option was used, pass PROPOSED=1 to 'lb config'.

 -- Colin Watson <cjwatson@ubuntu.com>  Sat, 30 Jun 2012 07:13:50 +0100

livecd-rootfs (2.67) quantal; urgency=low

  * Switch i386 ubuntustudio to linux-lowlatency flavor (LP: #1018075)

 -- Adam Conrad <adconrad@ubuntu.com>  Tue, 26 Jun 2012 14:00:39 -0600

livecd-rootfs (2.66) quantal; urgency=low

  [ Jonathan Riddell ]
  * Build Kubuntu from universe.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 11 Jun 2012 12:49:57 +0100

livecd-rootfs (2.65) precise; urgency=low

  * Add (extra-)override parsing to the preinstalled pool to make sure
    we get task headers in the local pool for tasksel (LP: #819899)
  * Move temp directories under config so they get cleaned properly
  * Invoke apt-get update once with only the sources.list fragment
    for the local archive, so our package/task selection more closely
    mimics the CD experience (LP: #985258, #985737, #985280, #819900)
  * Write out a standard sources.list entry for preinstalled systems
    that's similar to the one generated by installers (LP: #985291)

 -- Adam Conrad <adconrad@ubuntu.com>  Fri, 20 Apr 2012 00:29:38 -0600

livecd-rootfs (2.64) precise; urgency=low

  * Add minimal and standard tasks to Ubuntu Studio images (LP: #962585).

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 23 Mar 2012 14:21:12 +0000

livecd-rootfs (2.63) precise; urgency=low

  * Add the ubiquity slideshow back to PREINSTALLED images (LP: #960688)

 -- Adam Conrad <adconrad@ubuntu.com>  Thu, 22 Mar 2012 12:46:18 -0600

livecd-rootfs (2.62) precise; urgency=low

  * On Lubuntu and Xubuntu, only use the generic kernel on amd64 and i386.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 20 Mar 2012 17:53:04 +0000

livecd-rootfs (2.61) precise; urgency=low

  [ Colin Watson ]
  * Use lowlatency for Ubuntu Studio amd64, since lowlatency-pae is
    i386-specific (LP: #959011).

  [ Julien Lavergne ]
  * Use generic (non-PAE) kernel for Lubuntu (LP: #958866).

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 19 Mar 2012 12:53:13 +0000

livecd-rootfs (2.60) precise; urgency=low

  * Use generic (non-PAE) kernel for Xubuntu (LP: #955009).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 15 Mar 2012 18:54:45 +0000

livecd-rootfs (2.59) precise; urgency=low

  * Switch Ubuntu Studio to lowlatency-pae kernel rather than lowlatency
    (LP: #956250).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 15 Mar 2012 18:35:14 +0000

livecd-rootfs (2.58) precise; urgency=low

  * Use lowlatency kernel for Ubuntu Studio (LP: #956250).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 15 Mar 2012 18:08:44 +0000

livecd-rootfs (2.57) precise; urgency=low

  * Move ac100-tarball-installer from install set to live set
    to make sure it's not pulling in other bits in the install
    pass (and because installers belong in the live set anyway)

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 29 Feb 2012 09:23:48 -0700

livecd-rootfs (2.56) precise; urgency=low

  [ Ante Karamatić ]
  * Add cloud-live project to livecd.sh and BuildLiveCD.

  [ Jonathan Riddell ]
  * Replace kubuntu-mobile with kubuntu-active
  * Remove kubuntu-netbook, now just part of kubuntu-desktop

 -- Jonathan Riddell <jriddell@ubuntu.com>  Wed, 22 Feb 2012 11:58:20 +0000

livecd-rootfs (2.55) precise; urgency=low

  * Build Lubuntu with --no-install-recommends, to match its seed structure
    (LP: #918401).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 02 Feb 2012 14:15:07 +0000

livecd-rootfs (2.54) precise; urgency=low

  * Remove the x-loader packages from omap and omap4 flavours, as they
    are now using the MLO provided by their respective u-boot packages.
  * Add zram-config to the ac100 subarch to replace the installer hack.

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 25 Jan 2012 22:34:59 -0700

livecd-rootfs (2.53) precise; urgency=low

  * live-build/auto/config: Fix ubuntustudio-dvd task selection.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 23 Jan 2012 19:46:07 +0000

livecd-rootfs (2.52) precise; urgency=low

  * live-build/auto/config: Fix support for ubuntustudio-dvd project.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 23 Jan 2012 17:17:04 +0000

livecd-rootfs (2.51) precise; urgency=low

  * BuildLiveCD: Accept ubuntustudio-dvd as a valid project.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 20 Jan 2012 23:23:48 +0000

livecd-rootfs (2.50) precise; urgency=low

  * Add Ubuntu Studio support.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 20 Jan 2012 20:51:04 +0000

livecd-rootfs (2.49) precise; urgency=low

  [ Adam Conrad ]
  * Update maintainer to Ubuntu Developers, LaMont doesn't upload much.

  [ Colin Watson ]
  * Get live-build to divert update-initramfs while building the chroot.
    This should cut a few minutes off builds, particularly on slow
    architectures.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 16 Jan 2012 12:53:23 +0000

livecd-rootfs (2.48) precise; urgency=low

  * Fix sense of live/preinstalled change in 2.46; add the live task for
    non-preinstalled images, rather than only for preinstalled images.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 10 Jan 2012 12:41:36 +0000

livecd-rootfs (2.47) precise; urgency=low

  * put ti-omap4-ppa into omap4 images

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 10 Jan 2012 12:46:20 +0100

livecd-rootfs (2.46) precise; urgency=low

  * Guard legacy cloop code in a [ -f ], so it stops failing.
  * Don't add the LIVE_TASK for any PREINSTALLED images.

 -- Adam Conrad <adconrad@ubuntu.com>  Mon, 09 Jan 2012 03:23:26 -0700

livecd-rootfs (2.45) precise; urgency=low

  * Change default suite to precise (better late than never?)
  * Add the -A option to the getopts argument list, so it works.

 -- Adam Conrad <adconrad@ubuntu.com>  Mon, 05 Dec 2011 07:50:14 -0700

livecd-rootfs (2.44) precise; urgency=low

  * Mirror armel support as armhf, so we can build all the same images.
  * Allow ARCH to be specified on the BuildLiveCD command line as -A,
    so that it doesn't have to be hardcoded for non-native builders.

 -- Adam Conrad <adconrad@ubuntu.com>  Fri, 02 Dec 2011 11:41:13 -0700

livecd-rootfs (2.43) oneiric; urgency=low

  * BuildLiveCD: Stop building ubuntu-defaults-image images with universe.
    ubuntu-defaults-zh-cn is in main now, and it causes images to overflow
    due to the extra /var/lib/apt/lists indexes.

 -- Martin Pitt <martin.pitt@ubuntu.com>  Fri, 07 Oct 2011 18:29:59 +0200

livecd-rootfs (2.42) oneiric; urgency=low

  * Explicitly select ubuquity frontend as well, to match the
    oem-config frontend, and avoid pulling in unwanted deps.

 -- Adam Conrad <adconrad@ubuntu.com>  Thu, 06 Oct 2011 19:30:51 -0600

livecd-rootfs (2.41) oneiric; urgency=low

  * Re-enable swap on jasper-using images, a regression from
    the switch from livecd-rootfs to live-build (LP: #868662)

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 05 Oct 2011 13:20:24 -0600

livecd-rootfs (2.40) oneiric; urgency=low

  * Revert the previous change and apply it for all $PREINSTALLED
    targets instead of just ext2|ext3|ext4, so ac100 gets the fix.

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 28 Sep 2011 15:20:38 -0600

livecd-rootfs (2.39) oneiric; urgency=low

  * Explicitly select the oem-config frontend to install on a
    per-project basis, to match the ubiquity in use (LP: #820514)

 -- Adam Conrad <adconrad@ubuntu.com>  Mon, 26 Sep 2011 19:14:56 -0600

livecd-rootfs (2.38) oneiric; urgency=low

  * Add main, restricted, universe, and multiverse to the sources.list
    for Wubi disk images (LP: #855301).

 -- Evan Dandrea <ev@ubuntu.com>  Thu, 22 Sep 2011 10:31:11 +0100

livecd-rootfs (2.37) oneiric; urgency=low

  * BuildLiveCD: Fix typo that broke installing ubuntu-defaults-builder and
    its recommendations.
  * Squash errors from 'ls vmlinu?-*'.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 14 Sep 2011 12:15:02 +0100

livecd-rootfs (2.36) oneiric; urgency=low

  [ Colin Watson ]
  * BuildLiveCD: Add subproject and ubuntu-defaults-image locale to error
    mail subject.
  * BuildLiveCD: Install recommendations of ubuntu-defaults-builder.

  [ Oliver Grawert ]
  * also store the size of the ac100 tarball in the initrd, since the tarball
    changes its name several times during build we need a second criteria to not
    loop over all availiable tarballs with md5sum at install time.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 06 Sep 2011 15:25:52 +0200

livecd-rootfs (2.35) oneiric; urgency=low

  * Set KERNEL_FLAVOURS for mx5.

 -- Jani Monoses <jani@ubuntu.com>  Wed, 24 Aug 2011 18:18:42 +0300

livecd-rootfs (2.34) oneiric; urgency=low

  * drop FLASH_KERNEL_SKIP from live-build config, flash-kernel suppression is
    handled through a diversion already.
  * add FLASH_KERNEL_SKIP explicitly to the post build ac100 update-initramfs
    chroot call.

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 24 Aug 2011 14:16:55 +0200

livecd-rootfs (2.33) oneiric; urgency=low

  * BuildLiveCD: Add the subproject (if any) and the ubuntu-defaults-image
    locale (if any) to the output directory name.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 24 Aug 2011 12:25:52 +0100

livecd-rootfs (2.32) oneiric; urgency=low

  * Fix kernel package name for mx5.

 -- Jani Monoses <jani@ubuntu.com>  Wed, 24 Aug 2011 14:14:10 +0300

livecd-rootfs (2.31) oneiric; urgency=low

  * Link binary.iso or binary-hybrid.iso, if found, into the output
    directory for use by BuildLiveCD.
  * Tolerate ubuntu-defaults-image's kernel renaming.
  * Add a -u option to BuildLiveCD which calls ubuntu-defaults-image.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 23 Aug 2011 18:35:56 +0100

livecd-rootfs (2.30) oneiric; urgency=low

  * provide .bootimg as a link to .bootimg-$FLAVOUR similar to the
    naming scheme we use for initrd and kernel files.

 -- Oliver Grawert <ogra@ubuntu.com>  Sat, 20 Aug 2011 10:58:30 +0200

livecd-rootfs (2.29) oneiric; urgency=low

  *  rename ac100 bootimage to something the build system can parse easier.

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 19 Aug 2011 14:29:10 +0200

livecd-rootfs (2.28) oneiric; urgency=low

  * Switch ubuntu-dvd to ubuntu-usb and ubuntu-usb-live tasks.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 19 Aug 2011 10:56:49 +0100

livecd-rootfs (2.27) oneiric; urgency=low

  * fix typo in abootimg call

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 18 Aug 2011 18:04:44 +0200

livecd-rootfs (2.26) oneiric; urgency=low

  * make sure flash-kernel is not executed during build, this setting wasn't
    transitioned from livecd.sh yet

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 18 Aug 2011 11:55:54 +0200

livecd-rootfs (2.25) oneiric; urgency=low

  * include the md5 sum of the rootfs tarball in the initrd, so the installer
    can check against it for ac100 installs
  * post process the kernel and initrd for ac100 though abootimg to get a
    proper android boot image

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 17 Aug 2011 17:55:08 +0200

livecd-rootfs (2.24) oneiric; urgency=low

  * add missing ;; to the mx5 case statement

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 16 Aug 2011 15:40:51 +0200

livecd-rootfs (2.23) oneiric; urgency=low

  [ Jani Monoses ]
  * Add mx5 subarch support for Freescale i.MX53

  [ Oliver Grawert ]
  * adjust the packagelist for ac100 a bit, according to adam it should not
    need the kernel metapackage seeded if it matches the naming convention
  * do not install preinstall-pool on ac100-server, it breaks for no apparent
    reason atm, this makes server rootfses for ac100 buildable again.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 16 Aug 2011 14:50:33 +0200

livecd-rootfs (2.22) oneiric; urgency=low

  [ Adam Conrad ]
  * Switch a hardcoded "boot" to "$INITFS" in auto/build.

  [ Colin Watson ]
  * BuildLiveCD: Make sure livecd-rootfs is still installed in the chroot
    after the dist-upgrade.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 11 Aug 2011 12:19:58 +0100

livecd-rootfs (2.21) oneiric; urgency=low

  * make sure ac100 images have universe enabled since the kernel lives there.

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 10 Aug 2011 13:14:25 +0200

livecd-rootfs (2.20) oneiric; urgency=low

  * make sure the right packages are installed on armel+ac100 subarch builds

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 09 Aug 2011 16:25:11 +0200

livecd-rootfs (2.19) oneiric; urgency=low

  * Add support for building a pool of packages into the live config:
    - define SEEDMIRROR, PREINSTALL_POOL, PREINSTALL_POOL_SEEDS in config
    - set PREINSTALL_POOL_SEEDS to "server-ship" for ubuntu-server
    - crib seed inheritance logic from cdimage implementation of same
    - run germinate against seeds from SEEDMIRROR if to populate
      PREINSTALL_POOL with a list of packages from PREINSTALL_POOL_SEEDS
    - create a local-hook to download PREINSTALL_POOL packages to rootfs
  * And add support to deal with the above pool of packages during build:
    - generate a GPG key in the background if we're going to need one
    - create a sources.list.d entry pointing at the rootfs pool
    - create a Packages file and create and sign a Release file
    - add our previously-generated key to the apt keyring and toss it

 -- Adam Conrad <adconrad@ubuntu.com>  Tue, 26 Jul 2011 15:26:01 -0600

livecd-rootfs (2.18) oneiric; urgency=low

  * export LB_LINUX_FLAVOURS="none" in auto/clean, so the clean
    routine doesn't bomb out with no kernels selected.  This almost
    certainly needs fixing in live-build, but works here for now

 -- Adam Conrad <adconrad@ubuntu.com>  Fri, 15 Jul 2011 18:21:28 -0600

livecd-rootfs (2.17) oneiric; urgency=low

  * Only set KERNEL_FLAVOURS to SUBARCH if SUBARCH is already set.

 -- Adam Conrad <adconrad@ubuntu.com>  Fri, 15 Jul 2011 14:55:13 -0600

livecd-rootfs (2.16) oneiric; urgency=low

  * Add support for building new "ubuntu-core" rootfs tarballs:
    - add project support to BuildLiveCD and auto/config
    - make auto/config and auto/build deal with plain FS types
    - add some logic to auto/build to not choke with no kernels
  * Minor cleanups to BuildLiveCD (LANG=C, bump current suite)
  * Fix one spot where I missed future-proofing ext4 support

 -- Adam Conrad <adconrad@ubuntu.com>  Fri, 15 Jul 2011 11:19:49 -0600

livecd-rootfs (2.15) oneiric; urgency=low

  * Support generating different binary image types using
    BINARYFORMAT=iso-hybrid and so on (although this won't actually work
    until we create a syslinux-themes-ubuntu package).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 14 Jul 2011 18:27:04 +0100

livecd-rootfs (2.14) oneiric; urgency=low

  * Handle package/task list changes in live-build 3.0~a22-1.
  * Handle local sources.list changes in live-build 3.0~a22-1.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 13 Jul 2011 19:06:29 +0100

livecd-rootfs (2.13) oneiric; urgency=low

  * Didn't realize that you can pass multiple projects to BuildLiveCD.
    Let's try SUBPROJECT using an argument.

 -- Evan Dandrea <ev@ubuntu.com>  Wed, 06 Jul 2011 17:21:48 +0100

livecd-rootfs (2.12) oneiric; urgency=low

  [ Colin Watson ]
  * Re-enable deb-src lines for Edubuntu (LP: #806428).

 -- Evan Dandrea <ev@ubuntu.com>  Wed, 06 Jul 2011 16:57:39 +0100

livecd-rootfs (2.11) oneiric; urgency=low

  * Pass SUBPROJECT to live-build.

 -- Evan Dandrea <ev@ubuntu.com>  Wed, 06 Jul 2011 11:59:24 +0100

livecd-rootfs (2.10) oneiric; urgency=low

  * Initial Wubi support.

 -- Evan Dandrea <ev@ubuntu.com>  Mon, 04 Jul 2011 10:54:07 +0100

livecd-rootfs (2.9) oneiric; urgency=low

  * Rename the ARM headless image to ubuntu-server for oneiric
  * Future-proof --chroot-filesystem support for a switch to ext4

 -- Adam Conrad <adconrad@ubuntu.com>  Tue, 28 Jun 2011 14:20:35 +0100

livecd-rootfs (2.8) oneiric; urgency=low

  * Use all_chroot_pyc-purge.sh hook from live-build 3.0~a21-1ubuntu4.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 22 Jun 2011 15:38:30 +0100

livecd-rootfs (2.7) oneiric; urgency=low

  * Install xubuntu-live for xubuntu, not edubuntu-live (LP: #800211).

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 21 Jun 2011 17:41:26 +0100

livecd-rootfs (2.6) oneiric; urgency=low

  * '--initramfs none' produces *.packages* outputs rather than *.manifest*;
    handle this.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 16 Jun 2011 12:59:09 +0100

livecd-rootfs (2.5) oneiric; urgency=low

  * Pass correct IMAGEFORMAT through to live-build from BuildLiveCD.
  * Add Lubuntu support.
  * Set --chroot-filesystem option if IMAGEFORMAT is ext2 or ext3.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 15 Jun 2011 14:40:05 +0100

livecd-rootfs (2.4) oneiric; urgency=low

  * Remove old config directory before creating a new configuration.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 15 Jun 2011 10:15:20 +0100

livecd-rootfs (2.3) oneiric; urgency=low

  * Set pipefail (bash-specific) in auto/build so that we fail immediately
    if the main image build fails.
  * Anchor regex to avoid misdetecting vmlinux-3.0-0-powerpc64-smp as a
    powerpc flavour kernel.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 14 Jun 2011 09:16:43 +0100

livecd-rootfs (2.2) oneiric; urgency=low

  * Pass --linux-flavours to lb config if necessary.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 14 Jun 2011 08:30:10 +0100

livecd-rootfs (2.1) oneiric; urgency=low

  * Fix ordering of log file creation in BuildLiveCD.
  * Fix permissions in BuildLiveCD when setting up auto directory.
  * Switch from --binary-remove-linux to config/binary_rootfs/excludes.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 13 Jun 2011 23:32:40 +0100

livecd-rootfs (2.0) oneiric; urgency=low

  * Add live-build support.  The old livecd.sh is still here for
    compatibility, but this package's primary purpose is now to provide
    Ubuntu-specific configuration for live-build.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 13 Jun 2011 12:35:47 +0100

livecd-rootfs (1.167) oneiric; urgency=low

  * Drop language-support-en from LIVELIST for kubuntu-mobile and
    kubuntu-netbook; it's not in the oneiric archive any more, and the
    necessary packages are already in the respective tasks.

 -- Colin Watson <cjwatson@ubuntu.com>  Sun, 29 May 2011 21:10:36 +0100

livecd-rootfs (1.166) natty; urgency=low

  * Make the output kernel world-readable, since it was changed to be
    world-unreadable in linux 2.6.38-8.40.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 07 Apr 2011 11:41:01 +0100

livecd-rootfs (1.165) natty; urgency=low

  * Drop the hack that removes ubiquity-slideshow-* on armel, webkit works
    again.

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 16 Mar 2011 12:09:28 +0100

livecd-rootfs (1.164) natty; urgency=low

  * Use Edubuntu theming for Edubuntu LTSP chroot.

 -- Jonathan Carter <jonathan@ubuntu.com>  Mon, 14 Mar 2011 10:03:33 +0000

livecd-rootfs (1.163) natty; urgency=low

  * make sure preinstalled images do not have the build machine set as
    hostname before oem-config runs (LP: #605972)

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 10 Mar 2011 14:48:43 +0100

livecd-rootfs (1.162) natty; urgency=low

  * the name of the flavour needs to be ubuntu-headless, not just headless

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 09 Mar 2011 16:48:28 +0100

livecd-rootfs (1.161) natty; urgency=low

  * add ubuntu-headless as allowed flavour to BuildLiveCD

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 09 Mar 2011 13:51:11 +0100

livecd-rootfs (1.160) natty; urgency=critical

  * Emergency hack to remove ubiquity-slideshow-* on armel due to python-webkit
    causing a segfault (Works aroud LP: #727368)

 -- Michael Casadevall <mcasadevall@ubuntu.com>  Wed, 02 Mar 2011 11:33:51 -0800

livecd-rootfs (1.159) natty; urgency=low

  * create an empty swapfile on ext2/3 images by default, we care for use
    or deletion on first boot, this cuts of 3min from the first boot of
    preinstalled images.

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 23 Feb 2011 14:55:06 +0100

livecd-rootfs (1.158) natty; urgency=low

  * switch default session for armel netbook images to unity-2d

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 15 Feb 2011 18:20:57 +0100

livecd-rootfs (1.157) natty; urgency=low

  * drop IGEPv2 x-loader and u-boot from livefs.sh, they are not in main
    and thus break image builds

 -- Oliver Grawert <ogra@ubuntu.com>  Sat, 12 Feb 2011 13:32:59 +0100

livecd-rootfs (1.156) natty; urgency=low

  * Add X-Loader and U-Boot packages for IGEPv2, Beagle and Panda
    in the OMAP3/4 images.

 -- Jani Monoses <jani@ubuntu.com>  Fri, 11 Feb 2011 17:21:27 +0200

livecd-rootfs (1.155) natty; urgency=low

  * Add headless image type for armel minimal developer image building,
    same as base now, but may be modified later.
  * Disable running of flash-kernel on armel as it breaks the script when
    there is no boot partition available to update.

 -- Jani Monoses <jani@ubuntu.com>  Wed, 26 Jan 2011 14:01:18 +0200

livecd-rootfs (1.154) natty; urgency=low

  * apply setting of the default session to all ubuntu-armel builds
    so we do not need to do this on first boot.

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 10 Jan 2011 23:27:43 +0100

livecd-rootfs (1.153) natty; urgency=low

  * Update default suite in BuildLiveCD to natty.
  * Use --force-unsafe-io for all dpkg operations.  If we crash we'll just
    destroy the chroot and start from scratch, so syncing is pointless.

 -- Colin Watson <cjwatson@ubuntu.com>  Sat, 04 Dec 2010 12:02:15 +0000

livecd-rootfs (1.152) maverick; urgency=low

  * livecd.sh:
    - Restore the keyring earlier in the chroot (before the dist-upgrade).
      This fixes the missng key for the extras.ubuntu.com that is added
      during the livecd build dist-ugprade (LP: #650525)

 -- Michael Vogt <michael.vogt@ubuntu.com>  Thu, 30 Sep 2010 14:32:57 +0200

livecd-rootfs (1.151) maverick; urgency=low

  * enforce installation of only suitable header packages for the respective
    subarch on armel instead of blindly installing all armel headers (LP: #600478)

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 24 Sep 2010 14:54:53 +0200

livecd-rootfs (1.150) maverick; urgency=low

  * Set GDM's default session to une-efl on ubuntu-netbook armel+dove.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 31 Aug 2010 19:44:43 +0100

livecd-rootfs (1.149) maverick; urgency=low

  * Fix syntax error in icon cache checks.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 31 Aug 2010 12:36:42 +0100

livecd-rootfs (1.148) maverick; urgency=low

  * Add universe support to kubuntu-mobile to work around seed change

 -- Emmet Hikory <persia@ubuntu.com>  Thu, 26 Aug 2010 23:57:25 +0900

livecd-rootfs (1.147) maverick; urgency=low

  * Add support for kubuntu-mobile

 -- Emmet Hikory <persia@ubuntu.com>  Thu, 26 Aug 2010 13:29:12 +0900

livecd-rootfs (1.146) maverick; urgency=low

  * Add a series of checkpoints where the current time is logged.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 20 Aug 2010 15:55:30 +0100

livecd-rootfs (1.145) maverick; urgency=low

  * raise inode count during ext2fs build to be able to use the full size of
    the ext2 image
  * drop debugging code

 -- Oliver Grawert <ogra@ubuntu.com>  Sat, 31 Jul 2010 16:29:40 +0200

livecd-rootfs (1.144) maverick; urgency=low

  * cat /proc/mounts before trying to copy to the ext2 image, there still
    seems to be some virtual fs mounted in the chroot we try to copy to the
    image.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 27 Jul 2010 11:51:15 +0200

livecd-rootfs (1.143) maverick; urgency=low

  * add more spare space to the ext2 filesystem images to compensate journal
    overhead and make it possible to run oem-config even without resizing
  * do not reserve 5% for root in the ext2 image files.

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 26 Jul 2010 14:26:08 +0200

livecd-rootfs (1.142) maverick; urgency=low

  * do not fail if losetup -d does not find a device

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 23 Jul 2010 10:39:16 +0200

livecd-rootfs (1.141) maverick; urgency=low

  * add some debug output to teh ext2 image creation to see whats going on

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 22 Jul 2010 18:29:53 +0200

livecd-rootfs (1.140) maverick; urgency=low

  * tell mke2fs that we _really_ want a filesystem on this "non-blockdevice"

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 22 Jul 2010 09:11:14 +0200

livecd-rootfs (1.139) maverick; urgency=low

  [ Steve Langasek ]
  * One more undefined variable fix for set -u

  [ Oliver Grawert ]
  * drop genext2fs, it is simply to slow, instead we use a loop munted ext2
    image now.

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 21 Jul 2010 15:15:18 +0200

livecd-rootfs (1.138) maverick; urgency=low

  * Don't go overboard with the downgrading of packages; this probably caused
    the rebuild failure attempts, we'll do without downgrading base packages
    already installed by debootstrap in this use case.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 21 Jul 2010 09:18:48 +0200

livecd-rootfs (1.137) maverick; urgency=low

  * Make sure APT_SOURCE is always set.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 21 Jul 2010 07:52:47 +0100

livecd-rootfs (1.136) maverick; urgency=low

  * One more fix; if we're asking apt to downgrade packages, we have to
    explicitly pass --force-yes.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 21 Jul 2010 01:08:31 +0200

livecd-rootfs (1.135) maverick; urgency=low

  * Implement the -a option in the right place - in livecd.sh, not in
    BuildLiveCD.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 20 Jul 2010 22:38:10 +0200

livecd-rootfs (1.134) maverick; urgency=low

  * Add -a option to BuildLiveCD to allow pulling from an additional apt
    source.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 20 Jul 2010 18:25:13 +0200

livecd-rootfs (1.133) maverick; urgency=low

  * adjust BuildLiveCD PUBDIR variable to match reality (uses SUBARCH on the
    buildd)

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 16 Jul 2010 15:56:01 +0200

livecd-rootfs (1.132) maverick; urgency=low

  * BuildLiveCD: revert change from revno 284 that adds subarch to the logfile
    names as it breaks mailing of the logs from the cdimage buildlive script

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 15 Jul 2010 11:19:54 +0200

livecd-rootfs (1.131) maverick; urgency=low

  * add support for omap4 images

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 02 Jul 2010 11:24:55 +0200

livecd-rootfs (1.130) maverick; urgency=low

  * Revert to version 1.127: we do want the subarch in the filename so these
    files can coexist in the same directory, as they do for all other archs.
  * BuildLiveCD: drop the subarch from the directory name, which has never
    made sense; but we don't want this to go live without coordination with
    cdimage.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 29 Jun 2010 17:46:46 -0700

livecd-rootfs (1.129) maverick; urgency=low

  * fix typo

 -- Oliver Grawert <ogra@ubuntu.com>  Wed, 30 Jun 2010 01:11:51 +0200

livecd-rootfs (1.128) maverick; urgency=low

  * do not mangle the project name by attaching the subarch to it on armel,
    this results in livefs names that confuse find-live_filesystem

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 29 Jun 2010 23:04:10 +0200

livecd-rootfs (1.127) maverick; urgency=low

  * make BuildLiveCD set $SUBARCHARG properly again, else livecd.sh doesnt get
    the necessary option handed over.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 29 Jun 2010 12:54:35 +0200

livecd-rootfs (1.126) maverick; urgency=low

  * Set LIVE_BOOT_SCRIPTS to "casper lupin-casper" for non-jasper builds,
    rather than leaving it empty.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 28 Jun 2010 16:50:23 +0100

livecd-rootfs (1.125) maverick; urgency=low

  * make livecd.sh not fail if e2fsck returns non-zero (which is always the
    case with genext2fs images due to bug 583317)

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 28 Jun 2010 16:27:51 +0200

livecd-rootfs (1.124) maverick; urgency=low

  * BuildLiveCD: update livecd chroot at start of run, for freshest
    livecd-rootfs package.

 -- LaMont Jones <lamont@ubuntu.com>  Sat, 26 Jun 2010 07:37:46 -0600

livecd-rootfs (1.123) maverick; urgency=low

  * Make sure LIVE_BOOT_SCRIPTS is always defined.
  * Convert to source format 3.0 (native).

 -- Colin Watson <cjwatson@ubuntu.com>  Sat, 26 Jun 2010 10:28:40 +0100

livecd-rootfs (1.122) maverick; urgency=low

  * livecd.sh don't set a variable to itself, especially when the variable
    is empty and causes build failures under set -u.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 25 Jun 2010 21:59:16 -0700

livecd-rootfs (1.121) maverick; urgency=low

  [ LaMont Jones ]
  * BuildLiveCD: only pass -f if we were told it, since older chroots don't
    support it.

  [ Oliver Grawert ]
  * instead of special casing for only one arch, base jasper vs casper
    inclusion on the IMAGETYPE variable
  * depend on genext2fs

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 25 Jun 2010 17:30:28 +0200

livecd-rootfs (1.120) maverick; urgency=low

  * add special case to ubuntu-netbook on omap3 and 4, we want jasper instead of
    casper in the initramfs

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 15 Jun 2010 16:34:25 +0200

livecd-rootfs (1.119) maverick; urgency=low

  * Depends: lzma
  * drop tmpfs in general while allowing a envvar to enable it again

 -- LaMont Jones <lamont@ubuntu.com>  Fri, 11 Jun 2010 08:37:17 -0600

livecd-rootfs (1.118) maverick; urgency=low

  * add temporary workaround for genext2fs bug 583317 (wrong filesystem
    revision for ext3 filesystems)

 -- Oliver Grawert <ogra@ubuntu.com>  Thu, 10 Jun 2010 07:38:05 +0200

livecd-rootfs (1.117) maverick; urgency=low

  * Only use tmpfs on amd64, due to space restrictions on the current
    build machines.

 -- LaMont Jones <lamont@ubuntu.com>  Sat, 05 Jun 2010 06:50:24 -0600

livecd-rootfs (1.116) maverick; urgency=low

  [Michael Casadevall]
  * added new -f switch for changing image build type
  * added support for building ext2 and ext3 images in addition to squashfs
  * fixed spacing in the livefs build code
  * extended BuildLiveCD to handle the -f switch
  * reworked BuildLiveCD command line parsing to be more sane

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 03 Jun 2010 18:40:10 +0200

livecd-rootfs (1.115) maverick; urgency=low

  * use a tmpfs for the livefs root directory, to get some speed
    on the build machines. (ubuntu-dvd requires > 5GB, so use 8GB)

 -- LaMont Jones <lamont@ubuntu.com>  Wed, 05 May 2010 10:42:00 -0600

livecd-rootfs (1.114) lucid; urgency=low

  * make sure STRIP_VMLINUZ=no is set for omap, also change the code to only
    use the case statement for matching subarches instead of adding an extra
    check.
  * fix the comment for STRIP_VMLINUZ to reflect reality.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 20 Apr 2010 13:20:10 +0200

livecd-rootfs (1.113) lucid; urgency=low

  * fix typo

 -- LaMont Jones <lamont@ubuntu.com>  Sat, 27 Mar 2010 21:10:16 -0600

livecd-rootfs (1.112) lucid; urgency=low

  * ltsp image needs to be readable

 -- LaMont Jones <lamont@ubuntu.com>  Fri, 26 Mar 2010 20:23:41 -0600

livecd-rootfs (1.111) lucid; urgency=low

  * edubuntu-dvd/ltsp: mksquashfs needs the directory to exist
  * clean up comments

 -- LaMont Jones <lamont@ubuntu.com>  Fri, 26 Mar 2010 19:09:25 -0600

livecd-rootfs (1.110) lucid; urgency=low

  * Add support for armel+omap, and remove incorrect comments from the armel
    kernel installation block.
  * Really update the maintainer field.

 -- Steve Kowalik <stevenk@ubuntu.com>  Thu, 25 Mar 2010 00:49:17 +1100

livecd-rootfs (1.109) lucid; urgency=low

  * if the ltsp squashfs image build fails, fail the build.
  * use mksquashfs directly, instead of ltsp-update-image

 -- LaMont Jones <lamont@ubuntu.com>  Wed, 24 Mar 2010 05:15:39 -0600

livecd-rootfs (1.108) lucid; urgency=low

  * Deliver edubuntu-dvd/i386 ltsp squashfs image, since that's what
    actually gets built these days.
  * Update maintainer field.

 -- LaMont Jones <lamont@ubuntu.com>  Mon, 22 Mar 2010 21:40:59 -0600

livecd-rootfs (1.107) lucid; urgency=low

  * Deliver edubuntu/i386 ltsp sqaushfs image. LP: #531546
  * fix typo in deciding to remove /usr/share/icons/*/icon-theme.cache
    on kubuntu-ish images.

 -- LaMont Jones <lamont@ubuntu.com>  Wed, 17 Mar 2010 15:07:12 -0600

livecd-rootfs (1.106) lucid; urgency=low

  * Delete Gnome icon cache for Kubuntu images

 -- Jonathan Riddell <jriddell@ubuntu.com>  Tue, 23 Feb 2010 17:51:57 +0000

livecd-rootfs (1.105) lucid; urgency=low

  * Edubuntu is allowed to pull from universe; update livecd.sh accordingly

 -- Steve Langasek <steve.langasek@ubuntu.com>  Tue, 26 Jan 2010 17:17:35 -0800

livecd-rootfs (1.104) lucid; urgency=low

  * Rename Ubuntu Netbook Remix to Ubuntu Netbook.

 -- Steve Kowalik <stevenk@ubuntu.com>  Fri, 18 Dec 2009 14:16:26 +1100

livecd-rootfs (1.103) lucid; urgency=low

  * make sure there is no old squashfs around before attempting to squash a
    new one.

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 07 Dec 2009 11:27:50 +0100

livecd-rootfs (1.102) lucid; urgency=low

  * Don't output a newline in filesystem.size.

 -- Evan Dandrea <evand@ubuntu.com>  Thu, 19 Nov 2009 14:57:10 -0600

livecd-rootfs (0.101) lucid; urgency=low

  * Write out the total size of uncompressed squashfs to be used by
    partman and ubiquity.

 -- Evan Dandrea <evand@ubuntu.com>  Wed, 18 Nov 2009 12:11:10 -0600

livecd-rootfs (0.100) karmic; urgency=low

  * UNR LIVELIST: list lupin-casper and laptop-detect explicitly and drop
    ubiquity which is in the live seed already.  Fixes lack of wubi support in
    UNR images; LP: #457246.

 -- Loïc Minier <loic.minier@ubuntu.com>  Thu, 22 Oct 2009 14:09:41 +0200

livecd-rootfs (0.99) karmic; urgency=low

  * Revert 0.98 change; it's actually much more wide-ranging than I thought as
    it would cause each livefs build on a subarch to rotate the timestamped
    dir and hence would mask the previous builds; and even if that would be
    fixed, arch-indepedent filenames such as manifest/kernel/initrd/etc.
    symlinks would clash.
  * Rename EXTRASOURCE to PPA and also define PPAMIRROR near top, set to
    ppa.launchpad.net.  Changing to PPA avoids listing non-main components in
    deb lines and having an useful comment in sources.list.
  * Create an etc/apt/preferences file Pin-ing the PPA at 550 when there's
    one.
  * Gross hack to reinstall the moblin-ppa-keyring package after the trusted
    db is put back in place since otherwise we miss the GPG key we wanted.
  * Fix computation of Origin fields for PPAs named "ppa" and document the
    exception along with the expected format for the PPA var in comments.
    LP: #434243
  * Move the code taking a backup of the APT trusted keyring to just after
    sources.list generation (this is safe since there's no apt call inbetween)
    and move the installation of the moblin-archive-keyring just before the
    backup is taken; this allows dropping the hack of reinstalling the keyring
    package at the end of the build.  It might break apt-get update for UMR
    before the host keys are appended to the trusted keyring though.
  * Remove ${ROOT}var/cache/apt/{,src}pkgcache.bin after installing the moblin
    keyring package, workaround for LP #442082.
  * Run apt-get update one more time after installing the moblin keyring
    package, to promote Release.gpg from APT's lists/partial/ to lists/.
    Ideally APT would do that for us on apt-key updates.
  * Also change computation of Origin field for PPAs when generating the final
    APT config; ideally we wouldn't have to duplicate this code though;
    perhaps the removal of APT preferences file can be limited to hardy too.
    Also add an Explanation: header in the final preferences.

 -- Loïc Minier <loic.minier@ubuntu.com>  Sun, 04 Oct 2009 13:53:40 +0200

livecd-rootfs (0.98) karmic; urgency=low

  * Put livecd logs into project/ not project-subarch/.

 -- Loïc Minier <loic.minier@ubuntu.com>  Wed, 23 Sep 2009 09:46:43 +0200

livecd-rootfs (0.97) karmic; urgency=low

  [ Colin Watson ]
  * Upgrade to debhelper v7.

  [ Loïc Minier ]
  * Make stripping of vmlinuz from livefs optional for uImage subarches where
    we can't use this trick to save space and disable it on armel+dove.

 -- Loïc Minier <loic.minier@ubuntu.com>  Wed, 16 Sep 2009 00:52:18 +0200

livecd-rootfs (0.96) karmic; urgency=low

  [ Loïc Minier ]
  * Append ${SUBARCH:+-$SUBARCH} to LOG filename for consistency.

  [ Colin Watson ]
  * Edubuntu's desktop task is edubuntu-desktop-gnome, not edubuntu-desktop.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 15 Sep 2009 13:13:10 +0100

livecd-rootfs (0.95) karmic; urgency=low

  * Add the EXTRASOURCE apt source to the "pristine" /etc/apt/sources.list.

 -- Steve Kowalik <stevenk@ubuntu.com>  Tue, 01 Sep 2009 17:34:57 +1000

livecd-rootfs (0.94) karmic; urgency=low

  [ Steve Kowalik ]
  * Add support for UMR.

  [ Loïc Minier ]
  * Use ubuntu-moblin-live in LIVELIST instead of a hardcoded list.

 -- Loïc Minier <loic.minier@ubuntu.com>  Thu, 27 Aug 2009 12:36:10 +0200

livecd-rootfs (0.93) karmic; urgency=low

  * remove temporary enablement of universe from the armel subarchitectures

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 25 Aug 2009 18:38:07 +0200

livecd-rootfs (0.92) karmic; urgency=low

  * change armel+imx51 back to the proper metapackage name
  * enable universe for armel+dove build
  * drop armel fallback, we want to fail officially if no armel subarch is set
  * clean some trailing whitespace in the armel subarch case statement

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 21 Aug 2009 19:33:15 +0200

livecd-rootfs (0.91) karmic; urgency=low

  [ Steve Kowalik ]
  * Remove subarch hack for ubuntu-mid, it was never used.

  [ Mario Limonciello ]
  * Remove metapackage hack for mythbuntu.  Now that tasks are published for
    multiverse, it's no longer necessary.

 -- Mario Limonciello <superm1@ubuntu.com>  Thu, 13 Aug 2009 22:19:26 -0500

livecd-rootfs (0.90) karmic; urgency=low

  * make armel imx51 build from universe for alpha4 until our kernel package
    is in main.
  * change linux metapackage name to linux-babbage on imx51 to reflect the new
    name choice of the kernel team.

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 11 Aug 2009 10:55:54 +0200

livecd-rootfs (0.89) karmic; urgency=low

  [ Michael Casadevall ]
  * Move armel to subarchitectures so we can support dove .
  * Made armel with no subarch default to imx51.

  [ Steve Kowalik ]
  * livecd.sh: Stop building UNR from universe.

 -- Steve Kowalik <stevenk@ubuntu.com>  Wed, 05 Aug 2009 14:20:37 +0100

livecd-rootfs (0.88) karmic; urgency=low

  [ Adam Conrad ]
  * Make the sort file fetch a no-op for now, since the old URL was
    hanging the builds, and we don't actually HAVE sort files.  If
    that ever changes, we can undo this.

  [ Mario Limonciello ]
  * Install a hybrid of tasks and a meta package for mythbuntu to
    boot out all the gnome stuff that's getting added by dependency
    resolution order.

 -- Mario Limonciello <superm1@ubuntu.com>  Thu, 23 Jul 2009 03:08:53 -0500

livecd-rootfs (0.87) karmic; urgency=low

  [ Timo Aaltonen ]
  * livecd.sh: Don't mess with xorg.conf anymore, we don't install one
    by default.

  [ Colin Watson ]
  * Clean up the chroot tree before trying to remove it, just in case
    there's some leftover junk from a previous failed build.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 07 Jul 2009 13:07:47 +0100

livecd-rootfs (0.86) karmic; urgency=low

  [ Scott Kitterman ]
  * BuildLiveCD: Add kubuntu-netbook, drop kubuntu-kde4
  * livecd.sh: Support kubuntu-netbook, drop kubuntu-kde4

  [ Steve Kowalik ]
  * livecd.sh: Switch UNR to using ubuntu-netbook-remix^ and unr-live^.

 -- Steve Kowalik <stevenk@ubuntu.com>  Tue, 30 Jun 2009 12:13:08 +1000

livecd-rootfs (0.85) karmic; urgency=low

  * Compress the initrd with LZMA by default, now that the kernel supports
    this across the board. Saves about 3MB on Ubuntu live CDs.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 23 Jun 2009 17:28:19 +0100

livecd-rootfs (0.84) karmic; urgency=low

  * Don't force installation of libgoffice-gtk-0-6 on xubuntu; this package
    is now obsolete.

 -- Steve Langasek <steve.langasek@ubuntu.com>  Wed, 10 Jun 2009 13:22:11 -0700

livecd-rootfs (0.83) karmic; urgency=low

  * Don't fail if livecd.${FSS}.{kernel,initrd} already exist for some
    reason.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 29 May 2009 11:38:18 +0200

livecd-rootfs (0.82) karmic; urgency=low

  [ Loic Minier ]
  * Default suite is the current one as returned by $(lsb_release -cs); depend
    on lsb-release (LP: #301963).
  * Use dpkg --print-architecture as --print-installation-architecture is
    deprecated.
  * Don't explicitely install linux-headers-imx51 on armel; all other arches
    get around this requirement by explicitely seeding the headers in
    desktop-common which we do as well.

  [ Colin Watson ]
  * Remove -nolzma option from mksquashfs, since (a) it's been the default
    since squashfs 1:3.3-1ubuntu1, and (b) it's no longer available in 4.0.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 29 May 2009 09:19:59 +0200

livecd-rootfs (0.81) karmic; urgency=low

  * ia64 uses -ia64 kernels across the board now.
  * BuildLiveCD: default to karmic.

 -- Colin Watson <cjwatson@ubuntu.com>  Sat, 09 May 2009 00:34:38 +0100

livecd-rootfs (0.80) jaunty; urgency=low

  * Add standard^ to UNR.
  * Add mobile-live^ to LIVELIST for MID and UNR. (LP: #358095)
  * Only build UNR from main, restricted and universe.

 -- Steve Kowalik <stevenk@ubuntu.com>  Thu, 16 Apr 2009 20:46:30 +1000

livecd-rootfs (0.79) jaunty; urgency=low

  * Use the --purge option to 'apt-get install', to ensure that any packages
    removed as a result of Conflicts are purged (LP: #327821).

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 03 Apr 2009 01:06:18 +0100

livecd-rootfs (0.78) jaunty; urgency=low

  * Use the imx51 kernel on armel.

 -- Steve Kowalik <stevenk@ubuntu.com>  Mon, 23 Mar 2009 09:49:30 +1100

livecd-rootfs (0.77) jaunty; urgency=low

  * Remove the D-Bus machine identifier from the livefs; it needs to be
    unique, and it's generated at boot time if it's missing (LP: #322830).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 29 Jan 2009 17:21:23 +0000

livecd-rootfs (0.76) jaunty; urgency=low

  * Allow kernel-less builds for armel for now (see
    https://wiki.ubuntu.com/Specs/ARMImageSelection).

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 20 Jan 2009 23:39:56 +0000

livecd-rootfs (0.75) jaunty; urgency=low

  [ Steve Langasek ]
  * BuildLiveCD: recognize 'mythbuntu' and 'ubuntu-mobile' as valid project
    names

  [ Colin Watson ]
  * BuildLiveCD: add ubuntu-umpc too.

  [ Steve Kowalik ]
  * BuildLiveCD: Add ubuntu-netbook-remix.
  * livecd.sh: Support ubuntu-netbook-remix.

 -- Steve Kowalik <stevenk@ubuntu.com>  Sat, 10 Jan 2009 11:08:29 +1100

livecd-rootfs (0.74) jaunty; urgency=low

  * For mythbuntu livefs builds, we don't have tasks yet. They will be
    coming in a future build of Soyuz, so for now just use the
    metapackages instead.

 -- Mario Limonciello <superm1@ubuntu.com>  Sat, 08 Nov 2008 09:49:56 -0600

livecd-rootfs (0.73) jaunty; urgency=low

  [ Colin Watson ]
  * Add ubuntu-umpc support (equivalent to previous ubuntu-mobile).

  [ Mario Limonciello ]
  * Add Mythbuntu support.
  * BuildLiveCD: default to jaunty.

 -- Mario Limonciello <superm1@ubuntu.com>  Tue, 04 Nov 2008 19:28:35 -0600

livecd-rootfs (0.72) intrepid; urgency=low

  * Fix source mirror for -updates in generated sources.list (it was
    incorrect for ports architectures).
  * Fix description of universe in generated sources.list: packages there
    are expected to be under a free licence.
  * Enable universe and multiverse for DVDs (there isn't generally enough
    space on CDs; see LP #105511).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 09 Oct 2008 02:13:41 +0100

livecd-rootfs (0.71) intrepid; urgency=low

  * change mobile to use the mobile-mobile task instead of teh metapackage for
    building images

 -- Oliver Grawert <ogra@ubuntu.com>  Mon, 29 Sep 2008 23:24:15 +0200

livecd-rootfs (0.70) intrepid; urgency=low

  * linux-lpia-meta exists, change lpia's kernel back to linux-lpia.

 -- Steve Kowalik <stevenk@ubuntu.com>  Fri, 26 Sep 2008 16:09:54 +1000

livecd-rootfs (0.69) intrepid; urgency=low

  * add ubuntu-mobile to build targets

 -- Oliver Grawert <ogra@ubuntu.com>  Tue, 23 Sep 2008 12:46:50 +0200

livecd-rootfs (0.68) intrepid; urgency=low

  * Unmount /proc/sys/fs/binfmt_misc, in case binfmt-support is installed
    and manages to mount it.
  * Move MOUNTS variable into cleanup function for clarity; it's used
    nowhere else.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 22 Sep 2008 11:52:22 +0100

livecd-rootfs (0.67) intrepid; urgency=low

  * Bump linux-lpia to -3.

 -- Steve Kowalik <stevenk@ubuntu.com>  Mon, 15 Sep 2008 16:41:34 +1000

livecd-rootfs (0.66) intrepid; urgency=low

  * Remove a bunch of seeded packages from ubuntu-mid's LIST.
  * Move casper from ubuntu-mid's LIST to LIVELIST.
  * Add ubiquity to ubuntu-mid's LIVELIST.

 -- Steve Kowalik <stevenk@ubuntu.com>  Thu, 11 Sep 2008 19:02:52 +1000

livecd-rootfs (0.65) intrepid; urgency=low

  * Fiddle the kernel name for lpia.

 -- Steve Kowalik <stevenk@ubuntu.com>  Tue, 09 Sep 2008 09:21:10 +1000

livecd-rootfs (0.64) intrepid; urgency=low

  * Add support for building Ubuntu MID images.
    - Includes changing the kernel name for lpia due to the lack of meta
      package for the time being.

 -- Steve Kowalik <stevenk@ubuntu.com>  Fri, 22 Aug 2008 18:10:38 +1000

livecd-rootfs (0.63) intrepid; urgency=low

  * Do not install xresprobe, it is not necessary any more and in universe
    now.

 -- Martin Pitt <martin.pitt@ubuntu.com>  Wed, 13 Aug 2008 09:45:15 +0200

livecd-rootfs (0.62) intrepid; urgency=low

  * Use 'set -eu' rather than putting -eu on the #! line, so that running
    'sh -x /usr/sbin/livecd.sh' for testing doesn't invoke different
    error-handling behaviour.
  * Remove the kernel from the livefs; ubiquity >= 1.9.4 will copy it from
    the CD root if it needs to (LP: #80385).

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 18 Jul 2008 20:01:15 +0100

livecd-rootfs (0.61) intrepid; urgency=low

  * Use apt pinning to force use of the version of ssl-cert from the hardy
    release pocket, not the one from -updates, so we avoid pulling in the
    very large openssl-blacklist package that we don't need on live CDs

 -- Steve Langasek <steve.langasek@ubuntu.com>  Fri, 20 Jun 2008 13:53:17 -0700

livecd-rootfs (0.60) intrepid; urgency=low

  * Employ hideous hack to ensure that when we're building against
    updates/proposed, we only get one version of kernel headers.
  * Move the cleanup() call to the end of the script, so we still
    have proc mounted for coreutils when update-initramfs is run.
  * Mount dev/pts immediately after debootstrap, as dpkg has begun
    whining pretty loudly (and occasionally exiting) if it's gone.

 -- Adam Conrad <adconrad@ubuntu.com>  Tue, 10 Jun 2008 17:20:10 -0600

livecd-rootfs (0.59) intrepid; urgency=low

  [ Colin Watson ]
  * Remove /boot/initrd.img-*.bak (LP: #64887).

  [ Adam Conrad ]
  * Resurrect the proposed option for livecd.sh/BuildLiveCD, so
    we can build test images that include packages from proposed.
  * Build with updates and security by default, which is a no-op
    on development releases (where these suites are empty), but
    a necessity for point-release image building.
  * Copy bin/true from the chroot, not from the real root, so
    image builds for i386/lpia work on amd64, as intended.

 -- Adam Conrad <adconrad@ubuntu.com>  Tue, 10 Jun 2008 13:23:18 -0600

livecd-rootfs (0.58) intrepid; urgency=low

  * Fix up BuildLiveCD to only pass -a$ARCH when building for intrepid,
    and to disallow multi-suite builds (does anyone use it for this) of
    suites >= intrepid and <= hardy in the same invocation.

 -- Adam Conrad <adconrad@ubuntu.com>  Fri, 02 May 2008 15:44:17 -0600

livecd-rootfs (0.57) intrepid; urgency=low

  * Allow the user to specify the ARCH on the livecd.sh command line,
    overriding the use of the dpkg architecture for the livecd run.
  * Differentiate between ARCH (the local architecture) and TARGETARCH,
    so that builds of ubuntu-lpia continue to work on the i386 buildd.
  * Pass ARCH by default from BuildLiveCD to livecd.sh; this should be
    manually overridden on cross-arch buildds, instead of using dpkg.
  * Update default suite in BuildLiveCD to intrepid, gutsy's a bit old.

 -- Adam Conrad <adconrad@ubuntu.com>  Fri, 02 May 2008 15:10:32 -0600

livecd-rootfs (0.56) hardy; urgency=low

  * Explicitly install language-support-en first for kubuntu-kde4
    live, should stop apt wanting to install firefox for no good
    reason.

 -- Jonathan Riddell <jriddell@ubuntu.com>  Thu, 13 Mar 2008 14:32:14 +0000

livecd-rootfs (0.55) hardy; urgency=low

  * All powerpc builds (including ps3) use the powerpc/powerpc64-smp kernels
    now.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 27 Feb 2008 20:19:16 +0000

livecd-rootfs (0.54) hardy; urgency=low

  * Run /etc/cron.daily/mlocate rather than /etc/cron.daily/slocate.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 27 Feb 2008 06:54:12 +0000

livecd-rootfs (0.53) hardy; urgency=low

  * Set kubuntu-kde4 to universe

 -- Jonathan Riddell <jriddell@ubuntu.com>  Fri, 22 Feb 2008 09:42:15 +0000

livecd-rootfs (0.52) hardy; urgency=low

  * Enable *ubuntu-dvd and kubuntu-kde4 as known projects in BuildLiveCD

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 14 Feb 2008 15:58:31 -0800

livecd-rootfs (0.51) hardy; urgency=low

  [ Jonathan Riddell ]
  * Add kubuntu-kde4

  [ Steve Langasek ]
  * Add new targets for {k,ed,}ubuntu-dvd

 -- Steve Langasek <steve.langasek@ubuntu.com>  Thu, 14 Feb 2008 10:15:33 -0800

livecd-rootfs (0.50) hardy; urgency=low

  * Switch Xubuntu to libgoffice-gtk-0-6.

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 31 Jan 2008 17:22:35 +0000

livecd-rootfs (0.49) hardy; urgency=low

  * Allow Xubuntu to build against universe and multiverse.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 28 Jan 2008 16:33:06 +0000

livecd-rootfs (0.48) hardy; urgency=low

  * fix typo in getopts call so the -m and -S options are recognized
  * drop call to non-existent sanitize command (LP: #179130)

 -- Oliver Grawert <ogra@ubuntu.com>  Fri, 25 Jan 2008 17:40:57 +0100

livecd-rootfs (0.47) hardy; urgency=low

  * Fix versioned dependency to squashfs-tools. "." != "-", silly me.

 -- Martin Pitt <martin.pitt@ubuntu.com>  Thu, 20 Dec 2007 14:17:47 +0100

livecd-rootfs (0.46) hardy; urgency=low

  * Use -nolzma option of mksquashfs, since our current kernel squashfs module
    does not support it yet (see LP #177634). Bump dependency to
    squashfs-tools to ensure availability of that option.

 -- Martin Pitt <martin.pitt@ubuntu.com>  Thu, 20 Dec 2007 12:03:41 +0100

livecd-rootfs (0.45) hardy; urgency=low

  [ Colin Watson ]
  * Vcs-Bzr is now an official field. Use an unauthenticated URL for it.

  [ Bryce Harrington ]
  * livecd.sh: Leave a token empty xorg.conf in place to let
    xserver-xorg postinst know it needs to regenerate it. (LP: #174537)

 -- Timo Aaltonen <tepsipakki@ubuntu.com>  Wed, 19 Dec 2007 01:23:32 +0200

livecd-rootfs (0.44) hardy; urgency=low

  * xubuntu seed change - libgoffice-gtk-0-4 --> libgoffice-gtk-0-5

 -- Sarah Hobbs <hobbsee@ubuntu.com>  Fri, 30 Nov 2007 14:52:29 +1100

livecd-rootfs (0.43) hardy; urgency=low

  * Add Gobuntu support.

 -- Colin Watson <cjwatson@ubuntu.com>  Mon, 29 Oct 2007 17:57:17 -0400

livecd-rootfs (0.42) hardy; urgency=low

  * Create /spu directory and spu group for powerpc+ps3 builds.
  * Add XS-Vcs-Bzr field.

 -- Colin Watson <cjwatson@ubuntu.com>  Wed, 24 Oct 2007 23:20:58 +0100

livecd-rootfs (0.41) gutsy; urgency=low

  * Log the size of doc directories to stdout.

 -- Matthias Klose <doko@ubuntu.com>  Sun, 07 Oct 2007 14:07:59 +0200

livecd-rootfs (0.40) gutsy; urgency=low

  * Set CASPER_GENERATE_UUID=1 to tell casper's initramfs hook to generate a
    UUID which will be checked against the discovered medium (LP: #144800).

 -- Colin Watson <cjwatson@ubuntu.com>  Thu, 04 Oct 2007 14:26:06 +0100

livecd-rootfs (0.39) gutsy; urgency=low

  * Print the file size in fdupes output as well.

 -- Matthias Klose <doko@ubuntu.com>  Thu, 04 Oct 2007 12:28:27 +0200

livecd-rootfs (0.38) gutsy; urgency=low

  * Avoid the ${ROOT} prefix in fdupes output, compact and sort the output.

 -- Matthias Klose <doko@ubuntu.com>  Thu, 04 Oct 2007 10:13:48 +0200

livecd-rootfs (0.37) gutsy; urgency=low

  * Run fdupes on ${ROOT}/usr.

 -- Matthias Klose <doko@ubuntu.com>  Wed, 03 Oct 2007 16:46:14 +0200

livecd-rootfs (0.36) gutsy; urgency=low

  * Change the names of ia64 kernels to the right (non-SMP since they're
    merged) ones.

 -- LaMont Jones <lamont@ubuntu.com>  Wed, 26 Sep 2007 13:50:19 -0600

livecd-rootfs (0.35) gutsy; urgency=low

  * Use linux-cell rather than linux-ps3.

 -- Colin Watson <cjwatson@ubuntu.com>  Tue, 25 Sep 2007 12:36:20 +0100

livecd-rootfs (0.34) gutsy; urgency=low

  * Rearrange lpia mirror selection hacks to work properly; FS isn't set
    until a bit later on.

 -- Colin Watson <cjwatson@ubuntu.com>  Sat, 08 Sep 2007 22:56:32 +0100

livecd-rootfs (0.33) gutsy; urgency=low

  [ Adam Conrad ]
  * Implement hideous hacks to build lpia mixed-arch livecds for developers
    to test with.  This should be reverted ASAP once LPIA main is built.
  * Add missing ${ROOT}sys to $MOUNTS; a bug exposed by a buggy debootstrap.

  [ Colin Watson ]
  * Add lupin-casper as well as casper, for installer-for-windows.
  * Revert most of the lpia hacks now that most of main is built, though we
    still need a few of them to make the ubuntu-lpia project work.
  * Move powerpc to ports.ubuntu.com.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 07 Sep 2007 19:11:03 +0100

livecd-rootfs (0.32) gutsy; urgency=low

  * For Edubuntu images, include the intersection of edubuntu-ship-addon and
    edubuntu-live in manifest-desktop, so that packages also on the add-on
    CD aren't removed after installation by ubiquity.

 -- Colin Watson <cjwatson@ubuntu.com>  Sat, 21 Jul 2007 14:43:09 +0100

livecd-rootfs (0.31) gutsy; urgency=low

  * Remove a duplicate "copyright" from debian/copyright.  Typing is hard.
  * Bump SOVER for libgoffice-gtk to make Xubuntu builds happy again.

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 18 Jul 2007 10:39:08 +0100

livecd-rootfs (0.30) gutsy; urgency=low

  * Relicense livecd.sh under the terms of the GPLv2, in preparation
    for our first public release of this hideous mess of shell.
  * Merge in Colin Watson's subarch hacks from the production buildds.
  * Update copyright again, this time only seven months late!
  * Change the maintainer in debian/control to me; so long, LaMont.
  * Install the BuildLiveCD script to doc/examples, so we have a handy
    place to yank it from, and to provide an example of our SSH trigger.
  * Remove duplicate debconf cruft from the chroot before building.

 -- Adam Conrad <adconrad@ubuntu.com>  Tue, 10 Jul 2007 10:48:04 +0100

livecd-rootfs (0.29) UNRELEASED; urgency=low

  * Update copyright to 2006, 9 months late is better than never, right?
  * Update kernels for i386 and amd64 to reflect recent renaming.
  * Remove all cloop-related code, we're now squashfs-only on all arches.
  * Add mirror information to make things work faster on my network.
  * Swap out more metapackages for tasks (ubuntu-minimal/ubuntu-standard)

 -- Adam Conrad <adconrad@ubuntu.com>  Thu, 21 Sep 2006 10:37:09 +1000

livecd-rootfs (0.28) UNRELEASED; urgency=low

  * Welcome to Edgy... Switch the default i386 kernel to -686, yay!
  * And when I say "edgy", I really mean it (ie: change the suite too)
  * Add the use of a sortfile from Tollef to the squashfs invocation.
  * s/libgoffice-gtk-1-2/libgoffice-gtk-0-3/ for the xubuntu hint.
  * s/ubuntu-base/ubuntu-minimal ubuntu-standard/g for seed changes.

 -- Adam Conrad <adconrad@ubuntu.com>  Mon, 28 Aug 2006 03:40:28 +1000

livecd-rootfs (0.27) UNRELEASED; urgency=low

  [ Adam Conrad ]
  * Copy the kernel out of the livefs as well, so we have one that matches.
  * Enable rudimentary support for squashfs filesystems, initially enabling
    it on the primary architectures only (powerpc, i386, amd64)
  * Split the package LIST into LIST and LIVELIST, and generate a manifest
    before installing LIVELIST, so espresso can calculate the difference.
  * Use --print-installation-architecture instead of --print-architecture
  * Special-case kubuntu cloops to be slightly larger, so we don't overflow.
  * Make sparc use archive.ubuntu.com, it's no longer a ports arch.
  * Add xubuntu support to livecd.sh, including hackish workarounds.
  * Reset the debconf frontend after we're all done with the chroot.

  [ LaMont Jones ]
  * umount /var/{run,lock}
  * changes for launchpad archive (ftpmaster.internal instead of jackass)

 -- LaMont Jones <lamont@debian.org>  Wed,  8 Feb 2006 10:49:27 -0700

livecd-rootfs (0.26) hoary-cat; urgency=low

  [ Adam Conrad ]
  * Copy the initrd out of the livefs for us in the SimplifiedLiveCD setup

  [ LaMont Jones ]
  * linux-image-power{3,4} -> powerpc64-smp
  * casper needs to be in the livecd image (change base).

 -- LaMont Jones <lamont@ubuntu.com>  Fri, 23 Dec 2005 09:37:57 -0700

livecd-rootfs (0.25) hoary-cat; urgency=low

  [ LaMont Jones ]
  * Really use e2fs-zero.py: it needs -w.  Comment out partimage.
  * edubuntu/kubuntu need to use ubuntu-base

  [ Adam Conrad ]
  * Make livecd.sh umount the lrm tmpfs during the cleanup process.
  * Make our sources.list use SECSRCMIRROR instead of SRCMIRROR for security
    sources, defaulting to SECMIRROR for release arches and SRCMIRROR for
    ports (since ports don't have security binaries and sources in one place)

 -- LaMont Jones <lamont@ubuntu.com>  Thu, 24 Nov 2005 10:13:33 -0700

livecd-rootfs (0.24) hoary-cat; urgency=low

  [ LaMont Jones ]
  * Incorporate e2fs-zero.py from Paul Sladen:
    http://www.paul.sladen.org/ubuntu/e2fszero/e2fs-zero.py
    And use it instead of partimage.  Suggest: partimage instead of
    Recommends.
  * Print package version during script run.
  * some HPPA fixes, allow architectures to have more than just main.
  * add debian/compat
  * Add --resolve-deps to debootstrap command.

  [ Adam Conrad ]
  * Incorporate 'tocd' target, including hideous hack to get the
    germinate output from Colin's lists at people.ubuntu.com

 -- LaMont Jones <lamont@canonical.com>  Tue, 25 Oct 2005 12:00:45 -0600

livecd-rootfs (0.23) hoary-cat; urgency=low

  * use kubuntu-live in the kubuntu case, per cjwatson.

 -- LaMont Jones <lamont@ubuntu.com>  Thu,  8 Sep 2005 09:48:12 -0600

livecd-rootfs (0.22) hoary-cat; urgency=low

  * rm -f etc/X11/xorg.conf, per #13788

 -- LaMont Jones <lamont@ubuntu.com>  Mon, 22 Aug 2005 22:07:10 -0600

livecd-rootfs (0.21) hoary-cat; urgency=low

  * a bit more ports.ubuntu.com cleanup: deb-src still needs to point at
    archive.ubuntu.com.
  * postfix isn't there anymore, make the postfix stripping stuff conditional.
  * nuke the update-notifier messages

 -- LaMont Jones <lamont@ubuntu.com>  Thu, 18 Aug 2005 12:09:49 -0600

livecd-rootfs (0.20) hoary-cat; urgency=low

  * incorporate ports.ubuntu.com repositories
  * make distro name a parameter.

 -- LaMont Jones <lamont@ubuntu.com>  Tue, 17 May 2005 21:39:24 -0600

livecd-rootfs (0.19) hoary; urgency=low

  * Add 'base' target

 -- LaMont Jones <lamont@ubuntu.com>  Wed, 13 Apr 2005 18:43:04 -0600

livecd-rootfs (0.18) hoary; urgency=low

  * set +e affects callers.

 -- LaMont Jones <lamont@ubuntu.com>  Tue,  5 Apr 2005 16:20:32 -0600

livecd-rootfs (0.17) hoary; urgency=low

  * locales cleanup.

 -- LaMont Jones <lamont@ubuntu.com>  Mon,  7 Mar 2005 09:53:54 -0700

livecd-rootfs (0.16) hoary; urgency=low

  * Bunch of cleanup for kubunut-live.

 -- LaMont Jones <lamont@ubuntu.com>  Thu,  3 Mar 2005 16:02:21 -0700

livecd-rootfs (0.15) hoary; urgency=low

  * Can't have arch-specific Depends.  Poor partimage.

 -- LaMont Jones <lamont@debian.org>  Sun, 27 Feb 2005 14:31:27 -0700

livecd-rootfs (0.14) hoary; urgency=low

  * Remove /etc/resolv.conf from the chroot.  Closes: #6954

 -- LaMont Jones <lamont@ubuntu.com>  Sat, 26 Feb 2005 18:39:22 -0700

livecd-rootfs (0.13) hoary; urgency=low

  * Add ubuntu-live

 -- LaMont Jones <lamont@canonical.com>  Fri, 11 Feb 2005 18:25:24 -0700

livecd-rootfs (0.12) hoary; urgency=low

  * partimage likes having TERM=vt100, better than a nonexistant one.

 -- LaMont Jones <lamont@debian.org>  Fri, 21 Jan 2005 23:36:41 -0700

livecd-rootfs (0.11) hoary; urgency=low

  * apt-get update in the final chroot
  * Change partimage depend to be [ !64-bit ], use partimage conditionally

 -- LaMont Jones <lamont@debian.org>  Fri, 21 Jan 2005 22:47:46 -0700

livecd-rootfs (0.10) hoary; urgency=low

  * Actually run /usr/sbin/locale-gen to generate the locales.
  * Try zero-filling the fsimage file

 -- LaMont Jones <lamont@debian.org>  Thu, 20 Jan 2005 19:14:45 -0700

livecd-rootfs (0.9) hoary; urgency=low

  * Can't divert conffiles, nor do we need to anymore.

 -- LaMont Jones <lamont@debian.org>  Wed, 19 Jan 2005 16:54:45 -0700

livecd-rootfs (0.8) hoary; urgency=low

  * Pre-generate some locales (en_{US,GB,ZA}.UTF-8)

 -- LaMont Jones <lamont@debian.org>  Sat, 15 Jan 2005 07:55:12 -0700

livecd-rootfs (0.7) hoary; urgency=low

  * rsync does not love what we do in cloop.  :(

 -- LaMont Jones <lamont@debian.org>  Fri, 14 Jan 2005 22:13:03 -0700

livecd-rootfs (0.6) hoary; urgency=low

  * fix typos in livecd.sh.  sigh.

 -- LaMont Jones <lamont@debian.org>  Fri, 14 Jan 2005 21:18:57 -0700

livecd-rootfs (0.5) hoary; urgency=low

  * Buildd various .cloop filesystems, to see if rsync loves us

 -- LaMont Jones <lamont@debian.org>  Thu, 13 Jan 2005 12:34:30 -0700

livecd-rootfs (0.4) hoary; urgency=low

  * Need to actually umount the fsimg before compressing it.

 -- LaMont Jones <lamont@debian.org>  Tue, 11 Jan 2005 15:21:32 -0700

livecd-rootfs (0.3) hoary; urgency=low

  * add manifest file

 -- LaMont Jones <lamont@debian.org>  Sun,  9 Jan 2005 13:27:07 -0700

livecd-rootfs (0.2) hoary; urgency=low

  * Better divertion setup, fix sources.list
  * copyright in file.
  * Flush postfix's queue of the install mail

 -- LaMont Jones <lamont@debian.org>  Fri,  7 Jan 2005 13:00:37 -0700

livecd-rootfs (0.1) hoary; urgency=low

  * Initial revision

 -- LaMont Jones <lamont@canonical.com>  Thu,  6 Jan 2005 21:24:08 -0700
